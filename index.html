
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <link rel="shortcut icon" type="image/png" href="images/favicon-78b83c63.png"/>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-8bbaabda.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-ae90cac7.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>

    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  </head>

  <body class="index" data-languages="[&quot;python&quot;,&quot;go&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <div style="max-width: 90%; margin: auto;">
        <svg width="760" height="326" viewBox="0 0 760 326" fill="none" xmlns="http://www.w3.org/2000/svg" style="
    max-width: 100%;
    height: auto; ">
<path d="M237.827 197.015V141.855C237.827 136.189 242.421 131.596 248.087 131.596H248.839V197.015H237.827Z" fill="white"/>
<path d="M264.802 197.015V131.596H276.388L302.913 179.072V131.596H303.186C308.852 131.596 313.446 136.189 313.446 141.855V197.015H301.859L275.335 149.539V197.015H264.802Z" fill="white"/>
<path d="M348.149 198.604C341.318 198.604 335.988 196.517 332.157 192.343C328.327 188.168 326.412 182.623 326.412 175.707H337.424C337.424 179.757 338.318 182.997 340.105 185.427C341.957 187.794 344.638 188.978 348.149 188.978C351.66 188.978 354.341 187.794 356.192 185.427C358.108 182.997 359.065 179.788 359.065 175.801V141.855C359.065 136.189 363.659 131.596 369.325 131.596H370.077V175.801C370.077 182.716 368.13 188.262 364.236 192.436C360.406 196.548 355.043 198.604 348.149 198.604Z" fill="white"/>
<path d="M385.033 131.596H423.719C423.719 136.912 419.409 141.222 414.093 141.222H396.045V159.726H423.719V169.352H396.045V187.389H423.719V197.015H385.033V159.726V141.222V131.596Z" fill="white"/>
<path d="M664.547 131.596H703.233C703.233 136.912 698.923 141.222 693.607 141.222H675.559V159.726H703.233V169.352H675.559V187.389H703.233V197.015H664.547V159.726V141.222V131.596Z" fill="white"/>
<path d="M468.74 198.602C459.187 198.602 451.625 195.425 446.052 189.069C440.48 182.714 437.694 174.459 437.694 164.303C437.694 154.148 440.48 145.893 446.052 139.537C451.625 133.182 459.187 130.005 468.74 130.005C476.757 130.005 483.353 132.248 488.528 136.734C493.702 141.157 496.744 146.921 497.654 154.023H495.192C490.358 154.023 486.503 150.371 483.637 146.479C482.811 145.357 481.854 144.351 480.766 143.463C477.696 140.908 473.715 139.631 468.825 139.631C462.286 139.631 457.169 141.874 453.473 146.36C449.834 150.783 448.014 156.765 448.014 164.303C448.014 171.842 449.834 177.855 453.473 182.341C457.169 186.764 462.286 188.976 468.825 188.976C473.715 188.976 477.696 187.699 480.766 185.144C481.854 184.256 482.811 183.25 483.637 182.128C486.503 178.236 490.358 174.584 495.192 174.584H497.654C496.744 181.686 493.702 187.481 488.528 191.967C483.353 196.39 476.757 198.602 468.74 198.602Z" fill="white"/>
<path d="M526.087 197.015V141.689H506.649V141.689C506.649 136.115 511.168 131.596 516.742 131.596H556.634V141.689H537.099V197.015H526.087Z" fill="white"/>
<path d="M570.609 197.015V141.855C570.609 136.189 575.202 131.596 580.869 131.596H581.621V197.015H570.609Z" fill="white"/>
<path d="M617.808 197.015L595.592 131.596H600.071C604.533 131.596 608.484 134.48 609.843 138.73L623.074 180.1L636.305 138.73C637.664 134.48 641.615 131.596 646.077 131.596H650.556L628.341 197.015H617.808Z" fill="white"/>
<path d="M74.2236 119.496C75.0537 118.452 75.9334 117.448 76.8132 116.444C76.8527 116.394 76.9419 116.384 76.9815 116.334C77.0605 116.235 77.1893 116.175 77.2684 116.076L77.3474 115.976C77.9607 115.409 78.6134 114.792 79.3657 114.255C82.0277 112.234 84.7904 110.699 87.7035 109.688C97.0469 106.408 107.448 108.43 115.604 116.13C126.993 126.805 125.973 144.002 116.882 155.432C105.393 172.472 85.6509 196.246 112.986 217.542C117.901 221.371 121.547 224.528 137.029 229.002C126.903 230.868 117.515 230.287 107.065 227.618C99.673 223.446 88.0515 214.513 84.0976 202.447C78.1216 184.15 94.6185 156.798 102.591 146.263C113.538 131.684 95.8255 115.901 82.7856 133.521C75.9692 142.704 64.0444 168.688 68.1884 187.962C70.6114 198.892 73.8411 206.859 86.6466 217.803C84.2719 216.402 81.966 214.812 79.729 213.034C49.9763 185.32 53.4282 142.467 74.2236 119.496Z" fill="url(#paint0_linear)"/>
<path d="M175.506 206.981C174.676 208.025 173.796 209.029 172.916 210.033C172.877 210.083 172.787 210.093 172.748 210.142C172.669 210.242 172.54 210.302 172.461 210.401L172.382 210.501C171.769 211.068 171.116 211.684 170.364 212.222C167.701 214.243 164.939 215.778 162.026 216.788C152.682 220.069 142.282 218.047 134.125 210.347C122.737 199.672 123.757 182.475 132.848 171.044C144.336 154.005 164.078 130.231 136.743 108.935C131.828 105.106 128.182 101.948 112.7 97.4745C122.826 95.6091 132.214 96.1893 142.664 98.8584C150.056 103.031 161.678 111.964 165.632 124.03C171.608 142.327 155.111 169.679 147.138 180.213C136.192 194.793 153.904 210.575 166.944 192.956C173.76 183.773 185.685 157.789 181.541 138.515C179.118 127.585 175.888 119.618 163.083 108.674C165.457 110.075 167.763 111.664 170 113.443C199.753 141.157 196.301 184.01 175.506 206.981Z" fill="url(#paint1_linear)"/>
<defs>
<linearGradient id="paint0_linear" x1="58.0129" y1="163.238" x2="191.716" y2="163.238" gradientUnits="userSpaceOnUse">
<stop stop-color="#0082FA"/>
<stop offset="1" stop-color="#00F2FE"/>
</linearGradient>
<linearGradient id="paint1_linear" x1="58.0129" y1="163.238" x2="191.716" y2="163.238" gradientUnits="userSpaceOnUse">
<stop stop-color="#0082FA"/>
<stop offset="1" stop-color="#00F2FE"/>
</linearGradient>
</defs>
</svg>

      </div>
        <div class="lang-selector">
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="go">Golang</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#clients" class="toc-h1 toc-link" data-title="Clients">Clients</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#clients-python-client" class="toc-h2 toc-link" data-title="Python Client">Python Client</a>
                  </li>
                  <li>
                    <a href="#clients-golang-client" class="toc-h2 toc-link" data-title="Golang Client">Golang Client</a>
                  </li>
                  <li>
                    <a href="#clients-typescript-client" class="toc-h2 toc-link" data-title="Typescript Client">Typescript Client</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#overview-architecture-overview" class="toc-h2 toc-link" data-title="Architecture Overview">Architecture Overview</a>
                  </li>
                  <li>
                    <a href="#overview-key-differences-to-cex" class="toc-h2 toc-link" data-title="Key Differences To CEX">Key Differences To CEX</a>
                  </li>
                  <li>
                    <a href="#overview-comparison-to-cex" class="toc-h2 toc-link" data-title="Comparison to CEX">Comparison to CEX</a>
                  </li>
                  <li>
                    <a href="#overview-frequent-batch-auction-fba" class="toc-h2 toc-link" data-title="Frequent Batch Auction (FBA)">Frequent Batch Auction (FBA)</a>
                  </li>
                  <li>
                    <a href="#overview-trading-fees-and-gas" class="toc-h2 toc-link" data-title="Trading Fees and Gas">Trading Fees and Gas</a>
                  </li>
                  <li>
                    <a href="#overview-mark-price-margin-requirement" class="toc-h2 toc-link" data-title="Mark Price Margin Requirement">Mark Price Margin Requirement</a>
                  </li>
                  <li>
                    <a href="#overview-liquidations" class="toc-h2 toc-link" data-title="Liquidations">Liquidations</a>
                  </li>
                  <li>
                    <a href="#overview-fee-discounts" class="toc-h2 toc-link" data-title="Fee Discounts">Fee Discounts</a>
                  </li>
                  <li>
                    <a href="#overview-funding-rate" class="toc-h2 toc-link" data-title="Funding Rate">Funding Rate</a>
                  </li>
                  <li>
                    <a href="#overview-closing-a-position" class="toc-h2 toc-link" data-title="Closing a Position">Closing a Position</a>
                  </li>
                  <li>
                    <a href="#overview-trading-rewards" class="toc-h2 toc-link" data-title="Trading Rewards">Trading Rewards</a>
                  </li>
                  <li>
                    <a href="#overview-reduce-only-order-precedence" class="toc-h2 toc-link" data-title="Reduce-Only Order Precedence">Reduce-Only Order Precedence</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#examples" class="toc-h1 toc-link" data-title="Examples">Examples</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#examples-adding-a-spot-market-buy-order" class="toc-h2 toc-link" data-title="Adding a Spot Market Buy Order">Adding a Spot Market Buy Order</a>
                  </li>
                  <li>
                    <a href="#examples-adding-a-spot-market-sell-order" class="toc-h2 toc-link" data-title="Adding a Spot Market Sell Order">Adding a Spot Market Sell Order</a>
                  </li>
                  <li>
                    <a href="#examples-adding-a-spot-limit-buy-order" class="toc-h2 toc-link" data-title="Adding a Spot Limit Buy Order">Adding a Spot Limit Buy Order</a>
                  </li>
                  <li>
                    <a href="#examples-adding-a-spot-limit-sell-order" class="toc-h2 toc-link" data-title="Adding a Spot Limit Sell Order">Adding a Spot Limit Sell Order</a>
                  </li>
                  <li>
                    <a href="#examples-derivative-market-order-payouts" class="toc-h2 toc-link" data-title="Derivative Market Order Payouts">Derivative Market Order Payouts</a>
                  </li>
                  <li>
                    <a href="#examples-adding-a-derivative-limit-buy-order" class="toc-h2 toc-link" data-title="Adding a Derivative Limit Buy Order">Adding a Derivative Limit Buy Order</a>
                  </li>
                  <li>
                    <a href="#examples-market-order-matching" class="toc-h2 toc-link" data-title="Market Order Matching">Market Order Matching</a>
                  </li>
                  <li>
                    <a href="#examples-limit-order-matching" class="toc-h2 toc-link" data-title="Limit Order Matching">Limit Order Matching</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#swagger" class="toc-h1 toc-link" data-title="Swagger">Swagger</a>
          </li>
          <li>
            <a href="#explorer" class="toc-h1 toc-link" data-title="Explorer">Explorer</a>
          </li>
          <li>
            <a href="#faucet" class="toc-h1 toc-link" data-title="Faucet">Faucet</a>
          </li>
          <li>
            <a href="#exchange-api" class="toc-h1 toc-link" data-title="Exchange API">Exchange API</a>
          </li>
          <li>
            <a href="#injectiveaccountsrpc" class="toc-h1 toc-link" data-title="- InjectiveAccountsRPC">- InjectiveAccountsRPC</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#injectiveaccountsrpc-subaccountslist" class="toc-h2 toc-link" data-title="SubaccountsList">SubaccountsList</a>
                  </li>
                  <li>
                    <a href="#injectiveaccountsrpc-subaccounthistory" class="toc-h2 toc-link" data-title="SubaccountHistory">SubaccountHistory</a>
                  </li>
                  <li>
                    <a href="#injectiveaccountsrpc-subaccountbalance" class="toc-h2 toc-link" data-title="SubaccountBalance">SubaccountBalance</a>
                  </li>
                  <li>
                    <a href="#injectiveaccountsrpc-subaccountbalanceslist" class="toc-h2 toc-link" data-title="SubaccountBalancesList">SubaccountBalancesList</a>
                  </li>
                  <li>
                    <a href="#injectiveaccountsrpc-subaccountordersummary" class="toc-h2 toc-link" data-title="SubaccountOrderSummary">SubaccountOrderSummary</a>
                  </li>
                  <li>
                    <a href="#injectiveaccountsrpc-streamsubaccountbalance" class="toc-h2 toc-link" data-title="StreamSubaccountBalance">StreamSubaccountBalance</a>
                  </li>
                  <li>
                    <a href="#injectiveaccountsrpc-orderstates" class="toc-h2 toc-link" data-title="OrderStates">OrderStates</a>
                  </li>
                  <li>
                    <a href="#injectiveaccountsrpc-portfolio" class="toc-h2 toc-link" data-title="Portfolio">Portfolio</a>
                  </li>
                  <li>
                    <a href="#injectiveaccountsrpc-rewards" class="toc-h2 toc-link" data-title="Rewards">Rewards</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#injectivespotexchangerpc" class="toc-h1 toc-link" data-title="- InjectiveSpotExchangeRPC">- InjectiveSpotExchangeRPC</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#injectivespotexchangerpc-market" class="toc-h2 toc-link" data-title="Market">Market</a>
                  </li>
                  <li>
                    <a href="#injectivespotexchangerpc-markets" class="toc-h2 toc-link" data-title="Markets">Markets</a>
                  </li>
                  <li>
                    <a href="#injectivespotexchangerpc-streammarkets" class="toc-h2 toc-link" data-title="StreamMarkets">StreamMarkets</a>
                  </li>
                  <li>
                    <a href="#injectivespotexchangerpc-orders" class="toc-h2 toc-link" data-title="Orders">Orders</a>
                  </li>
                  <li>
                    <a href="#injectivespotexchangerpc-streamorders" class="toc-h2 toc-link" data-title="StreamOrders">StreamOrders</a>
                  </li>
                  <li>
                    <a href="#injectivespotexchangerpc-trades" class="toc-h2 toc-link" data-title="Trades">Trades</a>
                  </li>
                  <li>
                    <a href="#injectivespotexchangerpc-streamtrades" class="toc-h2 toc-link" data-title="StreamTrades">StreamTrades</a>
                  </li>
                  <li>
                    <a href="#injectivespotexchangerpc-orderbook" class="toc-h2 toc-link" data-title="Orderbook">Orderbook</a>
                  </li>
                  <li>
                    <a href="#injectivespotexchangerpc-orderbooks" class="toc-h2 toc-link" data-title="Orderbooks">Orderbooks</a>
                  </li>
                  <li>
                    <a href="#injectivespotexchangerpc-streamorderbook" class="toc-h2 toc-link" data-title="StreamOrderbook">StreamOrderbook</a>
                  </li>
                  <li>
                    <a href="#injectivespotexchangerpc-streamorderbooks" class="toc-h2 toc-link" data-title="StreamOrderbooks">StreamOrderbooks</a>
                  </li>
                  <li>
                    <a href="#injectivespotexchangerpc-subaccountorderslist" class="toc-h2 toc-link" data-title="SubaccountOrdersList">SubaccountOrdersList</a>
                  </li>
                  <li>
                    <a href="#injectivespotexchangerpc-subaccounttradeslist" class="toc-h2 toc-link" data-title="SubaccountTradesList">SubaccountTradesList</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#injectivederivativeexchangerpc" class="toc-h1 toc-link" data-title="- InjectiveDerivativeExchangeRPC">- InjectiveDerivativeExchangeRPC</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#injectivederivativeexchangerpc-market" class="toc-h2 toc-link" data-title="Market">Market</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-markets" class="toc-h2 toc-link" data-title="Markets">Markets</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-streammarket" class="toc-h2 toc-link" data-title="StreamMarket">StreamMarket</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-orders" class="toc-h2 toc-link" data-title="Orders">Orders</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-streamorders" class="toc-h2 toc-link" data-title="StreamOrders">StreamOrders</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-trades" class="toc-h2 toc-link" data-title="Trades">Trades</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-streamtrades" class="toc-h2 toc-link" data-title="StreamTrades">StreamTrades</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-positions" class="toc-h2 toc-link" data-title="Positions">Positions</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-streampositions" class="toc-h2 toc-link" data-title="StreamPositions">StreamPositions</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-orderbook" class="toc-h2 toc-link" data-title="Orderbook">Orderbook</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-orderbooks" class="toc-h2 toc-link" data-title="Orderbooks">Orderbooks</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-streamorderbook" class="toc-h2 toc-link" data-title="StreamOrderbook">StreamOrderbook</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-streamorderbooks" class="toc-h2 toc-link" data-title="StreamOrderbooks">StreamOrderbooks</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-subaccountorderslist" class="toc-h2 toc-link" data-title="SubaccountOrdersList">SubaccountOrdersList</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-subaccounttradeslist" class="toc-h2 toc-link" data-title="SubaccountTradesList">SubaccountTradesList</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-fundingpayments" class="toc-h2 toc-link" data-title="FundingPayments">FundingPayments</a>
                  </li>
                  <li>
                    <a href="#injectivederivativeexchangerpc-fundingrates" class="toc-h2 toc-link" data-title="FundingRates">FundingRates</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#injectiveoraclerpc" class="toc-h1 toc-link" data-title="- InjectiveOracleRPC">- InjectiveOracleRPC</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#injectiveoraclerpc-oraclelist" class="toc-h2 toc-link" data-title="OracleList">OracleList</a>
                  </li>
                  <li>
                    <a href="#injectiveoraclerpc-price" class="toc-h2 toc-link" data-title="Price">Price</a>
                  </li>
                  <li>
                    <a href="#injectiveoraclerpc-streamprices" class="toc-h2 toc-link" data-title="StreamPrices">StreamPrices</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#injectiveinsurancerpc" class="toc-h1 toc-link" data-title="- InjectiveInsuranceRPC">- InjectiveInsuranceRPC</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#injectiveinsurancerpc-insurancefunds" class="toc-h2 toc-link" data-title="InsuranceFunds">InsuranceFunds</a>
                  </li>
                  <li>
                    <a href="#injectiveinsurancerpc-redemptions" class="toc-h2 toc-link" data-title="Redemptions">Redemptions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#injectiveauctionrpc" class="toc-h1 toc-link" data-title="- InjectiveAuctionRPC">- InjectiveAuctionRPC</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#injectiveauctionrpc-auction" class="toc-h2 toc-link" data-title="Auction">Auction</a>
                  </li>
                  <li>
                    <a href="#injectiveauctionrpc-auctions" class="toc-h2 toc-link" data-title="Auctions">Auctions</a>
                  </li>
                  <li>
                    <a href="#injectiveauctionrpc-streambids" class="toc-h2 toc-link" data-title="StreamBids">StreamBids</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#injectiveexplorerrpc" class="toc-h1 toc-link" data-title="- InjectiveExplorerRPC">- InjectiveExplorerRPC</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#injectiveexplorerrpc-gettxbyhash" class="toc-h2 toc-link" data-title="GetTxByHash">GetTxByHash</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#injectivemetarpc" class="toc-h1 toc-link" data-title="- InjectiveMetaRPC">- InjectiveMetaRPC</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#injectivemetarpc-ping" class="toc-h2 toc-link" data-title="Ping">Ping</a>
                  </li>
                  <li>
                    <a href="#injectivemetarpc-version" class="toc-h2 toc-link" data-title="Version">Version</a>
                  </li>
                  <li>
                    <a href="#injectivemetarpc-info" class="toc-h2 toc-link" data-title="Info">Info</a>
                  </li>
                  <li>
                    <a href="#injectivemetarpc-streamkeepalive" class="toc-h2 toc-link" data-title="StreamKeepAlive">StreamKeepAlive</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#chain-api" class="toc-h1 toc-link" data-title="Chain API">Chain API</a>
          </li>
          <li>
            <a href="#derivatives" class="toc-h1 toc-link" data-title="- Derivatives">- Derivatives</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#derivatives-msgcreatederivativemarketorder" class="toc-h2 toc-link" data-title="MsgCreateDerivativeMarketOrder">MsgCreateDerivativeMarketOrder</a>
                  </li>
                  <li>
                    <a href="#derivatives-msgcreatederivativelimitorder" class="toc-h2 toc-link" data-title="MsgCreateDerivativeLimitOrder">MsgCreateDerivativeLimitOrder</a>
                  </li>
                  <li>
                    <a href="#derivatives-msgcancelderivativeorder" class="toc-h2 toc-link" data-title="MsgCancelDerivativeOrder">MsgCancelDerivativeOrder</a>
                  </li>
                  <li>
                    <a href="#derivatives-msgbatchcreatederivativelimitorders" class="toc-h2 toc-link" data-title="MsgBatchCreateDerivativeLimitOrders">MsgBatchCreateDerivativeLimitOrders</a>
                  </li>
                  <li>
                    <a href="#derivatives-msgbatchcancelderivativeorders" class="toc-h2 toc-link" data-title="MsgBatchCancelDerivativeOrders">MsgBatchCancelDerivativeOrders</a>
                  </li>
                  <li>
                    <a href="#derivatives-msgbatchupdateorders" class="toc-h2 toc-link" data-title="MsgBatchUpdateOrders">MsgBatchUpdateOrders</a>
                  </li>
                  <li>
                    <a href="#derivatives-msgincreasepositionmargin" class="toc-h2 toc-link" data-title="MsgIncreasePositionMargin">MsgIncreasePositionMargin</a>
                  </li>
                  <li>
                    <a href="#derivatives-localorderhashcomputation" class="toc-h2 toc-link" data-title="LocalOrderHashComputation">LocalOrderHashComputation</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#spot" class="toc-h1 toc-link" data-title="- Spot">- Spot</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#spot-msgcreatespotmarketorder" class="toc-h2 toc-link" data-title="MsgCreateSpotMarketOrder">MsgCreateSpotMarketOrder</a>
                  </li>
                  <li>
                    <a href="#spot-msgcreatespotlimitorder" class="toc-h2 toc-link" data-title="MsgCreateSpotLimitOrder">MsgCreateSpotLimitOrder</a>
                  </li>
                  <li>
                    <a href="#spot-msgcancelspotorder" class="toc-h2 toc-link" data-title="MsgCancelSpotOrder">MsgCancelSpotOrder</a>
                  </li>
                  <li>
                    <a href="#spot-msgbatchcreatespotlimitorders" class="toc-h2 toc-link" data-title="MsgBatchCreateSpotLimitOrders">MsgBatchCreateSpotLimitOrders</a>
                  </li>
                  <li>
                    <a href="#spot-msgbatchcancelspotorders" class="toc-h2 toc-link" data-title="MsgBatchCancelSpotOrders">MsgBatchCancelSpotOrders</a>
                  </li>
                  <li>
                    <a href="#spot-msgbatchupdateorders" class="toc-h2 toc-link" data-title="MsgBatchUpdateOrders">MsgBatchUpdateOrders</a>
                  </li>
                  <li>
                    <a href="#spot-localorderhashcomputation" class="toc-h2 toc-link" data-title="LocalOrderHashComputation">LocalOrderHashComputation</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#account" class="toc-h1 toc-link" data-title="- Account">- Account</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#account-msgsend" class="toc-h2 toc-link" data-title="MsgSend">MsgSend</a>
                  </li>
                  <li>
                    <a href="#account-msgdeposit" class="toc-h2 toc-link" data-title="MsgDeposit">MsgDeposit</a>
                  </li>
                  <li>
                    <a href="#account-msgwithdraw" class="toc-h2 toc-link" data-title="MsgWithdraw">MsgWithdraw</a>
                  </li>
                  <li>
                    <a href="#account-msgsubaccounttransfer" class="toc-h2 toc-link" data-title="MsgSubaccountTransfer">MsgSubaccountTransfer</a>
                  </li>
                  <li>
                    <a href="#account-msgsendtoeth" class="toc-h2 toc-link" data-title="MsgSendToEth">MsgSendToEth</a>
                  </li>
                  <li>
                    <a href="#account-sendtocosmos" class="toc-h2 toc-link" data-title="SendToCosmos">SendToCosmos</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#auction" class="toc-h1 toc-link" data-title="- Auction">- Auction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#auction-msgbid" class="toc-h2 toc-link" data-title="MsgBid">MsgBid</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authz" class="toc-h1 toc-link" data-title="- Authz">- Authz</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authz-msggrant" class="toc-h2 toc-link" data-title="MsgGrant">MsgGrant</a>
                  </li>
                  <li>
                    <a href="#authz-msgexec" class="toc-h2 toc-link" data-title="MsgExec">MsgExec</a>
                  </li>
                  <li>
                    <a href="#authz-msgrevoke" class="toc-h2 toc-link" data-title="MsgRevoke">MsgRevoke</a>
                  </li>
                  <li>
                    <a href="#authz-grants" class="toc-h2 toc-link" data-title="Grants">Grants</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#oracle" class="toc-h1 toc-link" data-title="- Oracle">- Oracle</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#oracle-msgrelaypricefeedprice" class="toc-h2 toc-link" data-title="MsgRelayPriceFeedPrice">MsgRelayPriceFeedPrice</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#staking" class="toc-h1 toc-link" data-title="- Staking">- Staking</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#staking-msgwithdrawdelegatorreward" class="toc-h2 toc-link" data-title="MsgWithdrawDelegatorReward">MsgWithdrawDelegatorReward</a>
                  </li>
                  <li>
                    <a href="#staking-msgdelegate" class="toc-h2 toc-link" data-title="MsgDelegate">MsgDelegate</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#glossary" class="toc-h1 toc-link" data-title="Glossary">Glossary</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#glossary-injective-chain" class="toc-h2 toc-link" data-title="Injective Chain">Injective Chain</a>
                  </li>
                  <li>
                    <a href="#glossary-validator-injective-node" class="toc-h2 toc-link" data-title="Validator / Injective Node">Validator / Injective Node</a>
                  </li>
                  <li>
                    <a href="#glossary-on-chain-matching" class="toc-h2 toc-link" data-title="On-chain Matching">On-chain Matching</a>
                  </li>
                  <li>
                    <a href="#glossary-frequent-batch-auction-fba" class="toc-h2 toc-link" data-title="Frequent Batch Auction (FBA)">Frequent Batch Auction (FBA)</a>
                  </li>
                  <li>
                    <a href="#glossary-relayer" class="toc-h2 toc-link" data-title="Relayer">Relayer</a>
                  </li>
                  <li>
                    <a href="#glossary-mempool" class="toc-h2 toc-link" data-title="Mempool">Mempool</a>
                  </li>
                  <li>
                    <a href="#glossary-grpc" class="toc-h2 toc-link" data-title="gRPC">gRPC</a>
                  </li>
                  <li>
                    <a href="#glossary-mark-price" class="toc-h2 toc-link" data-title="Mark Price">Mark Price</a>
                  </li>
                  <li>
                    <a href="#glossary-perpetual-swap" class="toc-h2 toc-link" data-title="Perpetual Swap">Perpetual Swap</a>
                  </li>
                  <li>
                    <a href="#glossary-funding-rate" class="toc-h2 toc-link" data-title="Funding Rate">Funding Rate</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#faq" class="toc-h1 toc-link" data-title="FAQ">FAQ</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#faq-1-what-are-the-trading-fees-on-injective" class="toc-h2 toc-link" data-title="1. What are the trading fees on Injective?">1. What are the trading fees on Injective?</a>
                  </li>
                  <li>
                    <a href="#faq-2-what-are-the-gas-fees-on-injective" class="toc-h2 toc-link" data-title="2. What are the gas fees on Injective?">2. What are the gas fees on Injective?</a>
                  </li>
                  <li>
                    <a href="#faq-3-how-can-i-calculate-the-gas-fees-in-inj" class="toc-h2 toc-link" data-title="3. How can I calculate the gas fees in INJ?">3. How can I calculate the gas fees in INJ?</a>
                  </li>
                  <li>
                    <a href="#faq-4-which-api-nodes-can-i-connect-to" class="toc-h2 toc-link" data-title="4. Which API nodes can I connect to?">4. Which API nodes can I connect to?</a>
                  </li>
                  <li>
                    <a href="#faq-5-does-injective-have-an-api-support-channel" class="toc-h2 toc-link" data-title="5. Does Injective have an API support channel?">5. Does Injective have an API support channel?</a>
                  </li>
                  <li>
                    <a href="#faq-6-can-i-get-the-order_hash-order_id-right-after-i-send-a-new-order" class="toc-h2 toc-link" data-title="6. Can I get the order_hash (order_id) right after I send a new order?">6. Can I get the order_hash (order_id) right after I send a new order?</a>
                  </li>
                  <li>
                    <a href="#faq-7-are-there-limits-in-the-api-requests" class="toc-h2 toc-link" data-title="7. Are there limits in the API requests?">7. Are there limits in the API requests?</a>
                  </li>
                  <li>
                    <a href="#faq-8-what-is-the-normal-order-latency-i-can-expect" class="toc-h2 toc-link" data-title="8. What is the normal order latency I can expect?">8. What is the normal order latency I can expect?</a>
                  </li>
                  <li>
                    <a href="#faq-9-can-i-have-my-own-client-id-to-send-messages-through-the-api" class="toc-h2 toc-link" data-title="9. Can I have my own client id to send messages through the API?">9. Can I have my own client id to send messages through the API?</a>
                  </li>
                  <li>
                    <a href="#faq-10-would-i-save-gas-fees-if-i-batch-messages-in-transactions" class="toc-h2 toc-link" data-title="10. Would I save gas fees if I batch messages in transactions?">10. Would I save gas fees if I batch messages in transactions?</a>
                  </li>
                  <li>
                    <a href="#faq-11-what-is-the-timeout_height" class="toc-h2 toc-link" data-title="11. What is the timeout_height?">11. What is the timeout_height?</a>
                  </li>
                  <li>
                    <a href="#faq-12-do-fee-discounts-apply-to-all-markets" class="toc-h2 toc-link" data-title="12. Do fee discounts apply to all markets?">12. Do fee discounts apply to all markets?</a>
                  </li>
                  <li>
                    <a href="#faq-13-what-is-the-block-time-on-the-network" class="toc-h2 toc-link" data-title="13. What is the block time on the network?">13. What is the block time on the network?</a>
                  </li>
                  <li>
                    <a href="#faq-14-does-gas-fee-affect-block-inclusion-and-transaction-ordering" class="toc-h2 toc-link" data-title="14. Does gas fee affect block inclusion and transaction ordering?">14. Does gas fee affect block inclusion and transaction ordering?</a>
                  </li>
                  <li>
                    <a href="#faq-15-when-may-i-see-account-sequence-mismatch-errors" class="toc-h2 toc-link" data-title="15. When may I see account sequence mismatch errors?">15. When may I see account sequence mismatch errors?</a>
                  </li>
                  <li>
                    <a href="#faq-16-what-are-the-broadcast-modes-i-can-use-to-send-a-transaction" class="toc-h2 toc-link" data-title="16. What are the broadcast modes I can use to send a transaction?">16. What are the broadcast modes I can use to send a transaction?</a>
                  </li>
                  <li>
                    <a href="#faq-17-when-may-i-see-a-max-subscriptions-per-client-error" class="toc-h2 toc-link" data-title="17. When may I see a max subscriptions per client error?">17. When may I see a max subscriptions per client error?</a>
                  </li>
                  <li>
                    <a href="#faq-18-how-long-does-it-take-until-the-exchange-api-returns-my-orders-trades-after-the-transaction-has-been-sent" class="toc-h2 toc-link" data-title="18. How long does it take until the Exchange API returns my orders/trades after the transaction has been sent?">18. How long does it take until the Exchange API returns my orders/trades after the transaction has been sent?</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to Injective Protocol&#39;s documentation!</p>

<p>Here you can find a comprehensive overview of our protocol, as well as tutorials, guides and general resources for developers and API traders.</p>

<p>If you would like to ask any questions or be a part of our community, please join our <a href="https://discord.gg/injective">Discord Group</a> or <a href="https://t.me/InjectiveAPI">Telegram Group</a>. We have a dedicated channel in our Discord group for questions related to the API.</p>
<h1 id='clients'>Clients</h1><h2 id='clients-python-client'>Python Client</h2>
<p><strong>Dependencies</strong></p>

<p><em>Ubuntu</em></p>

<p><code>sudo apt install python3.X-dev autoconf automake build-essential libffi-dev libtool pkg-config</code></p>

<p><em>Fedora</em></p>

<p><code>sudo dnf install python3-devel autoconf automake gcc gcc-c++ libffi-devel libtool make pkgconfig</code></p>

<p><em>macOS</em></p>

<p><code>brew install autoconf automake libtool</code></p>

<p><strong>Installation</strong></p>

<p>Install injective-py from PyPI using <code>pip</code>.</p>
<div class="highlight"><pre class="highlight shell"><code>pip <span class="nb">install </span>injective-py
</code></pre></div>
<p><strong>Reference</strong></p>

<p><a href="https://github.com/InjectiveLabs/sdk-python">InjectiveLabs/sdk-python</a>.</p>
<h2 id='clients-golang-client'>Golang Client</h2>
<p><strong>Installation</strong></p>

<p>Install sdk-go using <code>go get</code>.</p>
<div class="highlight"><pre class="highlight shell"><code>go get <span class="nt">-u</span> github.com/InjectiveLabs/sdk-go
</code></pre></div>
<p><strong>Reference</strong></p>

<p><a href="https://github.com/InjectiveLabs/sdk-go">InjectiveLabs/sdk-go</a>.</p>
<h2 id='clients-typescript-client'>Typescript Client</h2>
<p><strong>Installation</strong></p>

<p>Install the <code>@injectivelabs/sdk-ts</code> npm package using <code>yarn</code> =&gt; <code>yarn add @injectivelabs/sdk-ts</code></p>

<p><strong>Reference</strong></p>

<ul>
<li><a href="https://github.com/InjectiveLabs/injective-ts/tree/master/packages/sdk-ts">Source code of the @injectivelabs/sdk-ts package</a></li>
<li><a href="https://github.com/InjectiveLabs/injective-sdk-ts-example">Examples based on the @injectivelabs/sdk-ts packages</a>.</li>
</ul>
<h1 id='overview'>Overview</h1>
<p>Injective Protocol is a fully decentralized layer-2 DEX protocol built for the next generation of decentralized derivatives exchange. The Injective Chain is a Tendermint-based IBC-compatible blockchain which supports a decentralized orderbook-based DEX protocol and a trustless ERC-20 token bridge to the Ethereum blockchain.</p>

<p>It is the first layer-2 fully decentralized exchange protocol for decentralized perpetual swaps, futures, and spot trading that unlocks the full potential of decentralized derivatives and borderless DeFi. Every component of the protocol has been built to be fully trustless, censorship-resistant, publicly verifiable, and front-running resistant.</p>

<p>By providing the unrestricted and unprecedented ability to express diverse views in the decentralized financial markets, we are striving to empower individuals with the ability to more efficiently allocate capital in our society.</p>
<h2 id='overview-architecture-overview'>Architecture Overview</h2>
<p>Injective Protocol enables traders to create and trade on arbitrary spot and derivative markets. The entire process includes on-chain limit orderbook management, on-chain trade execution, on-chain order matching, on-chain transaction settlement, and on-chain trading incentive distribution through the logic codified by the Injective Chain&#39;s <a href="https://chain.injective.network/modules/exchange/">exchange module</a>.</p>

<p>Architecturally there are two main services that traders should concern themselves with:</p>

<ol>
<li>The Injective Chain node (the Chain API)</li>
<li>The Injective Exchange API</li>
</ol>

<p>The trading lifecycle is as follows:</p>

<ol>
<li>First, traders cryptographically sign a <strong>transaction</strong> containing one or more order <strong>messages</strong> (e.g. <code>MsgBatchCreateDerivativeLimitOrders</code>, <code>MsgCreateSpotMarketOrder</code>, <code>MsgCancelDerivativeLimitOrder</code>, etc. ).</li>
<li>Then the transaction is broadcasted to an Injective Chain node.</li>
<li>The transaction is then added to the mempool and becomes included in a block. More details on this process can be found <a href="https://docs.cosmos.network/master/basics/tx-lifecycle.html">here</a>.</li>
<li>The handler for each respective message is run. During handler execution, order cancel and liquidation messages are processed immediately, whereas order creation messages are added to a queue.</li>
<li>At the end of the block, the batch auction process for order matching begins.

<ul>
<li>First, the queued market orders are executed against the resting orderbook (which does NOT include the new orders from the current block) and are cleared at a uniform clearing price.</li>
<li>Second, the queued limit orders are matched against each other and the resting orderbook to result in an uncrossed orderbook. Limit orders created in that block are cleared at a uniform clearing price while resting limit orders created in previous blocks are cleared at an equal or better price than their limit order price.</li>
</ul></li>
<li>The funds are settled accordingly, with positions being created for derivative trades and assets being swapped for spot trades.</li>
<li>Events containing the trade and settlement information are emitted by the Chain.</li>
<li>The Injective Exchange API backend indexes the events and pushes updates to all subscribed traders.</li>
</ol>
<h2 id='overview-key-differences-to-cex'>Key Differences To CEX</h2>
<ul>
<li>All information is public which includes things like untriggered Stop/Take orders or pending orders in the mempool.</li>
<li>The data stored on-chain is minimal for performance reasons and reflects only the current state, relayers provide additional historical data as well as a user interface for traders through the Injective Exchange API backend.</li>
<li>Usually a DEX has front-running issues, but those are mitigated at Injective through fast block times and FBA.</li>
<li>The order of execution is different. Any new exchange action is a new transaction and is not executed immediately. Instead, it is added to a queue (mempool) and executed once the block is committed. At the time of the block commit, all included transactions happen more or less instantly. Firstly, code that is inside the handler is executed in the transaction sequence which is decided by the miner. This is not a problem since the sequence does not affect matching prices due to FBA and thus fairness is guaranteed.</li>
</ul>

<p>To summarize the sequence of state changes on the Injective Chain:</p>

<ol>
<li>Mempool: A queue of pending transactions.</li>
<li>BeginBlocker: Code that is executed at the beginning of every block. We use it for certain maintenance tasks (details can be found in the <a href="https://chain.injective.network/modules/exchange/">exchange module</a> documentation).</li>
<li>Handler: Code that is executed when a transaction is included in a block.</li>
<li>EndBlocker: Code that is executed at the end of every block. We use it to match orders, calculate funds changes and update the positions.</li>
</ol>
<h2 id='overview-comparison-to-cex'>Comparison to CEX</h2>
<p>When you submit an order to Injective Chain,</p>

<table><thead>
<tr>
<th style="text-align: center">Centralized Exchange (CEX)</th>
<th style="text-align: center">Decentralized Exchange (DEX)</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">Exchange Gateway</td>
<td style="text-align: center">Injective Chain Handler</td>
</tr>
<tr>
<td style="text-align: center">Exchange Matching Engine</td>
<td style="text-align: center">Injective Chain EndBlocker</td>
</tr>
<tr>
<td style="text-align: center">Exchange Trade Report</td>
<td style="text-align: center">Injective Chain EndBlocker</td>
</tr>
<tr>
<td style="text-align: center">Co-location</td>
<td style="text-align: center">Injective Node (Decentralized Validators)</td>
</tr>
</tbody></table>
<h2 id='overview-frequent-batch-auction-fba'>Frequent Batch Auction (FBA)</h2>
<p>The goal is to further prevent any <a href="https://www.investopedia.com/terms/f/frontrunning.asp">Front-Running</a> in a decentralized setting. Most DEX&#39;s suffer from this as all information is public and traders can collude with miners or pay high gas fees enabling them to front-run any trades. We mitigate this by fast block times combined with a Frequent Batch Auction:</p>

<p>In any given block:</p>

<ol>
<li>Calculate one uniform clearing price for all market orders and execute them. For an example for the market order matching in FBA fashion, look <a href="/#examples-market-order-matching">here</a>.</li>
<li>Limit orders are combined with the resting orderbook and orders are matched as long as there is still negative spread. The limit orders are all matched at one uniform clearing price. For an example for the limit order matching in FBA fashion, look <a href="#examples-limit-order-matching">here</a>.</li>
</ol>
<h2 id='overview-trading-fees-and-gas'>Trading Fees and Gas</h2>
<p>If you are a trader on existing centralized exchanges, you will be familiar with the concept of trading fees. Traders are charged a fee for each successful trade. However, for a DEX, there are additional gas costs that must be paid to the network. And luckily, the gas fee from trading on Injective is very minimal.</p>

<ul>
<li>If you are a trader using a DEX UI, you don&#39;t need to worry about the gas costs, because the relayer will pay them for you. But in return you will be paying the trading fee in full.</li>
<li>If you are using the API, then you will need to pay the gas costs.

<ul>
<li>The gas costs are currently very small. 20K transactions will cost about 1 INJ.</li>
<li>You can set the recipient_fee to any of your own wallet addresses since you are in essence your own relayer saving you about 40% of all fees.</li>
</ul></li>
</ul>
<h2 id='overview-mark-price-margin-requirement'>Mark Price Margin Requirement</h2><div class="highlight"><pre class="highlight plaintext"><code>Quantity = 2 BTC, InitialMarginRatio = 0.05
MarkPrice = $45,000, EntryPrice = $43,000

Margin ≥ 2 * 0.05 * $45,000 = $4,500

MarginLong ≥ max(2 * (0.05 * $45,000 - ($45,000 - $43,000)), $4,500)
MarginLong ≥ max($500, $4,500) = $4,500

MarginShort ≥ max(2 * (0.05 * $45,000 - ($43,000 - $45,000)), $4,500)
MarginShort ≥ max($8,500, $4,500) = $8,500

So in this case if the trader wanted to create a short position with
an entry price which essentially starts at a loss of $2,000 as
unrealized PNL, he would need to post at a minimum $8,500 as margin,
rather than the usual required $4,500.
</code></pre></div>
<p>You might be familiar with margin requirements on Centralized Exchanges. When creating a new position, it must fulfill the following requirement:</p>

<ul>
<li><code>Margin &gt;= InitialMarginRatio * Quantity * EntryPrice</code></li>
</ul>

<p>For example in a market with maximally 20x leverage, your initial margin must be at least 0.05 of the order&#39;s notional (<code>entryPrice * quantity</code>). On Injective additionally the margin must also fulfill the following mark price requirement:</p>

<ul>
<li><code>Margin &gt;= Quantity * (InitialMarginRatio * MarkPrice - PNL)</code></li>
</ul>

<p>where <code>PNL</code> is the expected profit and loss of the position if it was closed at the MarkPrice.</p>
<h2 id='overview-liquidations'>Liquidations</h2><div class="highlight"><pre class="highlight plaintext"><code>Long Position:
Quantity = 1 BTC, MaintenanceMarginRatio = 0.05
EntryPrice = $50,000, Margin = $5,000

Now the MarkPrice drops down to $47,300
which is below the liquidation price of $47,500.

The position is auto-closed via reduce-only order:

Sell order:
Quantity = 1 BTC, Price = $0, Margin = $0

Assuming it gets matched with a clearing price of 47,100:

Liquidation Payout = Position Margin + PNL = $5,000 - $2,900 = $2,100
Liquidator Profit = $2,100 * 0.5 = $1,050
Insurance Fund Profit = $2,100 * 0.5 = $1,050
</code></pre></div>
<p>When your position falls below the maintenance margin ratio, the position can and likely will be liquidated by anyone running the liquidator bot. You will loose your entire position and all funds remaining in the position. What happens on-chain is that automatically a reduce-only market order of the same size as the position is created. The market order will have a worst price defined as <em>Infinity</em> or <em>0</em>, implying it will be matched at whatever prices are available in the order book.</p>

<p>One key difference is that the payout from executing the reduce-only market order will not go towards the position owner. Instead, half of the remaining funds are transferred to the liquidator bot and the other half is transferred to the insurance fund.</p>

<p>If the payout in the position was negative, i.e., the position&#39;s negative PNL was greater than its margin, then the insurance fund will cover the missing funds.</p>

<p>Also note that liquidations are executed immediately in a block before any other order matching occurs.</p>
<h2 id='overview-fee-discounts'>Fee Discounts</h2>
<p>Fee discounts are enabled by looking at the past trailing 30 day window. So long as you meet both conditions for a tier (past fees paid <strong>AND</strong> staked amount), you will receive the respective discounts.</p>

<ul>
<li>Note that there is a caching mechanism in place which can take up to one day to before being updated with a new tier.</li>
<li>Negative maker fee markets are not eligible for discounts.</li>
<li>If the fee discount proposal was passed less than 30 days ago, the fee paid requirement is ignored so we don&#39;t unfairly penalize people who onboard immediately.</li>
</ul>
<h2 id='overview-funding-rate'>Funding Rate</h2>
<p>The hourly funding rate on perpetual markets determines the percentage that traders on one side have to pay to the other side each hour. If the rate is positive, longs are paying shorts. If the rate is negative shorts are paying longs. The further trade prices within that hour deviated from the mark price, the higher the funding rate will be up to a maximum of 0.0625% (1.5% per day).</p>
<h2 id='overview-closing-a-position'>Closing a Position</h2><div class="highlight"><pre class="highlight plaintext"><code>Suppose you have an open position:

- Direction = Long
- Margin = $5,000
- EntryPrice = $50,000
- Quantity = 0.5 BTC

You create a new vanilla order for

- Direction = Sell
- Margin = $10,000
- Price = $35,000
- Quantity = 0.75 BTC

which is getting fully matched. First, the position is fully closed:

- OrderMarginUsedForClosing = OrderMargin * CloseQuantity / OrderQuantity
- OrderMarginUsedForClosing = $10,000 * 0.5 / 0.75 = $6,667

The proportional closing order margin is then used for the payout:

- Payout = PNL + PositionMargin + OrderMarginUsedForClosing
- Payout = ($35,000-$50,000) * 0.5 + $5,000 + $6,667 = $4,167

And a new position is opened in the opposite direction:

- Direction = Short
- Margin = $3,333
- Price = $35,000
- Quantity = 0.25 BTC
</code></pre></div>
<p>There are two ways to close a position:</p>
<h3 id='overview-closing-a-position-closing-via-reduce-only-order'>Closing via Reduce-Only Order</h3>
<p>When you close a position vis a reduce-only order, no additional margin is used from the order. All reduce-only orders have a margin of zero. In addition, reduce-only orders are only used to close positions, not to open new ones.</p>
<h3 id='overview-closing-a-position-closing-via-vanilla-order'>Closing via Vanilla Order</h3>
<p>You can also close a position via vanilla orders. When a sell vanilla order is getting matched while you have an open Long position, the position will be closed at the price of the sell order. Depending on the size of the order and position, the position may be either</p>

<ol>
<li>partially closed</li>
<li>fully closed</li>
<li>or fully closed with subsequent opening of a new position in the opposite direction.</li>
</ol>

<p>Note that how the margin inside the order is used depends on which of the three scenarios you are in. If you close a position via vanilla order, the margin is only used to cover PNL payouts, <strong>not to go into the position</strong>. If the order subsequently opens a new position in the opposite direction (scenario 3), the remaining proportional margin will go towards the new position.</p>
<h2 id='overview-trading-rewards'>Trading Rewards</h2><div class="highlight"><pre class="highlight plaintext"><code>Assume you have a trading rewards campaign with 100 INJ as rewards:

Reward Tokens: 100 INJ
Trader Reward Points = 100
Total Reward Points = 1,000

Trader Rewards = Trader Reward Points / Total Reward Points * Reward Tokens
Trader Rewards = 100 / 1,000 * 100 INJ = 10 INJ
</code></pre></div>
<p>During a given campaign, the exchange will record each trader&#39;s cumulative trading reward points obtained from trading fees (with boosts applied, if applicable) from all eligible markets. At the end of each campaign each trader will receive a pro-rata percentage of the trading rewards pool based off their trading rewards points from that campaign epoch. Those rewards will be <strong>automatically deposited</strong> into the trader&#39;s respective wallets, it&#39;s not necessary to manually withdraw them.</p>
<h2 id='overview-reduce-only-order-precedence'>Reduce-Only Order Precedence</h2>
<p>Imagine a trader has a the following position:</p>

<ul>
<li><strong>LONG</strong>: <code>1 BTC</code> with EntryPrice of $59,000</li>
</ul>

<p>And the following <strong>SELL</strong> orders:</p>

<table><thead>
<tr>
<th style="text-align: center">Buy Price</th>
<th style="text-align: center">Quantity</th>
<th style="text-align: center">Order Type</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">$66,500</td>
<td style="text-align: center">0.2 BTC</td>
<td style="text-align: center">Vanilla</td>
</tr>
<tr>
<td style="text-align: center">$65,500</td>
<td style="text-align: center">0.2 BTC</td>
<td style="text-align: center">Reduce-only</td>
</tr>
<tr>
<td style="text-align: center">$64,500</td>
<td style="text-align: center">0.3 BTC</td>
<td style="text-align: center">Vanilla</td>
</tr>
<tr>
<td style="text-align: center">$63,500</td>
<td style="text-align: center">0.1 BTC</td>
<td style="text-align: center">Reduce-only</td>
</tr>
</tbody></table>

<p>This has some implications when placing new orders.</p>
<h3 id='overview-reduce-only-order-precedence-upon-placing-a-reduce-only-order'>Upon placing a reduce-only order</h3>
<ul>
<li>If any reduce-only orders would be invalid after executing all of the trader&#39;s other limit sell orders that have better prices in the same direction.</li>
</ul>

<p>In our example, consider a new reduce-only order of <code>0.4 BTC</code> at <code>$64,600</code>.</p>

<table><thead>
<tr>
<th style="text-align: center">Sell Price</th>
<th style="text-align: center">Quantity</th>
<th style="text-align: center">Order Type</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">$66,500</td>
<td style="text-align: center">0.2 BTC</td>
<td style="text-align: center">Vanilla</td>
</tr>
<tr>
<td style="text-align: center">$65,500</td>
<td style="text-align: center">0.2 BTC</td>
<td style="text-align: center">Reduce-only</td>
</tr>
<tr>
<td style="text-align: center"><strong>$64,600</strong></td>
<td style="text-align: center"><strong>0.4 BTC</strong></td>
<td style="text-align: center"><strong>Reduce-only</strong></td>
</tr>
<tr>
<td style="text-align: center">$64,500</td>
<td style="text-align: center">0.3 BTC</td>
<td style="text-align: center">Vanilla</td>
</tr>
<tr>
<td style="text-align: center">$63,500</td>
<td style="text-align: center">0.1 BTC</td>
<td style="text-align: center">Reduce-only</td>
</tr>
</tbody></table>

<p>This is perfectly valid and no further action is required. But what if the order was for <code>0.5 BTC</code> instead?</p>

<table><thead>
<tr>
<th style="text-align: center">Sell Price</th>
<th style="text-align: center">Quantity</th>
<th style="text-align: center">Order Type</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">$66,500</td>
<td style="text-align: center">0.2 BTC</td>
<td style="text-align: center">Vanilla</td>
</tr>
<tr>
<td style="text-align: center">$65,500</td>
<td style="text-align: center">0.2 BTC</td>
<td style="text-align: center">Reduce-only</td>
</tr>
<tr>
<td style="text-align: center"><strong>$64,600</strong></td>
<td style="text-align: center"><strong>0.5 BTC</strong></td>
<td style="text-align: center"><strong>Reduce-only</strong></td>
</tr>
<tr>
<td style="text-align: center">$64,500</td>
<td style="text-align: center">0.3 BTC</td>
<td style="text-align: center">Vanilla</td>
</tr>
<tr>
<td style="text-align: center">$63,500</td>
<td style="text-align: center">0.1 BTC</td>
<td style="text-align: center">Reduce-only</td>
</tr>
</tbody></table>

<p>If the orders are getting matched, once the last reduce-only of $65,500 with 0.2 BTC order is reached, the position will have been reduced to <code>1 BTC - 0.1 BTC - 0.3 BTC - 0.5 BTC = 0.1 BTC</code>. A reduce-only order of 0.2 BTC after that will thus be invalid.</p>

<p>To prevent that, we simply <strong>reject the creation of the new 0.5 BTC reduce-only order</strong>. In other words any reduce-only order can never be larger than the expected position&#39;s quantity at the time of matching.</p>
<h3 id='overview-reduce-only-order-precedence-upon-placing-a-vanilla-limit-order'>Upon placing a vanilla limit order</h3>
<ul>
<li>If any reduce-only limit orders would be invalidated when all the orders up to and including the new vanilla limit order were filled.</li>
</ul>

<p>In our example, consider a new vanilla order of <code>0.4 BTC</code> at <code>$64,600</code>.</p>

<table><thead>
<tr>
<th style="text-align: center">Sell Price</th>
<th style="text-align: center">Quantity</th>
<th style="text-align: center">Order Type</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">$66,500</td>
<td style="text-align: center">0.2 BTC</td>
<td style="text-align: center">Vanilla</td>
</tr>
<tr>
<td style="text-align: center">$65,500</td>
<td style="text-align: center">0.2 BTC</td>
<td style="text-align: center">Reduce-only</td>
</tr>
<tr>
<td style="text-align: center"><strong>$64,600</strong></td>
<td style="text-align: center"><strong>0.4 BTC</strong></td>
<td style="text-align: center"><strong>Vanilla</strong></td>
</tr>
<tr>
<td style="text-align: center">$64,500</td>
<td style="text-align: center">0.3 BTC</td>
<td style="text-align: center">Vanilla</td>
</tr>
<tr>
<td style="text-align: center">$63,500</td>
<td style="text-align: center">0.1 BTC</td>
<td style="text-align: center">Reduce-only</td>
</tr>
</tbody></table>

<p>Again this perfectly valid and no further action is required. But what if the order was for <code>0.5 BTC</code> instead?</p>

<table><thead>
<tr>
<th style="text-align: center">Sell Price</th>
<th style="text-align: center">Quantity</th>
<th style="text-align: center">Order Type</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">$66,500</td>
<td style="text-align: center">0.2 BTC</td>
<td style="text-align: center">Vanilla</td>
</tr>
<tr>
<td style="text-align: center">$65,500</td>
<td style="text-align: center">0.2 BTC</td>
<td style="text-align: center">Reduce-only</td>
</tr>
<tr>
<td style="text-align: center"><strong>$64,600</strong></td>
<td style="text-align: center"><strong>0.5 BTC</strong></td>
<td style="text-align: center"><strong>Vanilla</strong></td>
</tr>
<tr>
<td style="text-align: center">$64,500</td>
<td style="text-align: center">0.3 BTC</td>
<td style="text-align: center">Vanilla</td>
</tr>
<tr>
<td style="text-align: center">$63,500</td>
<td style="text-align: center">0.1 BTC</td>
<td style="text-align: center">Reduce-only</td>
</tr>
</tbody></table>

<p>If the orders are getting matched, once the last reduce-only of $65,500 with 0.2 BTC order is reached, the position will have been reduced to <code>1 BTC - 0.1 BTC - 0.3 BTC - 0.5 BTC = 0.1 BTC</code>. A reduce-only order of 0.2 BTC after that will thus be invalid.</p>

<p>To prevent that, we simply <strong>cancel the existing 0.2 BTC reduce-only order</strong>. In other words new vanilla limit orders can invalidate and auto-cancel existing reduce-only limit orders.</p>
<h1 id='examples'>Examples</h1><h2 id='examples-adding-a-spot-market-buy-order'>Adding a Spot Market Buy Order</h2>
<ul>
<li><code>Maker Fee = 0.1%</code></li>
<li><code>Taker Fee = 0.2%</code></li>
<li><p>Market Buy Order:</p>

<ul>
<li><code>Quantity = 1 ETH</code></li>
<li><code>Worst Price = 3,000 USDT</code></li>
</ul></li>
</ul>

<p>→ The account&#39;s available balance is decremented by <code>3,000 USDT + Taker Fee = 3,006 USDT</code>.</p>

<p>Upon matching with a resting sell order with price of <code>2,000 USDT</code> the new account balances are calculated as:</p>

<ul>
<li><code>Trading Fee = 1 * 2,000 * 0.002 = 4 USDT</code></li>
<li><code>Credit Amount = 1 ETH</code></li>
<li><code>Debit Amount = 1 * 2,000 + 4 = 2,004 USDT</code></li>
<li><code>Clearing Refund = 3,006 - 2,004 = 1,002 USDT</code></li>
</ul>
<h2 id='examples-adding-a-spot-market-sell-order'>Adding a Spot Market Sell Order</h2>
<ul>
<li><code>Maker Fee = 0.1%</code></li>
<li><code>Taker Fee = 0.2%</code></li>
<li><p>Market Sell Order:</p>

<ul>
<li><code>Quantity = 1 ETH</code></li>
<li><code>Worst Price = 1,500 USDT</code></li>
</ul></li>
</ul>

<p>→ The account&#39;s available balance is decremented by <code>1 ETH</code>.</p>

<p>Upon matching the with a resting sell order with price of <code>2,000 USDT</code> new account balances are calculated as:</p>

<ul>
<li><code>Trading Fee = 1 * 2,000 * 0.002 = 4 USDT</code></li>
<li><code>Debit Amount = 1 ETH</code></li>
<li><code>Credit Amount = 1 * 2,000 - 4 = 1,996 USDT</code></li>
<li><code>Clearing Refund = 0</code></li>
</ul>
<h2 id='examples-adding-a-spot-limit-buy-order'>Adding a Spot Limit Buy Order</h2>
<ul>
<li><code>Maker Fee = 0.1%</code></li>
<li><code>Taker Fee = 0.2%</code></li>
<li><p>Market Buy Order:</p>

<ul>
<li><code>Quantity = 1 ETH</code></li>
<li><code>Price = 2,000 USDT</code></li>
</ul></li>
</ul>

<p>→ The account&#39;s available balance is decremented by <code>2,000 USDT + Taker Fee = 2,004 USDT</code>.</p>

<p>After creation:</p>

<p>If <strong>Unmatched</strong>, the order becomes a resting limit order (maker) and we refund the fee difference between maker and taker:</p>

<ul>
<li><code>Fee Refund = 1 * 2,000 * (0.002 - 0.001) = 2 USDT</code></li>
</ul>

<p>If <strong>Matched Immediately</strong>: (assuming an FBA clearing price of 1,900 USDT)</p>

<ul>
<li><code>Trading Fee = 1 * 1,900 * 0.002 = 3.8 USDT</code></li>
<li><code>Credit Amount = 1 ETH</code></li>
<li><code>Debit Amount = 1 * 1,900 + 3.8 = 1,903.8 USDT</code></li>
<li><code>Clearing Refund = (1 + 0.002) * (2,000 - 1,900) = 100.2 USDT</code></li>
<li><code>Unmatched Fee Refund = 0 USDT</code></li>
</ul>

<p>If <strong>Filled Later By Market Order</strong>:</p>

<ul>
<li><code>Trading Fee = 1 * 2,000 * 0.001 = 2 USDT</code></li>
<li><code>Credit Amount (in base asset) = 1 ETH</code></li>
<li><code>Debit Amount (in quote asset) = 1 * 2,000 + 2 = 2,002 USDT</code></li>
</ul>
<h2 id='examples-adding-a-spot-limit-sell-order'>Adding a Spot Limit Sell Order</h2>
<ul>
<li><code>Maker Fee = 0.1%</code></li>
<li><code>Taker Fee = 0.2%</code></li>
<li><p>Market Sell Order:</p>

<ul>
<li><code>Quantity = 1 ETH</code></li>
<li><code>Price = 2,000 USDT</code></li>
</ul></li>
</ul>

<p>→ The account&#39;s available balance is decremented by <code>1 ETH</code>.</p>

<p>After creation:</p>

<p>If <strong>Unmatched</strong>, the order becomes a resting limit order (maker) and we refund the fee difference between maker and taker:</p>

<ul>
<li><code>Fee Refund = 0 ETH</code></li>
</ul>

<p>If <strong>Matched Immediately</strong>: (assuming an FBA clearing price of 2,100 USDT)</p>

<ul>
<li><code>Trading Fee = 1 * 2,100 * 0.002 = 4.2 USDT</code></li>
<li><code>Credit Amount = 1 * 2,100 * (1 - 0.002) = 2,095.8 USDT</code></li>
<li><code>Debit Amount = 1 ETH</code></li>
<li><code>Clearing Refund = 0 ETH</code></li>
<li><code>Fee Refund = 0 USDT</code></li>
</ul>

<p>If <strong>Filled Later By Market Order</strong>:</p>

<ul>
<li><code>Credit Amount (in quote asset) = 1 * 2,000 - 2 = 1,998 USDT</code></li>
<li><code>Debit Amount (in base asset) = 1 ETH</code></li>
<li><code>Trading Fee = 1 * 2,000 * 0.001 = 2 USDT</code></li>
</ul>
<h2 id='examples-derivative-market-order-payouts'>Derivative Market Order Payouts</h2>
<p>The payouts for derivative market orders work the same way as for derivative limit orders with the one difference that they are cancelled if not immediately matched, see spot market and derivative limit orders as reference.</p>
<h2 id='examples-adding-a-derivative-limit-buy-order'>Adding a Derivative Limit Buy Order</h2>
<ul>
<li><code>Quantity = 1</code>, <code>Price = 2,000</code>, <code>Margin = 200</code></li>
<li><code>TakerFeeRate = 0.002</code></li>
<li><code>MakerFeeRate = 0.001</code></li>
</ul>

<p>→ The account&#39;s available balance is decremented by <code>Margin + Taker Fee = 200 + 2000*0.002 = 204 USDT</code>.</p>

<p>After creation:</p>

<p>If <strong>Unmatched</strong>, the order becomes a resting limit order (maker) and we refund the fee difference between maker and taker for vanilla orders (reduce-only orders don&#39;t pay upfront fees):</p>

<ul>
<li><code>Fee Refund = Quantity * Price * (TakerFeeRate - MakerFeeRate) = 1 * 2,000 * (0.002 - 0.001) = 2 USDT</code></li>
<li><code>AvailableBalance = AvailableBalance + Fee Refund = 0 + 2 = 2</code></li>
</ul>

<p><strong>If Matched:</strong></p>

<p>Assuming:</p>

<ul>
<li>an FBA clearing price of 1,990 USDT</li>
<li><p>an existing <code>SHORT</code> position:</p>

<ul>
<li><code>Position Quantity = 0.5 ETH</code></li>
<li><code>Position Entry Price = 1,950 USDT</code></li>
<li><code>Position Margin = 400 USDT</code></li>
</ul></li>
</ul>

<p>Would result in:</p>

<p><strong>1. Closing existing position with proportional order margin for closing</strong>:</p>

<ul>
<li><code>CloseExecutionMargin = ExecutionMargin * CloseQuantity / OrderQuantity = 200 * 0.5 / 1 = 100 USDT</code></li>
<li><p><code>ClosingPayout = PNL + PositionMargin * CloseQuantity / PositionQuantity</code></p>

<ul>
<li><code>PNL = CloseQuantity * (FillPrice - EntryPrice) = 0.5 * (1,990 - 1,950) = 20 USDT</code></li>
<li><code>ClosingPayout = 20 + 400 * 0.5 / 0.5 = 420 USDT</code></li>
</ul></li>
</ul>

<p><strong>2. Opening new position in opposite direction</strong>:</p>

<ul>
<li><p>a new <code>LONG</code> position:</p>

<ul>
<li><code>Position Quantity = 0.5 ETH</code></li>
<li><code>Position Entry Price = 2,000 USDT</code></li>
<li><code>Position Margin = 100 USDT</code></li>
</ul></li>
</ul>

<p><strong>3. Refunding fee difference from order price vs. clearing price</strong>:</p>

<ul>
<li><code>PriceDelta = Price - ClearingPrice = 2,000 - 1,990 = 10</code></li>
<li><code>ClearingFeeRefund = FillQuantity * PriceDelta * TakerFeeRate = 1 * 10 * 0.002 = 0.002 USDT</code> (in the case of matching a sell order, this would have been a charge, not a refund)</li>
</ul>
<h2 id='examples-market-order-matching'>Market Order Matching</h2><h3 id='examples-market-order-matching-existing-orderbook'>Existing Orderbook</h3>
<table><thead>
<tr>
<th>Sells</th>
<th>Buys</th>
</tr>
</thead><tbody>
<tr>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,390</td><td>0.3 BTC</td></tr><tr><td>$64,370</td><td>0.2 BTC</td></tr><tr><td>$64,360</td><td>0.5 BTC</td></tr> </table></td>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,210</td><td>0.1 BTC</td></tr><tr><td>$64,205</td><td>0.4 BTC</td></tr><tr><td>$64,200</td><td>0.2 BTC</td></tr> </table></td>
</tr>
</tbody></table>
<h3 id='examples-market-order-matching-new-orders'>New Orders</h3>
<ul>
<li>1x market buy order for 0.2 BTC with worst price 64,360</li>
<li>1x market buy order for 0.4 BTC with worst price 66,000</li>
<li>1x market sell order for 0.1 BTC with worst price 60,000</li>
<li>1x market sell order for 0.2 BTC with worst price 61,000</li>
<li>1x market sell order for 0.3 BTC with worst price 69,000</li>
</ul>
<h3 id='examples-market-order-matching-resulting-orderbook'>Resulting Orderbook</h3>
<table><thead>
<tr>
<th>Sells</th>
<th>Buys</th>
</tr>
</thead><tbody>
<tr>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,390</td><td>0.3 BTC</td></tr><tr><td>$64,370</td><td>0.2 BTC</td></tr></table></td>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,205</td><td>0.2 BTC</td></tr><tr><td>$64,200</td><td>0.2 BTC</td></tr> </table></td>
</tr>
</tbody></table>

<p><strong>Market Buys</strong>: Matching the highest priced market buy order first for 0.4 BTC. Now for the second market buy order only 0.1 BTC is left at matchable price, meaning the other 0.1 BTC in the order will be cancelled. Both orders will be matched with the single resting limit order at a price of 64,360 for a total quantity of 0.5 BTC.</p>

<p><strong>Market Sells</strong>: Matching the first two market sell orders for at a matching price of <code>(64,210*0.1 + 64,205*0.2) / 0.3 = 64,206.67</code> for a total quantity of 0.3 BTC. The resting limit orders are both matched at their specified price points of 64,210 and 64,205. Since the last market sell order of 69,000 cannot be fulfilled, it is cancelled.</p>
<h2 id='examples-limit-order-matching'>Limit Order Matching</h2><h3 id='examples-limit-order-matching-existing-orderbook'>Existing Orderbook</h3>
<table><thead>
<tr>
<th>Sells</th>
<th>Buys</th>
</tr>
</thead><tbody>
<tr>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,390</td><td>0.3 BTC</td></tr><tr><td>$64,370</td><td>0.2 BTC</td></tr><tr><td>$64,360</td><td>0.5 BTC</td></tr> </table></td>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,210</td><td>0.1 BTC</td></tr><tr><td>$64,205</td><td>0.3 BTC</td></tr><tr><td>$64,200</td><td>0.2 BTC</td></tr> </table></td>
</tr>
</tbody></table>
<h3 id='examples-limit-order-matching-new-orders'>New Orders</h3>
<table><thead>
<tr>
<th>Sells</th>
<th>Buys</th>
</tr>
</thead><tbody>
<tr>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,200</td><td>0.1 BTC</td></tr><tr><td>$64,180</td><td>0.2 BTC</td></tr> </table></td>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,370</td><td>0.4 BTC</td></tr><tr><td>$64,360</td><td>0.2 BTC</td></tr> </table></td>
</tr>
</tbody></table>
<h3 id='examples-limit-order-matching-matching-orders'>Matching Orders</h3>
<p>All new orders are incorporated into the existing orderbook. In our case this results in a negative spread:</p>

<table><thead>
<tr>
<th>Sells</th>
<th>Buys</th>
</tr>
</thead><tbody>
<tr>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,390</td><td>0.3 BTC</td></tr><tr><td>$64,370</td><td>0.2 BTC</td></tr><tr><td>$64,360</td><td>0.5 BTC</td></tr><tr><td>$64,200</td><td>0.1 BTC</td></tr><tr><td>$64,180</td><td>0.2 BTC</td></tr> </table></td>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,370</td><td>0.4 BTC</td></tr><tr><td>$64,360</td><td>0.1 BTC</td></tr><tr><td>$64,210</td><td>0.1 BTC</td></tr><tr><td>$64,205</td><td>0.3 BTC</td></tr><tr><td>$64,200</td><td>0.2 BTC</td></tr> </table></td>
</tr>
</tbody></table>

<p>As long as negative spread exists, orders are matched against each other. The first buy order is fully matched:</p>

<table><thead>
<tr>
<th>Sells</th>
<th>Buys</th>
</tr>
</thead><tbody>
<tr>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,390</td><td>0.3 BTC</td></tr><tr><td>$64,370</td><td>0.2 BTC</td></tr><tr><td>$64,360</td><td>0.4 BTC</td></tr> </table></td>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,360</td><td>0.1 BTC</td></tr><tr><td>$64,210</td><td>0.1 BTC</td></tr><tr><td>$64,205</td><td>0.3 BTC</td></tr><tr><td>$64,200</td><td>0.2 BTC</td></tr> </table></td>
</tr>
</tbody></table>

<p>Now the second buy order can still be fully matched:</p>

<table><thead>
<tr>
<th>Sells</th>
<th>Buys</th>
</tr>
</thead><tbody>
<tr>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,390</td><td>0.3 BTC</td></tr><tr><td>$64,370</td><td>0.2 BTC</td></tr><tr><td>$64,360</td><td>0.3 BTC</td></tr> </table></td>
<td><table> <tr><th>Price</th><th>Quantity</th></tr><tr><td>$64,210</td><td>0.1 BTC</td></tr><tr><td>$64,205</td><td>0.3 BTC</td></tr><tr><td>$64,200</td><td>0.2 BTC</td></tr> </table></td>
</tr>
</tbody></table>

<p>This is the end of the matching, since no more negative spread exists (<code>64,360 &gt; 62,210</code>).</p>

<p>All orders will be matched with a clearing price of</p>

<ul>
<li><code>(64,180*0.2 + 64,200*0.1 + 64,360*0.2 + 64,370*0.4 + 64,360*0.1) / (0.5*2) = 64,312</code></li>
</ul>

<p>for a total quantity of 0.5 BTC. In edge cases where this clearing price violates any order price, it is instead calculated as the average of the last matched order on buy and sell side.</p>
<h1 id='swagger'>Swagger</h1>
<p><strong>A REST interface for state queries, legacy transactions</strong></p>

<p><a href="https://lcd.injective.network/swagger/#/">Swagger Mainnet</a></p>

<p><a href="https://testnet.lcd.injective.dev/swagger/#/">Swagger Testnet</a></p>
<h1 id='explorer'>Explorer</h1>
<p><strong>A Web interface that allows you to search for information on the Injective Chain</strong></p>

<p><a href="https://explorer.injective.network/">Explorer Mainnet</a></p>

<p><a href="https://testnet.explorer.injective.dev/">Explorer Testnet</a></p>
<h1 id='faucet'>Faucet</h1>
<p><strong>A web-based service that provides free tokens to users on testnet and allows them to experiment on the Injective Chain.</strong></p>

<p><a href="https://faucet.injective.network/">Faucet</a></p>
<h1 id='exchange-api'>Exchange API</h1><h1 id='injectiveaccountsrpc'>- InjectiveAccountsRPC</h1>
<p>InjectiveAccountsRPC defines the gRPC API of the Exchange Accounts provider.</p>
<h2 id='injectiveaccountsrpc-subaccountslist'>SubaccountsList</h2>
<p>Get a list of subaccounts for a specific address.</p>
<h3 id='injectiveaccountsrpc-subaccountslist-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">account_address</span> <span class="o">=</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="n">subacc_list</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_subaccount_list</span><span class="p">(</span><span class="n">account_address</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">subacc_list</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">accountAddress</span> <span class="o">:=</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSubaccountsList</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">accountAddress</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>account_address</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectiveaccountsrpc-subaccountslist-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"subaccounts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"0x90f8bf6a479f320ead074411a4b0e7944ea8c9c1000000000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"0x90f8bf6a479f320ead074411a4b0e7944ea8c9c1000000000000000000000001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"0x90f8bf6a479f320ead074411a4b0e7944ea8c9c1000000000000000000000002"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>subaccounts</td>
<td>array</td>
<td></td>
</tr>
</tbody></table>
<h2 id='injectiveaccountsrpc-subaccounthistory'>SubaccountHistory</h2>
<p>Get the subaccount&#39;s transfer history.</p>
<h3 id='injectiveaccountsrpc-subaccounthistory-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">subaccount</span> <span class="o">=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
    <span class="n">denom</span> <span class="o">=</span> <span class="s">"inj"</span>
    <span class="n">transfer_types</span> <span class="o">=</span> <span class="p">[</span><span class="s">"withdraw"</span><span class="p">,</span> <span class="s">"deposit"</span><span class="p">]</span> <span class="c1"># Enum with values "withdraw", "deposit", "internal", "external"
</span>    <span class="n">subacc_history</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_subaccount_history</span><span class="p">(</span><span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount</span><span class="p">,</span> <span class="n">denom</span><span class="o">=</span><span class="n">denom</span><span class="p">,</span> <span class="n">transfer_types</span><span class="o">=</span><span class="n">transfer_types</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">subacc_history</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code>
<span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">accountPB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/accounts_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">denom</span> <span class="o">:=</span> <span class="s">"inj"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
  <span class="n">transferTypes</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"deposit"</span><span class="p">}</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">accountPB</span><span class="o">.</span><span class="n">SubaccountHistoryRequest</span><span class="p">{</span>
    <span class="n">Denom</span><span class="o">:</span>         <span class="n">denom</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span>  <span class="n">subaccountId</span><span class="p">,</span>
    <span class="n">TransferTypes</span><span class="o">:</span> <span class="n">transferTypes</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSubaccountHistory</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>Yes</td>
</tr>
<tr>
<td>denom</td>
<td>string</td>
<td>Filter by denom</td>
<td>No</td>
</tr>
<tr>
<td>transfer_types</td>
<td>array</td>
<td>Filter by transfer types</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectiveaccountsrpc-subaccounthistory-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"transfers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"transfer_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"withdraw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"src_subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dst_account_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50000000000000000000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"executed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633006684272</span><span class="w">
</span><span class="p">},</span><span class="w">

</span><span class="nl">"transfers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"transfer_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"withdraw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"src_subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dst_account_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"executed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633011955869</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transfers</td>
<td>SubaccountBalanceTransfer</td>
<td>Array of SubaccountBalanceTransfer</td>
</tr>
</tbody></table>

<p><strong>SubaccountBalanceTransfer</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>CosmosCoin</td>
<td>Array of CosmosCoin</td>
</tr>
<tr>
<td>dst_account_address</td>
<td>string</td>
<td>Account address of the receiving side</td>
</tr>
<tr>
<td>executed_at</td>
<td>integer</td>
<td>Timestamp of the transfer in UNIX millis</td>
</tr>
<tr>
<td>src_subaccount_id</td>
<td>string</td>
<td>Subaccount ID of the sending side</td>
</tr>
<tr>
<td>transfer_type</td>
<td>string</td>
<td>Type of the subaccount balance transfer (Should be one of: [internal external withdraw deposit])</td>
</tr>
</tbody></table>

<p><strong>CosmosCoin</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>string</td>
<td>Coin amount</td>
</tr>
<tr>
<td>denom</td>
<td>string</td>
<td>Coin denominator</td>
</tr>
</tbody></table>
<h2 id='injectiveaccountsrpc-subaccountbalance'>SubaccountBalance</h2>
<p>Get the balance of a subaccount for a specific denom.</p>
<h3 id='injectiveaccountsrpc-subaccountbalance-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
    <span class="n">denom</span> <span class="o">=</span> <span class="s">"inj"</span>
    <span class="n">balance</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_subaccount_balance</span><span class="p">(</span><span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span> <span class="n">denom</span><span class="o">=</span><span class="n">denom</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">balance</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
  <span class="n">denom</span> <span class="o">:=</span> <span class="s">"inj"</span>
  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSubaccountBalance</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">subaccountId</span><span class="p">,</span> <span class="n">denom</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight typescript"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">getNetworkInfo</span><span class="p">,</span> <span class="nx">Network</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@injectivelabs/networks</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ExchangeClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@injectivelabs/sdk-ts</span><span class="dl">"</span><span class="p">;</span>

<span class="cm">/** Fetching subaccount balance for a particular denom */</span>
<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">getNetworkInfo</span><span class="p">(</span><span class="nx">Network</span><span class="p">.</span><span class="nx">Testnet</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">subaccountId</span> <span class="o">=</span>
    <span class="dl">"</span><span class="s2">0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000</span><span class="dl">"</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">denom</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">inj</span><span class="dl">"</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">exchangeClient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ExchangeClient</span><span class="p">.</span><span class="nx">ExchangeGrpcClient</span><span class="p">(</span>
    <span class="nx">network</span><span class="p">.</span><span class="nx">exchangeApi</span>
  <span class="p">);</span>
  <span class="kd">const</span> <span class="nx">subaccountBalance</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">exchangeClient</span><span class="p">.</span><span class="nx">accountApi</span><span class="p">.</span><span class="nx">subaccountBalance</span><span class="p">(</span>
    <span class="nx">subaccountId</span><span class="p">,</span>
    <span class="nx">denom</span>
  <span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">subaccountBalance</span><span class="p">.</span><span class="nx">toObject</span><span class="p">());</span>
<span class="p">})();</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>Yes</td>
</tr>
<tr>
<td>denom</td>
<td>string</td>
<td>Filter by denom</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectiveaccountsrpc-subaccountbalance-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x90f8bf6a479f320ead074411a4b0e7944ea8c9c1000000000000000000000002"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"account_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"deposit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1960000000000000000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>balance</td>
<td>SubaccountBalance</td>
<td>Array of SubaccountBalance</td>
</tr>
</tbody></table>

<p><strong>SubaccountBalance</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>denom</td>
<td>string</td>
<td>Coin denom on the chain</td>
</tr>
<tr>
<td>deposit</td>
<td>SubaccountDeposit</td>
<td>Array of SubaccountDeposit</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
</tr>
<tr>
<td>account_address</td>
<td>string</td>
<td>The Injective Chain address</td>
</tr>
</tbody></table>

<p><strong>SubaccountDeposit</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>available_balance</td>
<td>string</td>
<td>The available balance for a denom</td>
</tr>
<tr>
<td>total_balance</td>
<td>string</td>
<td>The total balance for a denom</td>
</tr>
</tbody></table>
<h2 id='injectiveaccountsrpc-subaccountbalanceslist'>SubaccountBalancesList</h2>
<p>List the subaccount&#39;s balances for all denoms.</p>
<h3 id='injectiveaccountsrpc-subaccountbalanceslist-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">subaccount</span> <span class="o">=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
    <span class="n">subacc_balances_list</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_subaccount_balances_list</span><span class="p">(</span><span class="n">subaccount</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">subacc_balances_list</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSubaccountBalancesList</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">subaccountId</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectiveaccountsrpc-subaccountbalanceslist-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"balances"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x90f8bf6a479f320ead074411a4b0e7944ea8c9c1000000000000000000000002"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"account_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"deposit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1960000000000000000"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x90f8bf6a479f320ead074411a4b0e7944ea8c9c1000000000000000000000002"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"account_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"deposit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1960000000000000000"</span><span class="w">
      </span><span class="p">},</span><span class="w"> 
    </span><span class="p">}</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x90f8bf6a479f320ead074411a4b0e7944ea8c9c1000000000000000000000002"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"account_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"deposit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1960000000000000000"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>balances</td>
<td>SubaccountBalance</td>
<td>Array of SubaccountBalance</td>
</tr>
</tbody></table>

<p><strong>SubaccountBalance</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_address</td>
<td>string</td>
<td>The Injective Chain address</td>
</tr>
<tr>
<td>denom</td>
<td>string</td>
<td>Coin denom on the chain</td>
</tr>
<tr>
<td>deposit</td>
<td>SubaccountDeposit</td>
<td>Array of SubaccountDeposit</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
</tr>
</tbody></table>

<p><strong>SubaccountDeposit</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>available_balance</td>
<td>string</td>
<td>The available balance for a denom</td>
</tr>
<tr>
<td>total_balance</td>
<td>string</td>
<td>The total balance for a denom</td>
</tr>
</tbody></table>
<h2 id='injectiveaccountsrpc-subaccountordersummary'>SubaccountOrderSummary</h2>
<p>Get the subaccount&#39;s orders summary.</p>
<h3 id='injectiveaccountsrpc-subaccountordersummary-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">subaccount</span> <span class="o">=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">order_direction</span> <span class="o">=</span> <span class="s">"buy"</span> <span class="c1">#buy or sell
</span>    <span class="n">subacc_order_summary</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_subaccount_order_summary</span><span class="p">(</span><span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount</span><span class="p">,</span> <span class="n">order_direction</span><span class="o">=</span><span class="n">order_direction</span><span class="p">,</span> <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">subacc_order_summary</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">accountPB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/accounts_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
  <span class="n">orderDirection</span> <span class="o">:=</span> <span class="s">"buy"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">accountPB</span><span class="o">.</span><span class="n">SubaccountOrderSummaryRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>       <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span>   <span class="n">subaccountId</span><span class="p">,</span>
    <span class="n">OrderDirection</span><span class="o">:</span> <span class="n">orderDirection</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSubaccountOrderSummary</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"spot orders:"</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">SpotOrdersTotal</span><span class="p">)</span>
  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"derivative orders:"</span><span class="p">,</span> <span class="n">res</span><span class="o">.</span><span class="n">DerivativeOrdersTotal</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>Yes</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>No</td>
</tr>
<tr>
<td>order_direction</td>
<td>string</td>
<td>Filter by the direction of the orders (Should be one of: [buy sell])</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectiveaccountsrpc-subaccountordersummary-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"derivative_orders_total"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"spot_orders_total"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>derivative_orders_total</td>
<td>integer</td>
<td>Total count of subaccount&#39;s derivative orders in a given market</td>
</tr>
<tr>
<td>spot_orders_total</td>
<td>integer</td>
<td>Total count of subaccount&#39;s spot orders in a given market</td>
</tr>
</tbody></table>
<h2 id='injectiveaccountsrpc-streamsubaccountbalance'>StreamSubaccountBalance</h2>
<p>Stream the subaccount&#39;s balance for all denoms.</p>
<h3 id='injectiveaccountsrpc-streamsubaccountbalance-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
    <span class="n">subaccount</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_subaccount_balance</span><span class="p">(</span><span class="n">subaccount_id</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">balance</span> <span class="ow">in</span> <span class="n">subaccount</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Subaccount balance Update:</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">balance</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0x1b99514e320ae0087be7f87b1e3057853c43b799000000000000000000000000"</span>
  <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamSubaccountBalance</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">subaccountId</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">{</span>
    <span class="k">select</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
      <span class="k">return</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectiveaccountsrpc-streamsubaccountbalance-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Streaming Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x90f8bf6a479f320ead074411a4b0e7944ea8c9c1000000000000000000000002"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"account_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"deposit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1960000000000000000"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1544614248000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>balance</td>
<td>SubaccountBalance</td>
<td>Array of SubaccountBalance</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Operation timestamp in UNIX millis</td>
</tr>
</tbody></table>

<p><strong>SubaccountBalance</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>denom</td>
<td>string</td>
<td>Coin denom on the chain</td>
</tr>
<tr>
<td>deposit</td>
<td>SubaccountDeposit</td>
<td>Array of SubaccountDeposit</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
</tr>
<tr>
<td>account_address</td>
<td>string</td>
<td>The Injective Chain address</td>
</tr>
</tbody></table>

<p><strong>SubaccountDeposit</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>available_balance</td>
<td>string</td>
<td>The available balance for a denom</td>
</tr>
<tr>
<td>total_balance</td>
<td>string</td>
<td>The total balance for a denom</td>
</tr>
</tbody></table>
<h2 id='injectiveaccountsrpc-orderstates'>OrderStates</h2>
<p>Get orders with an order hash, this request will return market orders and limit orders in all states [booked, partial_filled, filled, canceled]. For filled and canceled orders, there is a TTL of 1 day. Should your order be filled or canceled you will still be able to fetch it for 3 minutes.</p>
<h3 id='injectiveaccountsrpc-orderstates-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">spot_order_hashes</span> <span class="o">=</span> <span class="p">[</span><span class="s">"0xce0d9b701f77cd6ddfda5dd3a4fe7b2d53ba83e5d6c054fb2e9e886200b7b7bb"</span><span class="p">,</span> <span class="s">"0x2e2245b5431638d76c6e0cc6268970418a1b1b7df60a8e94b8cf37eae6105542"</span><span class="p">]</span>
    <span class="n">derivative_order_hashes</span> <span class="o">=</span> <span class="p">[</span><span class="s">"0x82113f3998999bdc3892feaab2c4e53ba06c5fe887a2d5f9763397240f24da50"</span><span class="p">,</span> <span class="s">"0xbb1f036001378cecb5fff1cc69303919985b5bf058c32f37d5aaf9b804c07a06"</span><span class="p">]</span>
    <span class="n">orders</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_order_states</span><span class="p">(</span><span class="n">spot_order_hashes</span><span class="o">=</span><span class="n">spot_order_hashes</span><span class="p">,</span> <span class="n">derivative_order_hashes</span><span class="o">=</span><span class="n">derivative_order_hashes</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">accountPB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/accounts_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">spotOrderHashes</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0x0b156df549747187210ca5381f0291f179d76d613d0bae1a3c4fd2e3c0504b7c"</span><span class="p">}</span>
  <span class="n">derivativeOrderHashes</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0x82113f3998999bdc3892feaab2c4e53ba06c5fe887a2d5f9763397240f24da50"</span><span class="p">}</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">accountPB</span><span class="o">.</span><span class="n">OrderStatesRequest</span><span class="p">{</span>
    <span class="n">SpotOrderHashes</span><span class="o">:</span>       <span class="n">spotOrderHashes</span><span class="p">,</span>
    <span class="n">DerivativeOrderHashes</span><span class="o">:</span> <span class="n">derivativeOrderHashes</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetOrderStates</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>spot_order_hashes</td>
<td>array</td>
<td>Array with the order hashes you want to fetch in spot markets</td>
<td>No</td>
</tr>
<tr>
<td>derivative_order_hashes</td>
<td>array</td>
<td>Array with the order hashes you want to fetch in derivative markets</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectiveaccountsrpc-orderstates-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"spot_order_states"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xce0d9b701f77cd6ddfda5dd3a4fe7b2d53ba83e5d6c054fb2e9e886200b7b7bb"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0cd5450e3dad3836c66761eb626495b6195a56a2000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity_filled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity_remaining"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636237921271</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636237921271</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"spot_order_states"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x2e2245b5431638d76c6e0cc6268970418a1b1b7df60a8e94b8cf37eae6105542"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0cd5450e3dad3836c66761eb626495b6195a56a2000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"canceled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity_filled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity_remaining"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636237914316</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636238238466</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"derivative_order_states"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x82113f3998999bdc3892feaab2c4e53ba06c5fe887a2d5f9763397240f24da50"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0cd5450e3dad3836c66761eb626495b6195a56a2000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xb64332daa987dcb200c26965bc9adaf8aa301fe3a0aecb0232fadbd3dfccd0d8"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity_filled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity_remaining"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636238295539</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636238295539</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"derivative_order_states"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xbb1f036001378cecb5fff1cc69303919985b5bf058c32f37d5aaf9b804c07a06"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x0cd5450e3dad3836c66761eb626495b6195a56a2000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x979731deaaf17d26b2e256ad18fecd0ac742b3746b9ea5382bac9bd0b5e58f74"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity_filled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity_remaining"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636238267475</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636238267475</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>spot_order_states</td>
<td>SpotOrderStates</td>
<td>Array of SpotOrderStates</td>
</tr>
<tr>
<td>derivative_order_states</td>
<td>DerivativeOrderStates</td>
<td>Array of DerivativeOrderStates</td>
</tr>
</tbody></table>

<p><strong>SpotOrderStates</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The order hash</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID that posted the order</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID of the order</td>
</tr>
<tr>
<td>order_type</td>
<td>string</td>
<td>The order type (Should be one of: [limit, market])</td>
</tr>
<tr>
<td>order_side</td>
<td>string</td>
<td>The order side (Should be one of: [buy, sell])</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>The order state (Should be one of: [booked, partial_filled, filled, canceled])</td>
</tr>
<tr>
<td>quantity_filled</td>
<td>string</td>
<td>The quantity that has been filled for your order</td>
</tr>
<tr>
<td>quantity_remaining</td>
<td>string</td>
<td>The quantity that hasn&#39;t been filled for your order</td>
</tr>
<tr>
<td>created_at</td>
<td>string</td>
<td>The timestamp of your order when it was first created</td>
</tr>
<tr>
<td>updated_at</td>
<td>string</td>
<td>The timestamp of your order when it was last updated</td>
</tr>
</tbody></table>

<p><strong>DerivativeOrderStates</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The order hash</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID that posted the order</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID of the order</td>
</tr>
<tr>
<td>order_type</td>
<td>string</td>
<td>The order type (Should be one of: [limit, market])</td>
</tr>
<tr>
<td>order_side</td>
<td>string</td>
<td>The order side (Should be one of: [buy, sell])</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>The order state (Should be one of: [booked, partial_filled, filled, canceled])</td>
</tr>
<tr>
<td>quantity_filled</td>
<td>string</td>
<td>The quantity that has been filled for your order</td>
</tr>
<tr>
<td>quantity_remaining</td>
<td>string</td>
<td>The quantity that hasn&#39;t been filled for your order</td>
</tr>
<tr>
<td>created_at</td>
<td>string</td>
<td>The timestamp of your order when it was first created</td>
</tr>
<tr>
<td>updated_at</td>
<td>string</td>
<td>The timestamp of your order when it was last updated</td>
</tr>
</tbody></table>
<h2 id='injectiveaccountsrpc-portfolio'>Portfolio</h2>
<p>Get an overview of your portfolio.</p>
<h3 id='injectiveaccountsrpc-portfolio-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">account_address</span> <span class="o">=</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="n">portfolio</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_portfolio</span><span class="p">(</span><span class="n">account_address</span><span class="o">=</span><span class="n">account_address</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">portfolio</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">accountAddress</span> <span class="o">:=</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetPortfolio</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">accountAddress</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>account_address</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectiveaccountsrpc-portfolio-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"portfolio"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"portfolio_value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14172.9011909999761785"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14112.5174909999761785"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"locked_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60.3837"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unrealized_pnl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccounts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14112.5174909999761785"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"locked_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60.3837"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"unrealized_pnl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>portfolio_value</td>
<td>string</td>
<td>The total value of your portfolio including bank balance, subaccounts&#39; balance, unrealized profit &amp; loss as well as margin in open positions</td>
</tr>
<tr>
<td>available_balance</td>
<td>string</td>
<td>The total available balance in the subaccounts</td>
</tr>
<tr>
<td>locked_balance</td>
<td>string</td>
<td>The amount of margin in open orders and positions</td>
</tr>
<tr>
<td>unrealized_pnl</td>
<td>string</td>
<td>The approximate unrealized profit and loss across all positions (based on the mark price)</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter balances by subaccount ID</td>
</tr>
</tbody></table>
<h2 id='injectiveaccountsrpc-rewards'>Rewards</h2>
<p>Get the rewards for Trade &amp; Earn, the request will fetch all addresses for the latest epoch (-1) by default.</p>
<h3 id='injectiveaccountsrpc-rewards-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">account_address</span> <span class="o">=</span> <span class="s">"inj13q8u96uftm0d7ljcf6hdp0uj5tyqrwftmxllaq"</span>
    <span class="n">epoch</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">rewards</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_rewards</span><span class="p">(</span><span class="n">account_address</span><span class="o">=</span><span class="n">account_address</span><span class="p">,</span> <span class="n">epoch</span><span class="o">=</span><span class="n">epoch</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">rewards</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">accountPB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/accounts_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">accountAddress</span> <span class="o">:=</span> <span class="s">"inj1rwv4zn3jptsqs7l8lpa3uvzhs57y8duemete9e"</span>
  <span class="n">epoch</span> <span class="o">:=</span> <span class="kt">int64</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">accountPB</span><span class="o">.</span><span class="n">RewardsRequest</span><span class="p">{</span>
    <span class="n">Epoch</span><span class="o">:</span>          <span class="n">epoch</span><span class="p">,</span>
    <span class="n">AccountAddress</span><span class="o">:</span> <span class="n">accountAddress</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetRewards</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>account_address</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>No</td>
</tr>
<tr>
<td>epoch</td>
<td>integer</td>
<td>The epoch ID</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectiveaccountsrpc-rewards-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"rewards"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"account_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj13q8u96uftm0d7ljcf6hdp0uj5tyqrwftmxllaq"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rewards"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100000000000000000000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"distributed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1641821040539</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>account_address</td>
<td>string</td>
<td>The Injective Chain address</td>
</tr>
<tr>
<td>denom</td>
<td>string</td>
<td>The token denom</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>The amount of rewards distributed</td>
</tr>
<tr>
<td>distributed_at</td>
<td>integer</td>
<td>Timestamp of the transfer in UNIX millis</td>
</tr>
</tbody></table>
<h1 id='injectivespotexchangerpc'>- InjectiveSpotExchangeRPC</h1>
<p>InjectiveSpotExchangeRPC defines the gRPC API of the Spot Exchange provider.</p>
<h2 id='injectivespotexchangerpc-market'>Market</h2>
<p>Get details of a spot market.</p>
<h3 id='injectivespotexchangerpc-market-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">market</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_spot_market</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">market</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSpotMarket</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">marketId</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectivespotexchangerpc-market-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ticker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INJ/USDT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"base_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"base_token_meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Injective Protocol"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xe28b3B32B6c345A34Ff64674606124Dd5Aceca30"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INJ"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://static.alchemyapi.io/images/assets/7226.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"decimals"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632535055751</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"quote_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0x69efCB62D98f4a6ff5a0b0CFaa4AAbB122e85e08"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quote_token_meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tether"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x69efCB62D98f4a6ff5a0b0CFaa4AAbB122e85e08"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://static.alchemyapi.io/images/assets/825.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"decimals"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632535055759</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"maker_fee_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"taker_fee_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.002"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"service_provider_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_price_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000000001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_quantity_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>market</td>
<td>SpotMarketInfo</td>
<td>Array of SpotMarketInfo</td>
</tr>
</tbody></table>

<p><strong>SpotMarketInfo</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>base_denom</td>
<td>string</td>
<td>Coin denom of the base asset</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>SpotMarket ID is keccak265(baseDenom</td>
</tr>
<tr>
<td>market_status</td>
<td>string</td>
<td>The status of the market (Should be one of: [active paused suspended demolished expired])</td>
</tr>
<tr>
<td>min_quantity_tick_size</td>
<td>string</td>
<td>Defines the minimum required tick size for the order&#39;s quantity</td>
</tr>
<tr>
<td>quote_token_meta</td>
<td>TokenMeta</td>
<td>Array of TokenMeta</td>
</tr>
<tr>
<td>service_provider_fee</td>
<td>string</td>
<td>Percentage of the transaction fee shared with the service provider</td>
</tr>
<tr>
<td>base_token_meta</td>
<td>TokenMeta</td>
<td>Array of TokenMeta</td>
</tr>
<tr>
<td>maker_fee_rate</td>
<td>string</td>
<td>Defines the fee percentage makers pay when trading (in the quote asset)</td>
</tr>
<tr>
<td>min_price_tick_size</td>
<td>string</td>
<td>Defines the minimum required tick size for the order&#39;s price</td>
</tr>
<tr>
<td>quote_denom</td>
<td>string</td>
<td>Coin denom of the quote asset</td>
</tr>
<tr>
<td>taker_fee_rate</td>
<td>string</td>
<td>Defines the fee percentage takers pay when trading (in the quote asset)</td>
</tr>
<tr>
<td>ticker</td>
<td>string</td>
<td>A name of the pair in format AAA/BBB, where AAA is base asset, BBB is quote asset</td>
</tr>
</tbody></table>

<p><strong>TokenMeta</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>string</td>
<td>Token&#39;s Ethereum contract address</td>
</tr>
<tr>
<td>decimals</td>
<td>integer</td>
<td>Token decimals</td>
</tr>
<tr>
<td>logo</td>
<td>string</td>
<td>URL to the logo image</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Token full name</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Token symbol short name</td>
</tr>
<tr>
<td>updatedAt</td>
<td>integer</td>
<td>Token metadata fetched timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h2 id='injectivespotexchangerpc-markets'>Markets</h2>
<p>Get a list of spot markets.</p>
<h3 id='injectivespotexchangerpc-markets-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_status</span> <span class="o">=</span> <span class="s">"active"</span> <span class="c1"># active, paused, suspended, demolished or expired
</span>    <span class="n">base_denom</span> <span class="o">=</span> <span class="s">"inj"</span>
    <span class="n">quote_denom</span> <span class="o">=</span> <span class="s">"peggy0x69efCB62D98f4a6ff5a0b0CFaa4AAbB122e85e08"</span>
    <span class="n">market</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_spot_markets</span><span class="p">(</span><span class="n">market_status</span><span class="o">=</span><span class="n">market_status</span><span class="p">,</span> <span class="n">base_denom</span><span class="o">=</span><span class="n">base_denom</span><span class="p">,</span> <span class="n">quote_denom</span><span class="o">=</span><span class="n">quote_denom</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">market</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">spotExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/spot_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketStatus</span> <span class="o">:=</span> <span class="s">"active"</span>
  <span class="n">quoteDenom</span> <span class="o">:=</span> <span class="s">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">spotExchangePB</span><span class="o">.</span><span class="n">MarketsRequest</span><span class="p">{</span>
    <span class="n">MarketStatus</span><span class="o">:</span> <span class="n">marketStatus</span><span class="p">,</span>
    <span class="n">QuoteDenom</span><span class="o">:</span>   <span class="n">quoteDenom</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSpotMarkets</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>base_denom</td>
<td>string</td>
<td>Filter by the base currency</td>
<td>No</td>
</tr>
<tr>
<td>market_status</td>
<td>string</td>
<td>Filter by market status (Should be one of: [active paused suspended demolished expired])</td>
<td>No</td>
</tr>
<tr>
<td>quote_denom</td>
<td>string</td>
<td>Filter by the quote currency</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivespotexchangerpc-markets-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"markets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ticker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INJ/USDT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"base_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"base_token_meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Injective Protocol"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xe28b3B32B6c345A34Ff64674606124Dd5Aceca30"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INJ"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://static.alchemyapi.io/images/assets/7226.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"decimals"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632535055751</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"quote_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0x69efCB62D98f4a6ff5a0b0CFaa4AAbB122e85e08"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quote_token_meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tether"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x69efCB62D98f4a6ff5a0b0CFaa4AAbB122e85e08"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://static.alchemyapi.io/images/assets/825.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"decimals"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632535055759</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"maker_fee_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"taker_fee_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.002"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"service_provider_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_price_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000000001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_quantity_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>markets</td>
<td>SpotMarketInfo</td>
<td>Array of SpotMarketInfo</td>
</tr>
</tbody></table>

<p><strong>SpotMarketInfo</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>base_denom</td>
<td>string</td>
<td>Coin denom of the base asset</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>SpotMarket ID is keccak265(baseDenom</td>
</tr>
<tr>
<td>market_status</td>
<td>string</td>
<td>The status of the market (Should be one of: [active paused suspended demolished expired])</td>
</tr>
<tr>
<td>min_quantity_tick_size</td>
<td>string</td>
<td>Defines the minimum required tick size for the order&#39;s quantity</td>
</tr>
<tr>
<td>quote_token_meta</td>
<td>TokenMeta</td>
<td>Array of TokenMeta</td>
</tr>
<tr>
<td>service_provider_fee</td>
<td>string</td>
<td>Percentage of the transaction fee shared with the service provider</td>
</tr>
<tr>
<td>base_token_meta</td>
<td>TokenMeta</td>
<td>Array of TokenMeta</td>
</tr>
<tr>
<td>maker_fee_rate</td>
<td>string</td>
<td>Defines the fee percentage makers pay when trading (in the quote asset)</td>
</tr>
<tr>
<td>min_price_tick_size</td>
<td>string</td>
<td>Defines the minimum required tick size for the order&#39;s price</td>
</tr>
<tr>
<td>quote_denom</td>
<td>string</td>
<td>Coin denom of the quote asset</td>
</tr>
<tr>
<td>taker_fee_rate</td>
<td>string</td>
<td>Defines the fee percentage takers pay when trading (in the quote asset)</td>
</tr>
<tr>
<td>ticker</td>
<td>string</td>
<td>A name of the pair in format AAA/BBB, where AAA is base asset, BBB is quote asset</td>
</tr>
</tbody></table>

<p><strong>TokenMeta</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>string</td>
<td>Token&#39;s Ethereum contract address</td>
</tr>
<tr>
<td>decimals</td>
<td>integer</td>
<td>Token decimals</td>
</tr>
<tr>
<td>logo</td>
<td>string</td>
<td>URL to the logo image</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Token full name</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Token symbol short name</td>
</tr>
<tr>
<td>updatedAt</td>
<td>integer</td>
<td>Token metadata fetched timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h2 id='injectivespotexchangerpc-streammarkets'>StreamMarkets</h2>
<p>Stream live updates of spot markets.</p>
<h3 id='injectivespotexchangerpc-streammarkets-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">markets</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_spot_markets</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">market</span> <span class="ow">in</span> <span class="n">markets</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">market</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketIds</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">}</span>
  <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamSpotMarket</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">marketIds</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">{</span>
    <span class="k">select</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
      <span class="k">return</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div><h3 id='injectivespotexchangerpc-streammarkets-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Streaming Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ticker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INJ/USDT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"base_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"base_token_meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Injective Protocol"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xe28b3B32B6c345A34Ff64674606124Dd5Aceca30"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INJ"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://static.alchemyapi.io/images/assets/7226.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"decimals"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632535055751</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"quote_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0x69efCB62D98f4a6ff5a0b0CFaa4AAbB122e85e08"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quote_token_meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tether"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x69efCB62D98f4a6ff5a0b0CFaa4AAbB122e85e08"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://static.alchemyapi.io/images/assets/825.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"decimals"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632535055759</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"maker_fee_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"taker_fee_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.002"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"service_provider_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_price_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000000001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_quantity_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000"</span><span class="w">
</span><span class="p">},</span><span class="w">
  </span><span class="nl">"operation_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632535055790</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>market</td>
<td>SpotMarketInfo</td>
<td>Array of SpotMarketInfo</td>
</tr>
<tr>
<td>operation_type</td>
<td>string</td>
<td>Update type (Should be one of: [insert replace update invalidate])</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Operation timestamp in UNIX millis</td>
</tr>
</tbody></table>

<p><strong>SpotMarketInfo</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>base_denom</td>
<td>string</td>
<td>Coin denom of the base asset</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>SpotMarket ID is keccak265(baseDenom</td>
</tr>
<tr>
<td>market_status</td>
<td>string</td>
<td>The status of the market (Should be one of: [active paused suspended demolished expired])</td>
</tr>
<tr>
<td>min_quantity_tick_size</td>
<td>string</td>
<td>Defines the minimum required tick size for the order&#39;s quantity</td>
</tr>
<tr>
<td>quote_token_meta</td>
<td>TokenMeta</td>
<td>Array of TokenMeta</td>
</tr>
<tr>
<td>service_provider_fee</td>
<td>string</td>
<td>Percentage of the transaction fee shared with the service provider</td>
</tr>
<tr>
<td>base_token_meta</td>
<td>TokenMeta</td>
<td>Array of TokenMeta</td>
</tr>
<tr>
<td>maker_fee_rate</td>
<td>string</td>
<td>Defines the fee percentage makers pay when trading (in the quote asset)</td>
</tr>
<tr>
<td>min_price_tick_size</td>
<td>string</td>
<td>Defines the minimum required tick size for the order&#39;s price</td>
</tr>
<tr>
<td>quote_denom</td>
<td>string</td>
<td>Coin denom of the quote asset</td>
</tr>
<tr>
<td>taker_fee_rate</td>
<td>string</td>
<td>Defines the fee percentage takers pay when trading (in the quote asset)</td>
</tr>
<tr>
<td>ticker</td>
<td>string</td>
<td>A name of the pair in format AAA/BBB, where AAA is base asset, BBB is quote asset</td>
</tr>
</tbody></table>

<p><strong>TokenMeta</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>string</td>
<td>Token&#39;s Ethereum contract address</td>
</tr>
<tr>
<td>decimals</td>
<td>integer</td>
<td>Token decimals</td>
</tr>
<tr>
<td>logo</td>
<td>string</td>
<td>URL to the logo image</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Token full name</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Token symbol short name</td>
</tr>
<tr>
<td>updatedAt</td>
<td>integer</td>
<td>Token metadata fetched timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h2 id='injectivespotexchangerpc-orders'>Orders</h2>
<p>Get orders of a spot market.</p>
<h3 id='injectivespotexchangerpc-orders-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">order_side</span> <span class="o">=</span> <span class="s">"sell"</span> <span class="c1"># buy or sell
</span>    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
    <span class="n">orders</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_spot_orders</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span> <span class="n">order_side</span><span class="o">=</span><span class="n">order_side</span><span class="p">,</span> <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">spotExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/spot_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">spotExchangePB</span><span class="o">.</span><span class="n">OrdersRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span> <span class="n">marketId</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSpotOrders</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
<tr>
<td>order_side</td>
<td>string</td>
<td>Filter by order side (Should be one of: [buy sell])</td>
<td>No</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivespotexchangerpc-orders-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xb0704040d8a2005fc5154f8e7fd7bcc013a6e40b8f6ec79ac2235740a57e7d32"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xbdaedec95d563fb05240d6e01821008454c24c36000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000007523"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unfilled_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633720869740</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xd5c94c3e7fbf7eaa6a1a3f831accc10929932315d06114bd7bd810ded4628590"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xbdaedec95d563fb05240d6e01821008454c24c36000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000007523"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unfilled_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633720644128</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orders</td>
<td>SpotLimitOrder</td>
<td>Array of SpotLimitOrder</td>
</tr>
</tbody></table>

<p><strong>SpotLimitOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>unfilled_quantity</td>
<td>string</td>
<td>The amount of the quantity remaining unfilled</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Spot Market ID is keccak265(baseDenom + quoteDenom)</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>Hash of the order</td>
</tr>
<tr>
<td>order_side</td>
<td>string</td>
<td>The type of the order (Should be one of: [buy sell stop_buy stop_sell take_buy take_sell])</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>The state of the order (Should be one of: [booked partial_filled filled canceled])</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID this order belongs to</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The fee recipient address</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>The price of the order</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>The quantity of the order</td>
</tr>
<tr>
<td>trigger_price</td>
<td>string</td>
<td>The price used by stop/take orders. This will be 0 if the trigger price is not set</td>
</tr>
<tr>
<td>created_at</td>
<td>integer</td>
<td>Order committed timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h2 id='injectivespotexchangerpc-streamorders'>StreamOrders</h2>
<p>Stream order updates of a spot market.</p>
<h3 id='injectivespotexchangerpc-streamorders-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">order_side</span> <span class="o">=</span> <span class="s">"sell"</span> <span class="c1"># sell or buy
</span>    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>
    <span class="n">orders</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_spot_orders</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span> <span class="n">order_side</span><span class="o">=</span><span class="n">order_side</span><span class="p">,</span> <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="n">orders</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">spotExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/spot_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
  <span class="n">orderSide</span> <span class="o">:=</span> <span class="s">"buy"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">spotExchangePB</span><span class="o">.</span><span class="n">StreamOrdersRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="n">subaccountId</span><span class="p">,</span>
    <span class="n">OrderSide</span><span class="o">:</span>    <span class="n">orderSide</span><span class="p">,</span>
  <span class="p">}</span>
  <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamSpotOrders</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">{</span>
    <span class="k">select</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
      <span class="k">return</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
<tr>
<td>order_side</td>
<td>string</td>
<td>Filter by order side (Should be one of: [buy sell])</td>
<td>No</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivespotexchangerpc-streamorders-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Streaming Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"order"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x1f07217915afff20f9fb6819ff265c260c65ab75743ea72ca3dcbe275872951b"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000000001318"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unfilled_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634819677953</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634820261139</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"operation_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634820263000</span><span class="p">,</span><span class="w">

</span><span class="nl">"order"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x1074fc29ae8d41d00e5483a8116937c7059d57527c654272c1216b6e5de72134"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000013186"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unfilled_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634819677953</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634820305633</span><span class="p">,</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"operation_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634820307000</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order</td>
<td>SpotLimitOrder</td>
<td>Array of SpotLimitOrder</td>
</tr>
<tr>
<td>operation_type</td>
<td>string</td>
<td>Order update type (Should be one of: [insert replace update invalidate])</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Operation timestamp in UNIX millis</td>
</tr>
</tbody></table>

<p><strong>SpotLimitOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>unfilled_quantity</td>
<td>string</td>
<td>The amount of the quantity remaining unfilled</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Spot Market ID is keccak265(baseDenom + quoteDenom)</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>Hash of the order</td>
</tr>
<tr>
<td>order_side</td>
<td>string</td>
<td>The type of the order (Should be one of: [buy sell stop_buy stop_sell take_buy take_sell])</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>The state of the order (Should be one of: [booked partial_filled filled canceled])</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID this order belongs to</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The fee recipient address</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>The price of the order</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>The quantity of the order</td>
</tr>
<tr>
<td>trigger_price</td>
<td>string</td>
<td>The price used by stop/take orders. This will be 0 if the trigger price is not set</td>
</tr>
<tr>
<td>created_at</td>
<td>integer</td>
<td>Order committed timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h2 id='injectivespotexchangerpc-trades'>Trades</h2>
<p>Get trades of a spot market.</p>

<p><strong>Trade execution types</strong></p>

<ol>
<li>Market for market orders</li>
<li>limitFill for a resting limit order getting filled by a market order</li>
<li>LimitMatchRestingOrder for a resting limit order getting matched with another new limit order</li>
<li>LimitMatchNewOrder for the other way around (new limit order getting matched)</li>
</ol>
<h3 id='injectivespotexchangerpc-trades-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>
    <span class="n">direction</span> <span class="o">=</span> <span class="s">"buy"</span> <span class="c1"># buy or sell
</span>    <span class="n">execution_side</span> <span class="o">=</span> <span class="s">"taker"</span> <span class="c1"># taker or maker
</span>    <span class="n">orders</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_spot_trades</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span> <span class="n">execution_side</span><span class="o">=</span><span class="n">execution_side</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">,</span> <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">derivativeExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/derivative_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">derivativeExchangePB</span><span class="o">.</span><span class="n">TradesRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="n">subaccountId</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetDerivativeTrades</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>No</td>
</tr>
<tr>
<td>direction</td>
<td>string</td>
<td>Filter by the direction of the trade (Should be one of: [buy sell])</td>
<td>No</td>
</tr>
<tr>
<td>execution_side</td>
<td>string</td>
<td>Filter by the execution side of the trade (Should be one of: [maker taker])</td>
<td>No</td>
</tr>
<tr>
<td>skip</td>
<td>integer</td>
<td>Skip the last trades, you can use this to fetch all trades since the API caps at 100</td>
<td>No</td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>Limit the trades returned</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivespotexchangerpc-trades-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4e3068bfad0050d38908fd6604190c45c24633b462b886aac377023007276f70"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_execution_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limitFill"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000013512"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634818491163</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"243216"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"executed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634818491163</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc3085f4a23a0303f69aac5ee47914acb6257b10e844ea97281e0c422b8611109"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_execution_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000013406"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634818450613</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"804360"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"executed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634818450613</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trades</td>
<td>SpotTrade</td>
<td>Array of SpotTrade</td>
</tr>
</tbody></table>

<p><strong>SpotTrade</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trade_direction</td>
<td>string</td>
<td>Filter by the trade direction(Should be one of: [buy sell])</td>
</tr>
<tr>
<td>trade_execution_type</td>
<td>string</td>
<td>Filter by the trade execution type (Should be one of: [market limitFill limitMatchRestingOrder limitMatchNewOrder])</td>
</tr>
<tr>
<td>fee</td>
<td>string</td>
<td>The fee associated with the trade (quote asset denom)</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by the market ID</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The order hash</td>
</tr>
<tr>
<td>price</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by the subaccount ID</td>
</tr>
<tr>
<td>executed_at</td>
<td>integer</td>
<td>Timestamp of trade execution in UNIX millis</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that received 40% of the fees</td>
</tr>
</tbody></table>

<p><strong>PriceLevel</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>price</td>
<td>string</td>
<td>Number of the price level</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the price level</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Price level last updated timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h2 id='injectivespotexchangerpc-streamtrades'>StreamTrades</h2>
<p>Stream trades of a spot market.</p>

<p><strong>Trade execution types</strong></p>

<ol>
<li>Market for market orders</li>
<li>limitFill for a resting limit order getting filled by a market order</li>
<li>LimitMatchRestingOrder for a resting limit order getting matched with another new limit order</li>
<li>LimitMatchNewOrder for the other way around (new limit order getting matched)</li>
</ol>
<h3 id='injectivespotexchangerpc-streamtrades-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>
    <span class="n">execution_side</span> <span class="o">=</span> <span class="s">"maker"</span> <span class="c1"># maker or taker
</span>    <span class="n">direction</span> <span class="o">=</span> <span class="s">"sell"</span> <span class="c1"># sell or buy
</span>    <span class="n">trades</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_spot_trades</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span> <span class="n">execution_side</span><span class="o">=</span><span class="n">execution_side</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">,</span> <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">trade</span> <span class="ow">in</span> <span class="n">trades</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">trade</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">spotExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/spot_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">spotExchangePB</span><span class="o">.</span><span class="n">StreamTradesRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="n">subaccountId</span><span class="p">,</span>
  <span class="p">}</span>
  <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamSpotTrades</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">{</span>
    <span class="k">select</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
      <span class="k">return</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_ids</td>
<td>array</td>
<td>Filter by an array of market IDs</td>
<td>Conditional</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Conditional</td>
</tr>
<tr>
<td>subaccount_ids</td>
<td>array</td>
<td>Filter by an array of subaccount IDs</td>
<td>Conditional</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>Conditional</td>
</tr>
<tr>
<td>execution_side</td>
<td>string</td>
<td>Filter by the execution side of the trade (Should be one of: [maker taker])</td>
<td>No</td>
</tr>
<tr>
<td>direction</td>
<td>string</td>
<td>Filter by the direction of the trade (Should be one of: [buy sell])</td>
<td>No</td>
</tr>
<tr>
<td>skip</td>
<td>int</td>
<td>Skip the last trades, you can use this to fetch all trades since the API caps at 100</td>
<td>No</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>Limit the trades returned</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivespotexchangerpc-streamtrades-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Streaming Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"operation_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"insert"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1544614248000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"executed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1544614248000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1960000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x3bdb3d8b5eb4d362371b72cf459216553d74abdb55eb0208091f7777dd85c8bb"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x482ce078117d4835fe005b643056d2d3f439e3010db40f68449d9e5b77e911bc"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1960000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1544614248000</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x90f8bf6a479f320ead074411a4b0e7944ea8c9c1000000000000000000000002"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"trade_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"trade_execution_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>operation_type</td>
<td>string</td>
<td>Trade operation type (Should be one of: [insert invalidate])</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Operation timestamp in UNIX millis</td>
</tr>
<tr>
<td>trade</td>
<td>SpotTrade</td>
<td>Array of SpotTrade</td>
</tr>
</tbody></table>

<p><strong>SpotTrade</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trade_direction</td>
<td>string</td>
<td>Filter by the trade direction(Should be one of: [buy sell])</td>
</tr>
<tr>
<td>trade_execution_type</td>
<td>string</td>
<td>Filter by the trade execution type (Should be one of: [market limitFill limitMatchRestingOrder limitMatchNewOrder])</td>
</tr>
<tr>
<td>fee</td>
<td>string</td>
<td>The fee associated with the trade (quote asset denom)</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by the market ID</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The order hash</td>
</tr>
<tr>
<td>price</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by the subaccount ID</td>
</tr>
<tr>
<td>executed_at</td>
<td>integer</td>
<td>Timestamp of trade execution in UNIX millis</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that received 40% of the fees</td>
</tr>
</tbody></table>

<p><strong>PriceLevel</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>price</td>
<td>string</td>
<td>Number of the price level</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the price level</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Price level last updated timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h2 id='injectivespotexchangerpc-orderbook'>Orderbook</h2>
<p>Get the orderbook of a spot market.</p>
<h3 id='injectivespotexchangerpc-orderbook-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">orderbook</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_spot_orderbook</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">orderbook</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSpotOrderbook</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">marketId</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectivespotexchangerpc-orderbook-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"orderbook"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000010716"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636697333186</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000000001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1616059590812</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000009523"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2501950000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636705938416</span><span class="w">
  </span><span class="p">},</span><span class="w">
 </span><span class="nl">"sells"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000011464"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"44000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636698175470</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sells"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000011476"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636898385842</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sells"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000011488"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636705308464</span><span class="w">
  </span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orderbook</td>
<td>SpotLimitOrderbook</td>
<td>Array of SpotLimitOrderbook</td>
</tr>
</tbody></table>

<p><strong>SpotLimitOrderbook</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>buys</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
<tr>
<td>sells</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
</tbody></table>

<p><strong>PriceLevel</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>price</td>
<td>string</td>
<td>Number of the price level</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the price level</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Price level last updated timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h2 id='injectivespotexchangerpc-orderbooks'>Orderbooks</h2>
<p>Get the orderbook for an array of spot markets.</p>
<h3 id='injectivespotexchangerpc-orderbooks-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">orderbook</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_spot_orderbook</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">orderbook</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketIds</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">}</span>
  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSpotOrderbooks</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">marketIds</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_ids</td>
<td>array</td>
<td>Filter by an array of market IDs</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectivespotexchangerpc-orderbooks-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"orderbooks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x26413a70c9b78a495023e5ab8003c9cf963ef963f6755f8b57255feb5744bf31"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"orderbook"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000000001376"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1646999035779</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000013747"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1647007029601</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"orderbooks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x74b17b0d6855feba39f1f7ab1e8bad0363bd510ee1dcc74e40c2adfe1502f781"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"orderbook"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000379929"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1646998834092</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000378619"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1647006634098</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orderbook</td>
<td>SpotLimitOrderbook</td>
<td>Array of SpotLimitOrderbook</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
</tr>
</tbody></table>

<p><strong>SpotLimitOrderbook</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>buys</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
<tr>
<td>sells</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
</tbody></table>

<p><strong>PriceLevel</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>price</td>
<td>string</td>
<td>Number of the price level</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the price level</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Price level last updated timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h2 id='injectivespotexchangerpc-streamorderbook'>StreamOrderbook</h2>
<p>Stream the orderbook of a spot market.</p>
<h3 id='injectivespotexchangerpc-streamorderbook-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">orderbook</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_spot_orderbook</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">orders</span> <span class="ow">in</span> <span class="n">orderbook</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketIds</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">}</span>
  <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamSpotOrderbook</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">marketIds</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">{</span>
    <span class="k">select</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
      <span class="k">return</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectivespotexchangerpc-streamorderbook-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Streaming Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"orderbook"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000005616"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"32000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642702243902</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000000000561"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642585507231</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"sells"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000006069"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642753915151</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"sells"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000006089"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642753915151</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"operation_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642755027000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>operation_type</td>
<td>string</td>
<td>Order update type (Should be one of: [insert replace update invalidate])</td>
</tr>
<tr>
<td>orderbook</td>
<td>SpotLimitOrderbook</td>
<td>Array of SpotLimitOrderbook</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Operation timestamp in UNIX millis</td>
</tr>
</tbody></table>

<p><strong>SpotLimitOrderbook</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>buys</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
<tr>
<td>sells</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
</tbody></table>

<p><strong>PriceLevel</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>price</td>
<td>string</td>
<td>Number of the price level</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the price level</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Price level last updated timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h2 id='injectivespotexchangerpc-streamorderbooks'>StreamOrderbooks</h2>
<p>Stream orderbook updates for an array of spot markets.</p>
<h3 id='injectivespotexchangerpc-streamorderbooks-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_ids</span> <span class="o">=</span> <span class="p">[</span><span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span> <span class="s">"0x26413a70c9b78a495023e5ab8003c9cf963ef963f6755f8b57255feb5744bf31"</span><span class="p">]</span>
    <span class="n">orderbook</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_spot_orderbooks</span><span class="p">(</span><span class="n">market_ids</span><span class="o">=</span><span class="n">market_ids</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">orders</span> <span class="ow">in</span> <span class="n">orderbook</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketIds</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">}</span>
  <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamSpotOrderbook</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">marketIds</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">{</span>
    <span class="k">select</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
      <span class="k">return</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_ids</td>
<td>array</td>
<td>Filter by market IDs</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectivespotexchangerpc-streamorderbooks-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Streaming Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"orderbooks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000005616"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"32000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642702243902</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000000000561"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642585507231</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"sells"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000006069"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642753915151</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"sells"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000006089"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46000000000000000000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642753915151</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"operation_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642755027000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>operation_type</td>
<td>string</td>
<td>Order update type (Should be one of: [insert replace update invalidate])</td>
</tr>
<tr>
<td>orderbook</td>
<td>SpotLimitOrderbook</td>
<td>Array of SpotLimitOrderbook</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Operation timestamp in UNIX millis</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
</tr>
</tbody></table>

<p><strong>SpotLimitOrderbook</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>buys</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
<tr>
<td>sells</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
</tbody></table>

<p><strong>PriceLevel</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>price</td>
<td>string</td>
<td>Number of the price level</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the price level</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Price level last updated timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h2 id='injectivespotexchangerpc-subaccountorderslist'>SubaccountOrdersList</h2>
<p>Get orders of a subaccount.</p>
<h3 id='injectivespotexchangerpc-subaccountorderslist-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">orders</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_spot_subaccount_orders</span><span class="p">(</span><span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span> <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">spotExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/spot_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0x7453466968297ccaf24f78deb674ad54f9b86697000000000000000000000000"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">spotExchangePB</span><span class="o">.</span><span class="n">SubaccountOrdersListRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="n">subaccountId</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSubaccountSpotOrdersList</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>Yes</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivespotexchangerpc-subaccountorderslist-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x89d99cc898fdd6746c89c82e38adf935a3400181a0b9502daa6b4845e3447dfa"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000005"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unfilled_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634813876780</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xf43af77013733ec274194b9b7d344933db0977eec154e391d3db7316fd38fe95"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x51092ddec80dfd0d41fee1a7d93c8465de47cd33966c8af8ee66c14fe341a545"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unfilled_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1616059590812</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orders</td>
<td>SpotLimitOrder</td>
<td>Array of SpotLimitOrder</td>
</tr>
</tbody></table>

<p><strong>SpotLimitOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>state</td>
<td>string</td>
<td>Order state (Should be one of: [booked partial_filled filled canceled])</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID this order belongs to</td>
</tr>
<tr>
<td>unfilled_quantity</td>
<td>string</td>
<td>The amount of the quantity remaining unfilled</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Spot market ID is keccak265(baseDenom + quoteDenom)</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>Hash of the order</td>
</tr>
<tr>
<td>order_side</td>
<td>string</td>
<td>The type of the order (Should be one of: [buy sell stop_buy stop_sell take_buy take_sell])</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The fee recipient address</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>The price of the order</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>The quantity of the order</td>
</tr>
<tr>
<td>trigger_price</td>
<td>string</td>
<td>The price used by stop/take orders</td>
</tr>
<tr>
<td>created_at</td>
<td>integer</td>
<td>Order committed timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h2 id='injectivespotexchangerpc-subaccounttradeslist'>SubaccountTradesList</h2>
<p>Get trades of a subaccount.</p>
<h3 id='injectivespotexchangerpc-subaccounttradeslist-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">direction</span> <span class="o">=</span> <span class="s">"buy"</span> <span class="c1"># buy or sell
</span>    <span class="n">execution_type</span> <span class="o">=</span> <span class="s">"market"</span> <span class="c1"># market, limitFill, limitMatchRestingOrder or limitMatchNewOrder
</span>    <span class="n">trades</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_spot_subaccount_trades</span><span class="p">(</span><span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span> <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span> <span class="n">execution_type</span><span class="o">=</span><span class="n">execution_type</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">trades</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">spotExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/spot_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">spotExchangePB</span><span class="o">.</span><span class="n">SubaccountTradesListRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="n">subaccountId</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSubaccountSpotTradesList</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>Yes</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>No</td>
</tr>
<tr>
<td>direction</td>
<td>string</td>
<td>Filter by the direction of the trades (Should be one of: [buy sell])</td>
<td>No</td>
</tr>
<tr>
<td>execution_type</td>
<td>string</td>
<td>Filter by the execution type of the trades (Should be one of: [market limitFill limitMatchRestingOrder limitMatchNewOrder])</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivespotexchangerpc-subaccounttradeslist-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x66616966cb813a4fd89603f3bfe9a762db659b6a5890ba8572925e22e727dafe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_execution_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limitMatchRestingOrder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000010952"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"650000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633088740309</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7118800"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"executed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633088740309</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x66616966cb813a4fd89603f3bfe9a762db659b6a5890ba8572925e22e727dafe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_execution_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limitMatchRestingOrder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000000000010965"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"650000000000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633088723991</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7127250"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"executed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1633088723991</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trades</td>
<td>SpotTrade</td>
<td>Array of SpotTrade</td>
</tr>
</tbody></table>

<p><strong>SpotTrade</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trade_direction</td>
<td>string</td>
<td>Filter by the trade direction(Should be one of: [buy sell])</td>
</tr>
<tr>
<td>trade_execution_type</td>
<td>string</td>
<td>Filter by the trade execution type (Should be one of: [market limitFill limitMatchRestingOrder limitMatchNewOrder])</td>
</tr>
<tr>
<td>fee</td>
<td>string</td>
<td>The fee associated with the trade (quote asset denom)</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by the market ID</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The order hash</td>
</tr>
<tr>
<td>price</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by the subaccount ID</td>
</tr>
<tr>
<td>executed_at</td>
<td>integer</td>
<td>Timestamp of trade execution in UNIX millis</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that received 40% of the fees</td>
</tr>
</tbody></table>

<p><strong>PriceLevel</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>price</td>
<td>string</td>
<td>Number of the price level</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the price level</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Price level last updated timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h1 id='injectivederivativeexchangerpc'>- InjectiveDerivativeExchangeRPC</h1>
<p>InjectiveDerivativeExchangeRPC defines the gRPC API of the Derivative Exchange provider.</p>
<h2 id='injectivederivativeexchangerpc-market'>Market</h2>
<p>Get details of a derivative market.</p>
<h3 id='injectivederivativeexchangerpc-market-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">market</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_derivative_market</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">market</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetDerivativeMarket</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">marketId</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-market-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ticker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC/USDT PERP"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_base"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_quote"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bandibc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_scale_factor"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
  </span><span class="nl">"initial_margin_ratio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.05"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maintenance_margin_ratio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quote_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quote_token_meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tether"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://static.alchemyapi.io/images/assets/825.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"decimals"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632535056616</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"maker_fee_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"taker_fee_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.002"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"service_provider_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"is_perpetual"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_price_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_quantity_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"perpetual_market_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"hourly_funding_rate_cap"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000625"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hourly_interest_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000416666"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"next_funding_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634806800</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funding_interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"perpetual_market_funding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"cumulative_funding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.675810253053067335"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cumulative_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.137372841146815096"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634806754</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>market</td>
<td>DerivativeMarketInfo</td>
<td>Array of DerivativeMarketInfo</td>
</tr>
</tbody></table>

<p><strong>DerivativeMarketInfo</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>oracle_quote</td>
<td>string</td>
<td>Oracle quote currency</td>
</tr>
<tr>
<td>oracle_type</td>
<td>string</td>
<td>Oracle Type</td>
</tr>
<tr>
<td>quote_denom</td>
<td>string</td>
<td>Coin denom used for the quote asset</td>
</tr>
<tr>
<td>is_perpetual</td>
<td>boolean</td>
<td>True if the market is a perpetual swap market</td>
</tr>
<tr>
<td>maker_fee_rate</td>
<td>string</td>
<td>Defines the fee percentage makers pay when trading (in quote asset)</td>
</tr>
<tr>
<td>min_price_tick_size</td>
<td>string</td>
<td>Defines the minimum required tick size for the order&#39;s price</td>
</tr>
<tr>
<td>min_quantity_tick_size</td>
<td>string</td>
<td>Defines the minimum required tick size for the order&#39;s quantity</td>
</tr>
<tr>
<td>oracle_scale_factor</td>
<td>integer</td>
<td>OracleScaleFactor</td>
</tr>
<tr>
<td>taker_fee_rate</td>
<td>string</td>
<td>Defines the fee percentage takers pay when trading (in quote asset)</td>
</tr>
<tr>
<td>expiry_futures_market_info</td>
<td>array</td>
<td>Array of ExpiryFuturesMarketInfo</td>
</tr>
<tr>
<td>initial_margin_ratio</td>
<td>string</td>
<td>Defines the initial margin ratio of a derivative market</td>
</tr>
<tr>
<td>market_status</td>
<td>string</td>
<td>The status of the market (Should be one of: [active paused suspended demolished expired])</td>
</tr>
<tr>
<td>service_provider_fee</td>
<td>string</td>
<td>Percentage of the transaction fee shared with the service provider</td>
</tr>
<tr>
<td>oracle_base</td>
<td>string</td>
<td>Oracle base currency</td>
</tr>
<tr>
<td>perpetual_market_funding</td>
<td>PerpetualMarketFunding</td>
<td>Array of PerpetualMarketFunding</td>
</tr>
<tr>
<td>perpetual_market_info</td>
<td>PerpetualMarketInfo</td>
<td>Array of PerpetualMarketInfo</td>
</tr>
<tr>
<td>ticker</td>
<td>string</td>
<td>The name of the pair in format AAA/BBB, where AAA is the base asset and BBB is the quote asset</td>
</tr>
<tr>
<td>maintenance_margin_ratio</td>
<td>string</td>
<td>Defines the maintenance margin ratio of a derivative market</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID</td>
</tr>
<tr>
<td>quoteTokenMeta</td>
<td>TokenMeta</td>
<td>Array of TokenMeta</td>
</tr>
</tbody></table>

<p><strong>PerpetualMarketFunding</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cumulative_funding</td>
<td>string</td>
<td>Defines the cumulative funding of a perpetual market</td>
</tr>
<tr>
<td>cumulative_price</td>
<td>string</td>
<td>Defines the cumulative price for the current hour up to the last timestamp</td>
</tr>
<tr>
<td>last_timestamp</td>
<td>integer</td>
<td>Defines the last funding timestamp in UNIX seconds</td>
</tr>
</tbody></table>

<p><strong>PerpetualMarketInfo</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>hourly_funding_rate_cap</td>
<td>string</td>
<td>Defines the default maximum absolute value of the hourly funding rate</td>
</tr>
<tr>
<td>hourly_interest_rate</td>
<td>string</td>
<td>Defines the hourly interest rate of the perpetual market</td>
</tr>
<tr>
<td>next_funding_timestamp</td>
<td>integer</td>
<td>Defines the next funding timestamp in UNIX seconds</td>
</tr>
<tr>
<td>funding_interval</td>
<td>integer</td>
<td>Defines the funding interval in seconds</td>
</tr>
</tbody></table>

<p><strong>TokenMeta</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>updated_at</td>
<td>integer</td>
<td>Token metadata fetched timestamp in UNIX millis</td>
</tr>
<tr>
<td>address</td>
<td>string</td>
<td>Token Ethereum contract address</td>
</tr>
<tr>
<td>decimals</td>
<td>integer</td>
<td>Token decimals</td>
</tr>
<tr>
<td>logo</td>
<td>string</td>
<td>URL to the logo image</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Token full name</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Token symbol short name</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-markets'>Markets</h2>
<p>Get a list of derivative markets.</p>
<h3 id='injectivederivativeexchangerpc-markets-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_status</span> <span class="o">=</span> <span class="s">"active"</span> <span class="c1"># active, paused, suspended, demolished or expired
</span>    <span class="n">quote_denom</span> <span class="o">=</span> <span class="s">"peggy0x69efCB62D98f4a6ff5a0b0CFaa4AAbB122e85e08"</span>
    <span class="n">market</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_derivative_markets</span><span class="p">(</span><span class="n">market_status</span><span class="o">=</span><span class="n">market_status</span><span class="p">,</span> <span class="n">quote_denom</span><span class="o">=</span><span class="n">quote_denom</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">market</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">derivativeExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/derivative_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketStatus</span> <span class="o">:=</span> <span class="s">"active"</span>
  <span class="n">quoteDenom</span> <span class="o">:=</span> <span class="s">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">derivativeExchangePB</span><span class="o">.</span><span class="n">MarketsRequest</span><span class="p">{</span>
    <span class="n">MarketStatus</span><span class="o">:</span> <span class="n">marketStatus</span><span class="p">,</span>
    <span class="n">QuoteDenom</span><span class="o">:</span>   <span class="n">quoteDenom</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetDerivativeMarkets</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_status</td>
<td>string</td>
<td>Filter by market status (Should be one of: [active paused suspended demolished expired])</td>
<td>No</td>
</tr>
<tr>
<td>quote_denom</td>
<td>string</td>
<td>Filter by the Coin denomination of the quote currency</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-markets-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"markets"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ticker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC/USDT PERP"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_base"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_quote"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bandibc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_scale_factor"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
  </span><span class="nl">"initial_margin_ratio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.05"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maintenance_margin_ratio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quote_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quote_token_meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tether"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://static.alchemyapi.io/images/assets/825.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"decimals"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632535056616</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"maker_fee_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"taker_fee_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.002"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"service_provider_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"is_perpetual"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_price_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_quantity_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"perpetual_market_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"hourly_funding_rate_cap"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000625"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hourly_interest_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000416666"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"next_funding_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634806800</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funding_interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"perpetual_market_funding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"cumulative_funding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.675810253053067335"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cumulative_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.137372841146815096"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634806754</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>markets</td>
<td>DerivativeMarketInfo</td>
<td>Array of DerivativeMarketInfo</td>
</tr>
</tbody></table>

<p><strong>DerivativeMarketInfo</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>oracle_quote</td>
<td>string</td>
<td>Oracle quote currency</td>
</tr>
<tr>
<td>oracle_type</td>
<td>string</td>
<td>Oracle Type</td>
</tr>
<tr>
<td>quote_denom</td>
<td>string</td>
<td>Coin denom used for the quote asset</td>
</tr>
<tr>
<td>is_perpetual</td>
<td>boolean</td>
<td>True if the market is a perpetual swap market</td>
</tr>
<tr>
<td>maker_fee_rate</td>
<td>string</td>
<td>Defines the fee percentage makers pay when trading (in quote asset)</td>
</tr>
<tr>
<td>min_price_tick_size</td>
<td>string</td>
<td>Defines the minimum required tick size for the order&#39;s price</td>
</tr>
<tr>
<td>min_quantity_tick_size</td>
<td>string</td>
<td>Defines the minimum required tick size for the order&#39;s quantity</td>
</tr>
<tr>
<td>oracle_scale_factor</td>
<td>integer</td>
<td>OracleScaleFactor</td>
</tr>
<tr>
<td>taker_fee_rate</td>
<td>string</td>
<td>Defines the fee percentage takers pay when trading (in quote asset)</td>
</tr>
<tr>
<td>expiry_futures_market_info</td>
<td>array</td>
<td>Array of ExpiryFuturesMarketInfo</td>
</tr>
<tr>
<td>initial_margin_ratio</td>
<td>string</td>
<td>Defines the initial margin ratio of a derivative market</td>
</tr>
<tr>
<td>market_status</td>
<td>string</td>
<td>The status of the market (Should be one of: [active paused suspended demolished expired])</td>
</tr>
<tr>
<td>service_provider_fee</td>
<td>string</td>
<td>Percentage of the transaction fee shared with the service provider</td>
</tr>
<tr>
<td>oracle_base</td>
<td>string</td>
<td>Oracle base currency</td>
</tr>
<tr>
<td>perpetual_market_funding</td>
<td>PerpetualMarketFunding</td>
<td>Array of PerpetualMarketFunding</td>
</tr>
<tr>
<td>perpetual_market_info</td>
<td>PerpetualMarketInfo</td>
<td>Array of PerpetualMarketInfo</td>
</tr>
<tr>
<td>ticker</td>
<td>string</td>
<td>The name of the pair in format AAA/BBB, where AAA is the base asset and BBB is the quote asset</td>
</tr>
<tr>
<td>maintenance_margin_ratio</td>
<td>string</td>
<td>Defines the maintenance margin ratio of a derivative market</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID</td>
</tr>
<tr>
<td>quoteTokenMeta</td>
<td>TokenMeta</td>
<td>Array of TokenMeta</td>
</tr>
</tbody></table>

<p><strong>PerpetualMarketFunding</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cumulative_funding</td>
<td>string</td>
<td>Defines the cumulative funding of a perpetual market</td>
</tr>
<tr>
<td>cumulative_price</td>
<td>string</td>
<td>Defines the cumulative price for the current hour up to the last timestamp</td>
</tr>
<tr>
<td>last_timestamp</td>
<td>integer</td>
<td>Defines the last funding timestamp in UNIX seconds</td>
</tr>
</tbody></table>

<p><strong>PerpetualMarketInfo</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>hourly_funding_rate_cap</td>
<td>string</td>
<td>Defines the default maximum absolute value of the hourly funding rate</td>
</tr>
<tr>
<td>hourly_interest_rate</td>
<td>string</td>
<td>Defines the hourly interest rate of the perpetual market</td>
</tr>
<tr>
<td>next_funding_timestamp</td>
<td>integer</td>
<td>Defines the next funding timestamp in UNIX seconds</td>
</tr>
<tr>
<td>funding_interval</td>
<td>integer</td>
<td>Defines the funding interval in seconds</td>
</tr>
</tbody></table>

<p><strong>TokenMeta</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>updated_at</td>
<td>integer</td>
<td>Token metadata fetched timestamp in UNIX millis</td>
</tr>
<tr>
<td>address</td>
<td>string</td>
<td>Token Ethereum contract address</td>
</tr>
<tr>
<td>decimals</td>
<td>integer</td>
<td>Token decimals</td>
</tr>
<tr>
<td>logo</td>
<td>string</td>
<td>URL to the logo image</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Token full name</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Token symbol short name</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-streammarket'>StreamMarket</h2>
<p>Stream live updates of derivative markets.</p>
<h3 id='injectivederivativeexchangerpc-streammarket-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">markets</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_derivative_markets</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">market</span> <span class="ow">in</span> <span class="n">markets</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">market</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketIds</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">}</span>
  <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamDerivativeMarket</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">marketIds</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">{</span>
    <span class="k">select</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
      <span class="k">return</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div><h3 id='injectivederivativeexchangerpc-streammarket-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Streaming Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"market"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ticker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC/USDT PERP"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_base"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_quote"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bandibc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_scale_factor"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
  </span><span class="nl">"initial_margin_ratio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.05"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maintenance_margin_ratio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.02"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quote_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quote_token_meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tether"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USDT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://static.alchemyapi.io/images/assets/825.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"decimals"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632535056616</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"maker_fee_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"taker_fee_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.002"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"service_provider_fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.4"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"is_perpetual"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_price_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_quantity_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"perpetual_market_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"hourly_funding_rate_cap"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.000625"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hourly_interest_rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00000416666"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"next_funding_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634806800</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funding_interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"perpetual_market_funding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"cumulative_funding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.675810253053067335"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cumulative_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.137372841146815096"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634806754</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>market</td>
<td>DerivativeMarketInfo</td>
<td>Array of DerivativeMarketInfo</td>
</tr>
</tbody></table>

<p><strong>DerivativeMarketInfo</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>oracle_quote</td>
<td>string</td>
<td>Oracle quote currency</td>
</tr>
<tr>
<td>oracle_type</td>
<td>string</td>
<td>Oracle Type</td>
</tr>
<tr>
<td>quote_denom</td>
<td>string</td>
<td>Coin denom used for the quote asset</td>
</tr>
<tr>
<td>is_perpetual</td>
<td>boolean</td>
<td>True if the market is a perpetual swap market</td>
</tr>
<tr>
<td>maker_fee_rate</td>
<td>string</td>
<td>Defines the fee percentage makers pay when trading (in quote asset)</td>
</tr>
<tr>
<td>min_price_tick_size</td>
<td>string</td>
<td>Defines the minimum required tick size for the order&#39;s price</td>
</tr>
<tr>
<td>min_quantity_tick_size</td>
<td>string</td>
<td>Defines the minimum required tick size for the order&#39;s quantity</td>
</tr>
<tr>
<td>oracle_scale_factor</td>
<td>integer</td>
<td>OracleScaleFactor</td>
</tr>
<tr>
<td>taker_fee_rate</td>
<td>string</td>
<td>Defines the fee percentage takers pay when trading (in quote asset)</td>
</tr>
<tr>
<td>expiry_futures_market_info</td>
<td>array</td>
<td>Array of ExpiryFuturesMarketInfo</td>
</tr>
<tr>
<td>initial_margin_ratio</td>
<td>string</td>
<td>Defines the initial margin ratio of a derivative market</td>
</tr>
<tr>
<td>market_status</td>
<td>string</td>
<td>The status of the market (Should be one of: [active paused suspended demolished expired])</td>
</tr>
<tr>
<td>service_provider_fee</td>
<td>string</td>
<td>Percentage of the transaction fee shared with the service provider</td>
</tr>
<tr>
<td>oracle_base</td>
<td>string</td>
<td>Oracle base currency</td>
</tr>
<tr>
<td>perpetual_market_funding</td>
<td>PerpetualMarketFunding</td>
<td>Array of PerpetualMarketFunding</td>
</tr>
<tr>
<td>perpetual_market_info</td>
<td>PerpetualMarketInfo</td>
<td>Array of PerpetualMarketInfo</td>
</tr>
<tr>
<td>ticker</td>
<td>string</td>
<td>The name of the pair in format AAA/BBB, where AAA is the base asset and BBB is the quote asset</td>
</tr>
<tr>
<td>maintenance_margin_ratio</td>
<td>string</td>
<td>Defines the maintenance margin ratio of a derivative market</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID</td>
</tr>
<tr>
<td>quoteTokenMeta</td>
<td>TokenMeta</td>
<td>Array of TokenMeta</td>
</tr>
</tbody></table>

<p><strong>PerpetualMarketFunding</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cumulative_funding</td>
<td>string</td>
<td>Defines the cumulative funding of a perpetual market</td>
</tr>
<tr>
<td>cumulative_price</td>
<td>string</td>
<td>Defines the cumulative price for the current hour up to the last timestamp</td>
</tr>
<tr>
<td>last_timestamp</td>
<td>integer</td>
<td>Defines the last funding timestamp in UNIX seconds</td>
</tr>
</tbody></table>

<p><strong>PerpetualMarketInfo</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>hourly_funding_rate_cap</td>
<td>string</td>
<td>Defines the default maximum absolute value of the hourly funding rate</td>
</tr>
<tr>
<td>hourly_interest_rate</td>
<td>string</td>
<td>Defines the hourly interest rate of the perpetual market</td>
</tr>
<tr>
<td>next_funding_timestamp</td>
<td>integer</td>
<td>Defines the next funding timestamp in UNIX seconds</td>
</tr>
<tr>
<td>funding_interval</td>
<td>integer</td>
<td>Defines the funding interval in seconds</td>
</tr>
</tbody></table>

<p><strong>TokenMeta</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>updated_at</td>
<td>integer</td>
<td>Token metadata fetched timestamp in UNIX millis</td>
</tr>
<tr>
<td>address</td>
<td>string</td>
<td>Token Ethereum contract address</td>
</tr>
<tr>
<td>decimals</td>
<td>integer</td>
<td>Token decimals</td>
</tr>
<tr>
<td>logo</td>
<td>string</td>
<td>URL to the logo image</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Token full name</td>
</tr>
<tr>
<td>symbol</td>
<td>string</td>
<td>Token symbol short name</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-orders'>Orders</h2>
<p>Get orders of a derivative market.</p>
<h3 id='injectivederivativeexchangerpc-orders-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">subaccount_id</span><span class="o">=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>
    <span class="n">order_side</span> <span class="o">=</span> <span class="s">"buy"</span> <span class="c1"># buy or sell
</span>    <span class="n">orders</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_derivative_orders</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span> <span class="n">order_side</span><span class="o">=</span><span class="n">order_side</span><span class="p">,</span> <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">derivativeExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/derivative_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">derivativeExchangePB</span><span class="o">.</span><span class="n">OrdersRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span> <span class="n">marketId</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetDerivativeOrders</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>No</td>
</tr>
<tr>
<td>order_side</td>
<td>string</td>
<td>Filter by order side (Should be one of: [buy sell])</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-orders-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xeb650941906fe707534a70979c43714c0ca703b0d02e450a9f25bbe302419fc9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"507634400000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39048800000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unfilled_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1616059590812</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xbdb49ed59947cdce7544aa8d983b77f76e50177cc4287a6136bee8f16deb4bd2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500714162000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38516474000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unfilled_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1616059590812</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orders</td>
<td>Array of DerivativeLimitOrder</td>
<td>List of derivative market orders</td>
</tr>
</tbody></table>

<p>DerivativeLimitOrder:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>Fee recipient address</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>Hash of the order</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the order</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>Order state (Should be one of: [booked partial_filled filled canceled])</td>
</tr>
<tr>
<td>trigger_price</td>
<td>string</td>
<td>Trigger price is the trigger price used by stop/take orders</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Derivative Market ID</td>
</tr>
<tr>
<td>created_at</td>
<td>integer</td>
<td>Order committed timestamp in UNIX millis.</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>Price of the order</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccountId that this order belongs to</td>
</tr>
<tr>
<td>updated_at</td>
<td>integer</td>
<td>Order updated timestamp in UNIX millis.</td>
</tr>
<tr>
<td>is_reduce_only</td>
<td>boolean</td>
<td>True if the order is a reduce-only order</td>
</tr>
<tr>
<td>margin</td>
<td>string</td>
<td>Margin of the order</td>
</tr>
<tr>
<td>order_side</td>
<td>string</td>
<td>The type of the order (Should be one of: [buy sell stop_buy stop_sell take_buy take_sell])</td>
</tr>
<tr>
<td>unfilled_quantity</td>
<td>string</td>
<td>The amount of the quantity remaining unfilled</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-streamorders'>StreamOrders</h2>
<p>Stream order updates of a derivative market.</p>
<h3 id='injectivederivativeexchangerpc-streamorders-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>
    <span class="n">order_side</span> <span class="o">=</span> <span class="s">"buy"</span> <span class="c1"># buy or sell
</span>    <span class="n">orders</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_derivative_orders</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span> <span class="n">order_side</span><span class="o">=</span><span class="n">order_side</span><span class="p">,</span> <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="n">orders</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">order</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">derivativeExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/derivative_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0x7453466968297ccaf24f78deb674ad54f9b86697000000000000000000000000"</span>
  <span class="n">orderSide</span> <span class="o">:=</span> <span class="s">"buy"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">derivativeExchangePB</span><span class="o">.</span><span class="n">StreamOrdersRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="n">subaccountId</span><span class="p">,</span>
    <span class="n">OrderSide</span><span class="o">:</span>    <span class="n">orderSide</span><span class="p">,</span>
  <span class="p">}</span>
  <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamDerivativeOrders</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">{</span>
    <span class="k">select</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
      <span class="k">return</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
<tr>
<td>order_side</td>
<td>string</td>
<td>Filter by order side (Should be one of: [buy sell])</td>
<td>No</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-streamorders-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Streaming Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xeb650941906fe707534a70979c43714c0ca703b0d02e450a9f25bbe302419fc9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"507634400000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39048800000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unfilled_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1616059590812</span><span class="p">,</span><span class="w">
</span><span class="p">},</span><span class="w">
  </span><span class="nl">"operation_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634815592000</span><span class="p">,</span><span class="w">

</span><span class="nl">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xbdb49ed59947cdce7544aa8d983b77f76e50177cc4287a6136bee8f16deb4bd2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500714162000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38516474000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unfilled_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1616059590812</span><span class="w">
</span><span class="p">},</span><span class="w">
  </span><span class="nl">"operation_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634815592000</span><span class="p">,</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order</td>
<td>DerivativeLimitOrder</td>
<td>Array of DerivativeLimitOrder</td>
</tr>
<tr>
<td>operation_type</td>
<td>string</td>
<td>Order update type (Should be one of: [insert delete replace update invalidate])</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Operation timestamp in UNIX millis</td>
</tr>
</tbody></table>

<p><strong>DerivativeLimitOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>Fee recipient address</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>Hash of the order</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the order</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>Order state (Should be one of: [booked partial_filled filled canceled])</td>
</tr>
<tr>
<td>trigger_price</td>
<td>string</td>
<td>The price used by stop/take orders</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID</td>
</tr>
<tr>
<td>created_at</td>
<td>integer</td>
<td>Order committed timestamp in UNIX millis</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>Price of the order</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID this order belongs to</td>
</tr>
<tr>
<td>updated_at</td>
<td>integer</td>
<td>Order updated timestamp in UNIX millis</td>
</tr>
<tr>
<td>is_reduce_only</td>
<td>boolean</td>
<td>True if the order is a reduce-only order</td>
</tr>
<tr>
<td>margin</td>
<td>string</td>
<td>Margin of the order</td>
</tr>
<tr>
<td>order_side</td>
<td>string</td>
<td>The type of the order (Should be one of: [buy sell stop_buy stop_sell take_buy take_sell])</td>
</tr>
<tr>
<td>unfilled_quantity</td>
<td>string</td>
<td>The amount of the quantity remaining unfilled</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-trades'>Trades</h2>
<p>Get trades of a derivative market.</p>

<p><strong>Trade execution types</strong></p>

<ol>
<li>Market for market orders</li>
<li>limitFill for a resting limit order getting filled by a market order</li>
<li>LimitMatchRestingOrder for a resting limit order getting matched with another new limit order</li>
<li>LimitMatchNewOrder for the other way around (new limit order getting matched)</li>
</ol>
<h3 id='injectivederivativeexchangerpc-trades-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>
    <span class="n">trades</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_derivative_trades</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span> <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">trades</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">spotExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/spot_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">spotExchangePB</span><span class="o">.</span><span class="n">TradesRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="n">subaccountId</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSpotTrades</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>No</td>
</tr>
<tr>
<td>execution_side</td>
<td>string</td>
<td>Filter by the execution side of the trade (Should be one of: [maker taker])</td>
<td>No</td>
</tr>
<tr>
<td>direction</td>
<td>string</td>
<td>Filter by the direction of the trade (Should be one of: [buy sell])</td>
<td>No</td>
</tr>
<tr>
<td>skip</td>
<td>int</td>
<td>Skip the last trades, you can use this to fetch all trades since the API caps at 100</td>
<td>No</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>Limit the trades returned</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-trades-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xfdd7865b3fe35fe986b07fafea8e1c301a9d83f9683542505085eb8730c3a907"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_execution_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limitMatchRestingOrder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"position_delta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trade_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"63003464233.333333333333333333"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"66900442000"</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"payout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65693228106.612872505612710833"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"63003464.233333333333333333"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"executed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634816869894</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x28a99e824c0e19c1bdd63676cfe58f37c018f9db12b9c3e5466c377e1354633c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_execution_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limitMatchRestingOrder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"position_delta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trade_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"63003464233.333333333333333333"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"66576312000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"payout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65693228106.612872505612710833"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"63003464.233333333333333333"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"executed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634816869894</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trades</td>
<td>DerivativeTrade</td>
<td>Array of DerivativeTrade</td>
</tr>
</tbody></table>

<p><strong>DerivativeTrade</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>executed_at</td>
<td>integer</td>
<td>Timestamp of trade execution in UNIX millis</td>
</tr>
<tr>
<td>position_delta</td>
<td>PositionDelta</td>
<td>Array of PositionDelta</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID that executed the trade</td>
</tr>
<tr>
<td>trade_execution_type</td>
<td>string</td>
<td>The execution type of the trade (Should be one of: [market limitFill limitMatchRestingOrder limitMatchNewOrder])</td>
</tr>
<tr>
<td>fee</td>
<td>string</td>
<td>The fee associated with the trade</td>
</tr>
<tr>
<td>is_liquidation</td>
<td>boolean</td>
<td>True if the trade is a liquidation</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The order hash</td>
</tr>
<tr>
<td>payout</td>
<td>string</td>
<td>The payout associated with the trade</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that received 40% of the fees</td>
</tr>
</tbody></table>

<p><strong>PositionDelta</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>execution_price</td>
<td>string</td>
<td>Execution price of the trade</td>
</tr>
<tr>
<td>execution_quantity</td>
<td>string</td>
<td>Execution quantity of the trade</td>
</tr>
<tr>
<td>trade_direction</td>
<td>string</td>
<td>The direction the trade (Should be one of: [buy sell])</td>
</tr>
<tr>
<td>execution_margin</td>
<td>string</td>
<td>Execution margin of the trade</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-streamtrades'>StreamTrades</h2>
<p>Stream trades of a derivative market.</p>

<p><strong>Trade execution types</strong></p>

<ol>
<li>Market for market orders</li>
<li>limitFill for a resting limit order getting filled by a market order</li>
<li>LimitMatchRestingOrder for a resting limit order getting matched with another new limit order</li>
<li>LimitMatchNewOrder for the other way around (new limit order getting matched)</li>
</ol>
<h3 id='injectivederivativeexchangerpc-streamtrades-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>
    <span class="n">trades</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_derivative_trades</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span> <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">trade</span> <span class="ow">in</span> <span class="n">trades</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">trade</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">derivativeExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/derivative_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0x7453466968297ccaf24f78deb674ad54f9b86697000000000000000000000000"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">derivativeExchangePB</span><span class="o">.</span><span class="n">StreamTradesRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="n">subaccountId</span><span class="p">,</span>
  <span class="p">}</span>
  <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamDerivativeTrades</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">{</span>
    <span class="k">select</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
      <span class="k">return</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_ids</td>
<td>array</td>
<td>Filter by an array of market IDs</td>
<td>Conditional</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Conditional</td>
</tr>
<tr>
<td>subaccount_ids</td>
<td>array</td>
<td>Filter by an array of subaccount IDs</td>
<td>Conditional</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>Conditional</td>
</tr>
<tr>
<td>execution_side</td>
<td>string</td>
<td>Filter by the execution side of the trade (Should be one of: [maker taker])</td>
<td>No</td>
</tr>
<tr>
<td>direction</td>
<td>string</td>
<td>Filter by the direction of the trade (Should be one of: [buy sell])</td>
<td>No</td>
</tr>
<tr>
<td>skip</td>
<td>int</td>
<td>Skip the last trades, you can use this to fetch all trades since the API caps at 100</td>
<td>No</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>Limit the trades returned</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-streamtrades-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Streaming Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"trade"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x53940e211d5cd6caa2ea4f9d557c6992a8165ce328e7a3220b4b0e8ae7909897"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_execution_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limitMatchNewOrder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"position_delta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trade_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65765036468.75"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"271119536000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"payout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"249899684995.443928042695147937"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"526120291.75"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"executed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634817291783</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"operation_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"insert"</span><span class="p">,</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634817293000</span><span class="p">,</span><span class="w">

</span><span class="nl">"trade"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x88cc481ff9f0e77a51fd1e829647bad434787080963bf20e275beb692a5d3558"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_execution_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limitMatchNewOrder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"position_delta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trade_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"65765036468.75"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"396570642000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"payout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"374849527493.165892064042721905"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"789180437.625"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"executed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634817291783</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"operation_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"insert"</span><span class="p">,</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634817293000</span><span class="p">,</span><span class="w">
</span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span><span class="w">


</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trade</td>
<td>DerivativeTrade</td>
<td>Array of DerivativeTrade</td>
</tr>
<tr>
<td>operation_type</td>
<td>string</td>
<td>Executed trades update type (Should be one of: [insert invalidate])</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Operation timestamp in UNIX millis</td>
</tr>
</tbody></table>

<p><strong>DerivativeTrade</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>executed_at</td>
<td>integer</td>
<td>Timestamp of trade execution in UNIX millis</td>
</tr>
<tr>
<td>position_delta</td>
<td>PositionDelta</td>
<td>Array of PositionDelta</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID that executed the trade</td>
</tr>
<tr>
<td>trade_execution_type</td>
<td>string</td>
<td>The execution type of the trade (Should be one of: [market limitFill limitMatchRestingOrder limitMatchNewOrder])</td>
</tr>
<tr>
<td>fee</td>
<td>string</td>
<td>The fee associated with the trade</td>
</tr>
<tr>
<td>is_liquidation</td>
<td>boolean</td>
<td>True if the trade is a liquidation</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The order hash</td>
</tr>
<tr>
<td>payout</td>
<td>string</td>
<td>The payout associated with the trade</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that received 40% of the fees</td>
</tr>
</tbody></table>

<p><strong>PositionDelta</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>execution_price</td>
<td>string</td>
<td>Execution price of the trade</td>
</tr>
<tr>
<td>execution_quantity</td>
<td>string</td>
<td>Execution quantity of the trade</td>
</tr>
<tr>
<td>trade_direction</td>
<td>string</td>
<td>The direction the trade (Should be one of: [buy sell])</td>
</tr>
<tr>
<td>execution_margin</td>
<td>string</td>
<td>Execution margin of the trade</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-positions'>Positions</h2>
<p>Get the positions of a market.</p>
<h3 id='injectivederivativeexchangerpc-positions-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>
    <span class="n">positions</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_derivative_positions</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span> <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">positions</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">derivativeExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/derivative_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">derivativeExchangePB</span><span class="o">.</span><span class="n">PositionsRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="n">subaccountId</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetDerivativePositions</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-positions-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"positions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"ticker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC/USDT PERP"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xdffcc8962c7662ba69c3eb2b5ed7c435879e5229000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"long"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.75"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"entry_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34478090933.333333333333333333"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-19949596884"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liquidation_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62324034127"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"64595190000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"aggregate_reduce_only_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"positions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"ticker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC/USDT PERP"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xfdc59dcaa0077fc178bcf12f9d677cbe75511d4a000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"long"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28.35"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"entry_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29450904077.30599647266313933"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-693874107774"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liquidation_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55026715558"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"64595190000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"aggregate_reduce_only_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>positions</td>
<td>DerivativePosition</td>
<td>Array of DerivativePosition</td>
</tr>
</tbody></table>

<p><strong>DerivativePosition</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>direction</td>
<td>string</td>
<td>Direction of the position (Should be one of: [long short])</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID the position belongs to</td>
</tr>
<tr>
<td>ticker</td>
<td>string</td>
<td>Ticker of the derivative market</td>
</tr>
<tr>
<td>aggregate_reduce_only_quantity</td>
<td>string</td>
<td>Aggregate quantity of the reduce-only orders associated with the position</td>
</tr>
<tr>
<td>entry_price</td>
<td>string</td>
<td>Entry price of the position</td>
</tr>
<tr>
<td>liquidation_price</td>
<td>string</td>
<td>Liquidation price of the position</td>
</tr>
<tr>
<td>margin</td>
<td>string</td>
<td>Margin of the position</td>
</tr>
<tr>
<td>mark_price</td>
<td>string</td>
<td>Oracle price of the base asset</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the position</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-streampositions'>StreamPositions</h2>
<p>Stream position updates for a specific market.</p>
<h3 id='injectivederivativeexchangerpc-streampositions-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>
    <span class="n">positions</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_derivative_positions</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span> <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">positions</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">derivativeExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/derivative_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">derivativeExchangePB</span><span class="o">.</span><span class="n">StreamPositionsRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="n">subaccountId</span><span class="p">,</span>
  <span class="p">}</span>
  <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamDerivativePositions</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">{</span>
    <span class="k">select</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
      <span class="k">return</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_ids</td>
<td>array</td>
<td>Filter by an array of subaccount IDs</td>
<td>Conditional</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>Conditional</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-streampositions-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Streaming Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"ticker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC/USDT PERP"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"short"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500.36"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"entry_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"64766166958.497442183360445476"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"31629324725359"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liquidation_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"125469904854"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"64878330000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"aggregate_reduce_only_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634817807000</span><span class="p">,</span><span class="w">

</span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"ticker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC/USDT PERP"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"short"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"500.36"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"entry_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"64705529584.98346944076741553"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"31605881697496"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liquidation_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"125364522799"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"64919990000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"aggregate_reduce_only_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634817814000</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>positions</td>
<td>DerivativePosition</td>
<td>Array of DerivativePosition</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Operation timestamp in UNIX millis</td>
</tr>
</tbody></table>

<p><strong>DerivativePosition</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>direction</td>
<td>string</td>
<td>Direction of the position (Should be one of: [long short])</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID the position belongs to</td>
</tr>
<tr>
<td>ticker</td>
<td>string</td>
<td>Ticker of the derivative market</td>
</tr>
<tr>
<td>aggregate_reduce_only_quantity</td>
<td>string</td>
<td>Aggregate quantity of the reduce-only orders associated with the position</td>
</tr>
<tr>
<td>entry_price</td>
<td>string</td>
<td>Entry price of the position</td>
</tr>
<tr>
<td>liquidation_price</td>
<td>string</td>
<td>Liquidation price of the position</td>
</tr>
<tr>
<td>margin</td>
<td>string</td>
<td>Margin of the position</td>
</tr>
<tr>
<td>mark_price</td>
<td>string</td>
<td>Oracle price of the base asset</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the position</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-orderbook'>Orderbook</h2>
<p>Get the orderbook of a derivative market.</p>
<h3 id='injectivederivativeexchangerpc-orderbook-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">market</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_derivative_orderbook</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">market</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetDerivativeOrderbook</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">marketId</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-orderbook-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"orderbook"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41236062000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.15"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632184552530</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41186284000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.15"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632183950930</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"sells"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"43015302000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.05"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632241829042</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"43141817000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.3"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1632242197021</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orderbook</td>
<td>DerivativeLimitOrderbook</td>
<td>Array of DerivativeLimitOrderbook</td>
</tr>
</tbody></table>

<p><strong>DerivativeLimitOrderbook</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>buys</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
<tr>
<td>sells</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
</tbody></table>

<p><strong>PriceLevel</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the price level</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Price level last updated timestamp in UNIX millis</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>Price number of the price level</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-orderbooks'>Orderbooks</h2>
<p>Get the orderbook for an array of derivative markets.</p>
<h3 id='injectivederivativeexchangerpc-orderbooks-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">market_ids</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span>
        <span class="s">"0x1f73e21972972c69c03fb105a5864592ac2b47996ffea3c500d1ea2d20138717"</span>
    <span class="p">]</span>
    <span class="n">market</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_derivative_orderbooks</span><span class="p">(</span><span class="n">market_ids</span><span class="o">=</span><span class="n">market_ids</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">market</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketIds</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">}</span>
  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetDerivativeOrderbooks</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">marketIds</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_ids</td>
<td>array</td>
<td>Filter by an array of market IDs</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-orderbooks-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"orderbooks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x1f73e21972972c69c03fb105a5864592ac2b47996ffea3c500d1ea2d20138717"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"orderbook"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13107000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1646998496535</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12989000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.8"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1646998520256</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"orderbooks"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"orderbook"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39873942000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1646998535041</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"39752458000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1646998517630</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orderbook</td>
<td>DerivativeLimitOrderbook</td>
<td>Array of DerivativeLimitOrderbook</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
</tr>
</tbody></table>

<p><strong>DerivativeLimitOrderbook</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>buys</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
<tr>
<td>sells</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
</tbody></table>

<p><strong>PriceLevel</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the price level</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Price level last updated timestamp in UNIX millis</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>Price number of the price level</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-streamorderbook'>StreamOrderbook</h2>
<p>Stream orderbook updates for a derivative market.</p>
<h3 id='injectivederivativeexchangerpc-streamorderbook-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">orderbooks</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_derivative_orderbook</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">orderbook</span> <span class="ow">in</span> <span class="n">orderbooks</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">orderbook</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketIds</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">}</span>
  <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamDerivativeOrderbook</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">marketIds</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">{</span>
    <span class="k">select</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
      <span class="k">return</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-streamorderbook-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Streaming Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"orderbook"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40746400000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.12"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642587514374</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40577600000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.15"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642519595487</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sells"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"45976700000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.19"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642754155090</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sells"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642754155090</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"operation_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642754263000</span><span class="p">,</span><span class="w">
</span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>operation_type</td>
<td>string</td>
<td>Order update type (Should be one of: [insert delete replace update invalidate])</td>
</tr>
<tr>
<td>orderbook</td>
<td>DerivativeLimitOrderbook</td>
<td>Array of DerivativeLimitOrderbook</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Operation timestamp in UNIX millis</td>
</tr>
</tbody></table>

<p><strong>DerivativeLimitOrderbook</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>buys</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
<tr>
<td>sells</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
</tbody></table>

<p><strong>PriceLevel</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the price level</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Price level last updated timestamp in UNIX millis</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>Price number of the price level</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-streamorderbooks'>StreamOrderbooks</h2>
<p>Stream orderbook updates for an array of derivative markets.</p>
<h3 id='injectivederivativeexchangerpc-streamorderbooks-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_ids</span> <span class="o">=</span> <span class="p">[</span><span class="s">"0x897519d4cf8c460481638b3ff64871668d0a7f6afea10c1b0a952c0b5927f48f"</span><span class="p">,</span> <span class="s">"0x31200279ada822061217372150d567be124f02df157650395d1d6ce58a8207aa"</span><span class="p">]</span>
    <span class="n">orderbooks</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_derivative_orderbooks</span><span class="p">(</span><span class="n">market_ids</span><span class="o">=</span><span class="n">market_ids</span><span class="p">)</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">orderbook</span> <span class="ow">in</span> <span class="n">orderbooks</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">orderbook</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketIds</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">}</span>
  <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamDerivativeOrderbook</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">marketIds</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">{</span>
    <span class="k">select</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
      <span class="k">return</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_ids</td>
<td>array</td>
<td>Filter by market IDs</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-streamorderbooks-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Streaming Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"orderbook"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"486810000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642519597300</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"buys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"476840000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642519597300</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sells"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"515310000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642754433928</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"sells"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"517680000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642754322373</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"operation_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update"</span><span class="p">,</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642754436000</span><span class="p">,</span><span class="w">
</span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x1c79dac019f73e4060494ab1b4fcba734350656d6fc4d474f6a238c13c6f9ced"</span><span class="w">


</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>operation_type</td>
<td>string</td>
<td>Order update type (Should be one of: [insert delete replace update invalidate])</td>
</tr>
<tr>
<td>orderbook</td>
<td>DerivativeLimitOrderbook</td>
<td>Array of DerivativeLimitOrderbook</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Operation timestamp in UNIX millis</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
</tr>
</tbody></table>

<p><strong>DerivativeLimitOrderbook</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>buys</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
<tr>
<td>sells</td>
<td>PriceLevel</td>
<td>Array of PriceLevel</td>
</tr>
</tbody></table>

<p><strong>PriceLevel</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the price level</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Price level last updated timestamp in UNIX millis</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>Price number of the price level</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-subaccountorderslist'>SubaccountOrdersList</h2>
<p>Get the derivative orders of a specific subaccount.</p>
<h3 id='injectivederivativeexchangerpc-subaccountorderslist-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">orders</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_derivative_subaccount_orders</span><span class="p">(</span><span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span> <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">orders</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">derivativeExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/derivative_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">derivativeExchangePB</span><span class="o">.</span><span class="n">SubaccountOrdersListRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="n">subaccountId</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSubaccountDerivativeOrdersList</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>Yes</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-subaccountorderslist-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xc62f52eb7bfc034c26a0a53f21f8588e27ba9b7daac226aac805ae9dcb2e4ea9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"order_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"unfilled_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booked"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642754699821</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642754699821</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orders</td>
<td>DerivativeLimitOrder</td>
<td>Array of DerivativeLimitOrder</td>
</tr>
</tbody></table>

<p><strong>DerivativeLimitOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>Fee recipient address</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>Hash of the order</td>
</tr>
<tr>
<td>quantity</td>
<td>string</td>
<td>Quantity of the order</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>Order state (Should be one of: [booked partial_filled filled canceled])</td>
</tr>
<tr>
<td>trigger_price</td>
<td>string</td>
<td>The price used by stop/take orders</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID</td>
</tr>
<tr>
<td>created_at</td>
<td>integer</td>
<td>Order committed timestamp in UNIX millis</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>Price of the order</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID this order belongs to</td>
</tr>
<tr>
<td>updated_at</td>
<td>integer</td>
<td>Order updated timestamp in UNIX millis</td>
</tr>
<tr>
<td>is_reduce_only</td>
<td>boolean</td>
<td>True if the order is a reduce-only order</td>
</tr>
<tr>
<td>margin</td>
<td>string</td>
<td>Margin of the order</td>
</tr>
<tr>
<td>order_side</td>
<td>string</td>
<td>The type of the order (Should be one of: [buy sell stop_buy stop_sell take_buy take_sell])</td>
</tr>
<tr>
<td>unfilled_quantity</td>
<td>string</td>
<td>The amount of the quantity remaining unfilled</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-subaccounttradeslist'>SubaccountTradesList</h2>
<p>Get the derivative trades for a specific subaccount.</p>
<h3 id='injectivederivativeexchangerpc-subaccounttradeslist-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">execution_type</span> <span class="o">=</span> <span class="s">"market"</span> <span class="c1"># market, limitFill, limitMatchRestingOrder or limitMatchNewOrder
</span>    <span class="n">direction</span> <span class="o">=</span> <span class="s">"buy"</span> <span class="c1"># buy or sell
</span>    <span class="n">trades</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_derivative_subaccount_trades</span><span class="p">(</span><span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span> <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span> <span class="n">execution_type</span><span class="o">=</span><span class="n">execution_type</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="n">direction</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">trades</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">derivativeExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/derivative_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">derivativeExchangePB</span><span class="o">.</span><span class="n">SubaccountTradesListRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="n">subaccountId</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetSubaccountDerivativeTradesList</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by Subaccount ID</td>
<td>Yes</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by Market ID</td>
<td>No</td>
</tr>
<tr>
<td>direction</td>
<td>string</td>
<td>Filter by the direction of the trades (Should be one of: [buy sell])</td>
<td>No</td>
</tr>
<tr>
<td>execution_type</td>
<td>string</td>
<td>Filter by the execution type of the trades (Should be one of: [market limitFill limitMatchRestingOrder limitMatchNewOrder])</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-subaccounttradeslist-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x86ba61241e10ec8f38ae00c5c7245604716f96894d87c826dc4f64d83b4f5d2c"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_execution_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limitMatchNewOrder"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"position_delta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trade_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40788500000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"586100000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"payout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"489462"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"executed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642585227580</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"order_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x93b6420c81ed82f1c3c1dbcc60afc86efd62a46756b2db81da511c0ae9c3f4a2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"trade_execution_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"position_delta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trade_direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42855400000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.01"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_margin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"166600000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"payout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"514264.8"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"executed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1642584958566</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fee_recipient"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trades</td>
<td>DerivativeTrade</td>
<td>Array of DerivativeTrade</td>
</tr>
</tbody></table>

<p><strong>DerivativeTrade</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>executed_at</td>
<td>integer</td>
<td>Timestamp of trade execution in UNIX millis</td>
</tr>
<tr>
<td>position_delta</td>
<td>PositionDelta</td>
<td>Array of PositionDelta</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID that executed the trade</td>
</tr>
<tr>
<td>trade_execution_type</td>
<td>string</td>
<td>The execution type of the trade (Should be one of: [market limitFill limitMatchRestingOrder limitMatchNewOrder])</td>
</tr>
<tr>
<td>fee</td>
<td>string</td>
<td>The fee associated with the trade</td>
</tr>
<tr>
<td>is_liquidation</td>
<td>boolean</td>
<td>True if the trade is a liquidation</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The order hash</td>
</tr>
<tr>
<td>payout</td>
<td>string</td>
<td>The payout associated with the trade</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that received 40% of the fees</td>
</tr>
</tbody></table>

<p><strong>PositionDelta</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>execution_price</td>
<td>string</td>
<td>Execution price of the trade</td>
</tr>
<tr>
<td>execution_quantity</td>
<td>string</td>
<td>Execution quantity of the trade</td>
</tr>
<tr>
<td>trade_direction</td>
<td>string</td>
<td>The direction the trade (Should be one of: [buy sell])</td>
</tr>
<tr>
<td>execution_margin</td>
<td>string</td>
<td>Execution margin of the trade</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-fundingpayments'>FundingPayments</h2>
<p>Get the funding payments for a subaccount.</p>
<h3 id='injectivederivativeexchangerpc-fundingpayments-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>
    <span class="n">funding</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_funding_payments</span><span class="p">(</span><span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span> <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">funding</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">derivativeExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/derivative_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
  <span class="n">subaccountId</span> <span class="o">:=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">derivativeExchangePB</span><span class="o">.</span><span class="n">FundingPaymentsRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="n">subaccountId</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetDerivativeFundingPayments</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>Filter by subaccount ID</td>
<td>Yes</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>No</td>
</tr>
<tr>
<td>skip</td>
<td>int</td>
<td>Skip the last funding payments, you can use this to fetch all payments since the API caps at 100</td>
<td>No</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>Limit the funding payments returned</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-fundingpayments-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"subaccount_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"79677138"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634515200458</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>The amount of the funding payment</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Operation timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h2 id='injectivederivativeexchangerpc-fundingrates'>FundingRates</h2>
<p>Get the historical funding rates for a specific market.</p>
<h3 id='injectivederivativeexchangerpc-fundingrates-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">skip</span><span class="o">=</span><span class="mi">0</span>
    <span class="n">limit</span><span class="o">=</span><span class="mi">2</span>
    <span class="n">funding_rates</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_funding_rates</span><span class="p">(</span>
        <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
        <span class="n">skip</span><span class="o">=</span><span class="n">skip</span><span class="p">,</span>
        <span class="n">limit</span><span class="o">=</span><span class="n">limit</span>
    <span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">funding_rates</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">derivativeExchangePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/derivative_exchange_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">derivativeExchangePB</span><span class="o">.</span><span class="n">FundingRatesRequest</span><span class="p">{</span>
    <span class="n">MarketId</span><span class="o">:</span> <span class="n">marketId</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetDerivativeFundingRates</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Filter by market ID</td>
<td>Yes</td>
</tr>
<tr>
<td>skip</td>
<td>int</td>
<td>Skip the last funding rates, you can use this to fetch all funding rates since the API caps at 100</td>
<td>No</td>
</tr>
<tr>
<td>limit</td>
<td>int</td>
<td>Limit the funding rates returned</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectivederivativeexchangerpc-fundingrates-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"funding_rates"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00449891062"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1643572800988</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"funding_rates"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-0.03218407323"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1643587201580</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID</td>
</tr>
<tr>
<td>rate</td>
<td>string</td>
<td>The funding rate</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Timestamp in UNIX millis</td>
</tr>
</tbody></table>
<h1 id='injectiveoraclerpc'>- InjectiveOracleRPC</h1>
<p>InjectiveOracleRPC defines the gRPC API of the Exchange Oracle provider.</p>
<h2 id='injectiveoraclerpc-oraclelist'>OracleList</h2>
<p>Get a list with oracles and feeds.</p>
<h3 id='injectiveoraclerpc-oraclelist-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">oracle_list</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_oracle_list</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">oracle_list</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"context"</span>
    <span class="s">"fmt"</span>

    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
    <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
    <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetOracleList</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div><h3 id='injectiveoraclerpc-oraclelist-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"oracles"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADA"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bandibc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.797398"</span><span class="p">,</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"oracles"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AKRO"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bandibc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0333066"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"oracles"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AMPL"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bandibc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.955257"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>oracles</td>
<td>Oracle</td>
<td>Array of Oracle</td>
</tr>
</tbody></table>

<p><strong>Oracle</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>symbol</td>
<td>string</td>
<td>The symbol of the asset</td>
</tr>
<tr>
<td>oracle_type</td>
<td>string</td>
<td>The oracle provider</td>
</tr>
<tr>
<td>price</td>
<td>string</td>
<td>The price of the asset</td>
</tr>
</tbody></table>
<h2 id='injectiveoraclerpc-price'>Price</h2>
<p>Get the oracle price of an asset.</p>
<h3 id='injectiveoraclerpc-price-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">base_symbol</span> <span class="o">=</span> <span class="s">'BTC'</span>
    <span class="n">quote_symbol</span> <span class="o">=</span> <span class="s">'USDT'</span>
    <span class="n">oracle_type</span> <span class="o">=</span> <span class="s">'bandibc'</span>
    <span class="n">oracle_scale_factor</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">oracle_prices</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_oracle_prices</span><span class="p">(</span><span class="n">base_symbol</span><span class="o">=</span><span class="n">base_symbol</span><span class="p">,</span> <span class="n">quote_symbol</span><span class="o">=</span><span class="n">quote_symbol</span><span class="p">,</span> <span class="n">oracle_type</span><span class="o">=</span><span class="n">oracle_type</span><span class="p">,</span> <span class="n">oracle_scale_factor</span><span class="o">=</span><span class="n">oracle_scale_factor</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">oracle_prices</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"context"</span>
    <span class="s">"fmt"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
    <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
    <span class="n">baseSymbol</span> <span class="o">:=</span> <span class="s">"BTC"</span>
    <span class="n">quoteSymbol</span> <span class="o">:=</span> <span class="s">"USDT"</span>
    <span class="n">oracleType</span> <span class="o">:=</span> <span class="s">"BandIBC"</span>
    <span class="n">oracleScaleFactor</span> <span class="o">:=</span> <span class="kt">uint32</span><span class="p">(</span><span class="m">6</span><span class="p">)</span>
    <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetPrice</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">baseSymbol</span><span class="p">,</span> <span class="n">quoteSymbol</span><span class="p">,</span> <span class="n">oracleType</span><span class="p">,</span> <span class="n">oracleScaleFactor</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>base_symbol</td>
<td>string</td>
<td>Oracle base currency</td>
<td>Yes</td>
</tr>
<tr>
<td>quote_symbol</td>
<td>string</td>
<td>Oracle quote currency</td>
<td>Yes</td>
</tr>
<tr>
<td>oracle_type</td>
<td>string</td>
<td>The oracle provider</td>
<td>Yes</td>
</tr>
<tr>
<td>oracle_scale_factor</td>
<td>integer</td>
<td>Oracle scale factor for the quote asset</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectiveoraclerpc-price-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46361990000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>price</td>
<td>string</td>
<td>The price of the oracle asset</td>
</tr>
</tbody></table>
<h2 id='injectiveoraclerpc-streamprices'>StreamPrices</h2>
<p>Stream oracle prices for an asset.</p>
<h3 id='injectiveoraclerpc-streamprices-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">base_symbol</span> <span class="o">=</span> <span class="s">'BTC'</span>
    <span class="n">quote_symbol</span> <span class="o">=</span> <span class="s">'USDT'</span>
    <span class="n">oracle_type</span> <span class="o">=</span> <span class="s">'bandibc'</span>
    <span class="n">oracle_prices</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_oracle_prices</span><span class="p">(</span>
        <span class="n">base_symbol</span><span class="o">=</span><span class="n">base_symbol</span><span class="p">,</span>
        <span class="n">quote_symbol</span><span class="o">=</span><span class="n">quote_symbol</span><span class="p">,</span>
        <span class="n">oracle_type</span><span class="o">=</span><span class="n">oracle_type</span>
    <span class="p">)</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">oracle</span> <span class="ow">in</span> <span class="n">oracle_prices</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">oracle</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"context"</span>
    <span class="s">"fmt"</span>

    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
    <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
    <span class="n">baseSymbol</span> <span class="o">:=</span> <span class="s">"BTC"</span>
    <span class="n">quoteSymbol</span> <span class="o">:=</span> <span class="s">"USDT"</span>
    <span class="n">oracleType</span> <span class="o">:=</span> <span class="s">"BandIBC"</span>
    <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamPrices</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">baseSymbol</span><span class="p">,</span> <span class="n">quoteSymbol</span><span class="p">,</span> <span class="n">oracleType</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">{</span>
        <span class="k">select</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
            <span class="k">return</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
                <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="p">}</span>
            <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>base_symbol</td>
<td>string</td>
<td>Oracle base currency</td>
<td>Yes</td>
</tr>
<tr>
<td>quote_symbol</td>
<td>string</td>
<td>Oracle quote currency</td>
<td>Yes</td>
</tr>
<tr>
<td>oracle_type</td>
<td>string</td>
<td>The oracle provider</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectiveoraclerpc-streamprices-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Streaming Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14.01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1544614248000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>price</td>
<td>string</td>
<td>The price of the oracle asset</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>Operation timestamp in UNIX millis.</td>
</tr>
</tbody></table>
<h1 id='injectiveinsurancerpc'>- InjectiveInsuranceRPC</h1>
<p>InjectiveInsuranceRPC defines the gRPC API of the Insurance Exchange provider.</p>
<h2 id='injectiveinsurancerpc-insurancefunds'>InsuranceFunds</h2>
<p>Get all the insurance funds.</p>
<h3 id='injectiveinsurancerpc-insurancefunds-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">insurance_funds</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_insurance_funds</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">insurance_funds</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>
  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">insurancePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/insurance_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">insurancePB</span><span class="o">.</span><span class="n">FundsRequest</span><span class="p">{}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetInsuranceFunds</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div><h3 id='injectiveinsurancerpc-insurancefunds-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"funds"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_ticker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REP/USDT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xb6174e35c4aae49607d210b85ffb83f1fb3028f8c161a8b99a76f29b689da240"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"deposit_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0x69efCB62D98f4a6ff5a0b0CFaa4AAbB122e85e08"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pool_token_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"share8"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"redemption_notice_period_duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">1209600</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"172000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total_share"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1720000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_base"</span><span class="p">:</span><span class="w"> </span><span class="s2">"REP"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_quote"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coinbase"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"funds"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"market_ticker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC/USDT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"market_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xd0f46edfba58827fe692aab7c8d46395d1696239fdf6aeddfa668b73ca82ea30"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"deposit_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0x69efCB62D98f4a6ff5a0b0CFaa4AAbB122e85e08"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pool_token_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"share1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"redemption_notice_period_duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">1209600</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"178249894780"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total_share"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1758870900000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_base"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_quote"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"oracle_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coinbase"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>funds</td>
<td>InsuranceFund</td>
<td>Array of InsuranceFund</td>
</tr>
</tbody></table>

<p><strong>InsuranceFund</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>oracle_type</td>
<td>string</td>
<td>Oracle Type</td>
</tr>
<tr>
<td>pool_token_denom</td>
<td>string</td>
<td>Pool token denom</td>
</tr>
<tr>
<td>total_share</td>
<td>string</td>
<td>Total share</td>
</tr>
<tr>
<td>balance</td>
<td>string</td>
<td>The balance</td>
</tr>
<tr>
<td>oracle_base</td>
<td>string</td>
<td>Oracle base currency</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>The market ID</td>
</tr>
<tr>
<td>market_ticker</td>
<td>string</td>
<td>Ticker of the derivative market</td>
</tr>
<tr>
<td>oracle_quote</td>
<td>string</td>
<td>Oracle quote currency</td>
</tr>
<tr>
<td>redemption_notice_period_duration</td>
<td>integer</td>
<td>Redemption notice period duration in seconds</td>
</tr>
<tr>
<td>deposit_denom</td>
<td>string</td>
<td>Coin denom used to underwrite the insurance fund</td>
</tr>
</tbody></table>
<h2 id='injectiveinsurancerpc-redemptions'>Redemptions</h2>
<p>Get the pending redemptions.</p>
<h3 id='injectiveinsurancerpc-redemptions-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">redeemer</span> <span class="o">=</span> <span class="s">"inj1gxqdj76ul07w4ujsl8403nhhzyvug2h66qk057"</span>
    <span class="n">redemption_denom</span> <span class="o">=</span> <span class="s">"share2"</span>
    <span class="n">status</span> <span class="o">=</span> <span class="s">"disbursed"</span> <span class="c1"># disbursed or pending
</span>    <span class="n">insurance_redemptions</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_redemptions</span><span class="p">(</span><span class="n">redeemer</span><span class="o">=</span><span class="n">redeemer</span><span class="p">,</span> <span class="n">redemption_denom</span><span class="o">=</span><span class="n">redemption_denom</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">insurance_redemptions</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>
  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
  <span class="n">insurancePB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/insurance_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>

  <span class="n">req</span> <span class="o">:=</span> <span class="n">insurancePB</span><span class="o">.</span><span class="n">RedemptionsRequest</span><span class="p">{}</span>

  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetRedemptions</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>redeemer</td>
<td>string</td>
<td>Filter by account address</td>
<td>No</td>
</tr>
<tr>
<td>redemption_denom</td>
<td>string</td>
<td>Filter by insurance pool denom</td>
<td>No</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Filter by redemption status (Should be one of: [disbursed pending])</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='injectiveinsurancerpc-redemptions-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"redemption_schedules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"redemption_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"disbursed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"redeemer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj17ruhpkury0n9el2azce32cucvgql43eresspnp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"claimable_redemption_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1627450463607000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"redemption_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"redemption_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"share1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"requested_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1626240863607000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disbursed_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disbursed_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disbursed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1627450465211000</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"redemption_schedules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"redemption_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"disbursed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"redeemer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1g6grlgchxw95mxc5c3949ygw75hqpghqhgkj0k"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"claimable_redemption_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1628874830848000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"redemption_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"960000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"redemption_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"share1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"requested_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1627665230848000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disbursed_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4800000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disbursed_denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"disbursed_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1628874832996000</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>redemption_schedules</td>
<td>RedemptionSchedule</td>
<td>Array of RedemptionSchedule</td>
</tr>
</tbody></table>

<p><strong>RedemptionSchedule</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>claimable_redemption_time</td>
<td>integer</td>
<td>Claimable redemption time in seconds</td>
</tr>
<tr>
<td>redeemer</td>
<td>string</td>
<td>Account address of the redemption owner</td>
</tr>
<tr>
<td>redemption_denom</td>
<td>string</td>
<td>Pool token denom being redeemed</td>
</tr>
<tr>
<td>requested_at</td>
<td>integer</td>
<td>Redemption request time in unix milliseconds</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Status of the redemption (Should be one of: [disbursed pending])</td>
</tr>
<tr>
<td>redemption_amount</td>
<td>string</td>
<td>Amount of pool tokens being redeemed</td>
</tr>
<tr>
<td>redemption_id</td>
<td>integer</td>
<td>Redemption ID</td>
</tr>
<tr>
<td>disbursed_amount</td>
<td>string</td>
<td>Amount of quote tokens disbursed</td>
</tr>
<tr>
<td>disbursed_at</td>
<td>integer</td>
<td>Redemption disbursement time in unix milliseconds</td>
</tr>
<tr>
<td>disbursed_denom</td>
<td>string</td>
<td>Denom of the quote tokens disbursed</td>
</tr>
</tbody></table>
<h1 id='injectiveauctionrpc'>- InjectiveAuctionRPC</h1>
<p>InjectiveAuctionRPC defines the gRPC API of the Auction provider.</p>
<h2 id='injectiveauctionrpc-auction'>Auction</h2>
<p>Get the details of a specific auction.</p>
<h3 id='injectiveauctionrpc-auction-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">action_round</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="n">auction</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_auction</span><span class="p">(</span><span class="n">bid_round</span><span class="o">=</span><span class="n">action_round</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">auction</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">round</span> <span class="o">:=</span> <span class="kt">int64</span><span class="p">(</span><span class="m">35</span><span class="p">)</span>
  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetAuction</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">round</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>bid_round</td>
<td>int</td>
<td>The auction round</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectiveauctionrpc-auction-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"auction"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"winner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"basket"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"300100663"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"basket"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8084075059004"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"winning_bid_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"round"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
  </span><span class="nl">"end_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1639999020325</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1639999022779</span><span class="p">,</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"bidder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1640000366576</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>auction</td>
<td>Auction</td>
<td>Array of Auction</td>
</tr>
<tr>
<td>bids</td>
<td>Bids</td>
<td>Array of Bids</td>
</tr>
</tbody></table>

<p><strong>Auction</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>winner</td>
<td>string</td>
<td>The Injective Chain address with the highest bid</td>
</tr>
<tr>
<td>basket</td>
<td>Basket</td>
<td>Array of Basket</td>
</tr>
<tr>
<td>winning_bid_amount</td>
<td>string</td>
<td>The highest bid</td>
</tr>
<tr>
<td>round</td>
<td>integer</td>
<td>The auction round</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>integer</td>
<td>The auction&#39;s ending timestamp</td>
</tr>
<tr>
<td>updated_at</td>
<td>integer</td>
<td>The timestamp of the last submitted bid</td>
</tr>
</tbody></table>

<p><strong>Bids</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bidder</td>
<td>string</td>
<td>The Injective Chain address</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>The bid amount</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>The timestamp at which the bid was submitted</td>
</tr>
</tbody></table>

<p><strong>Basket</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>denom</td>
<td>string</td>
<td>Token denominator</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>Token quantity</td>
</tr>
</tbody></table>
<h2 id='injectiveauctionrpc-auctions'>Auctions</h2>
<p>Get the details of previous auctions.</p>

<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">auctions</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_auctions</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">auctions</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetAuctions</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div><h3 id='injectiveauctionrpc-auctions-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"auctions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"winner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"basket"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"300100663"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"basket"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8084075059004"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"winning_bid_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000000"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"round"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
  </span><span class="nl">"end_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1639999020325</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1639999022779</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"auctions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"basket"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"18930656"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"basket"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"denom"</span><span class="p">:</span><span class="w"> </span><span class="s2">"peggy0xdAC17F958D2ee523a2206206994597C13D831ec7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"404428070978"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"round"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w">
  </span><span class="nl">"end_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1640000820966</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1640000824348</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>auction</td>
<td>Auction</td>
<td>Array of Auction</td>
</tr>
<tr>
<td>bids</td>
<td>Bids</td>
<td>Array of Bids</td>
</tr>
</tbody></table>

<p><strong>Auction</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>winner</td>
<td>string</td>
<td>The Injective Chain address with the highest bid</td>
</tr>
<tr>
<td>basket</td>
<td>Basket</td>
<td>Array of Basket</td>
</tr>
<tr>
<td>winning_bid_amount</td>
<td>string</td>
<td>The highest bid</td>
</tr>
<tr>
<td>round</td>
<td>integer</td>
<td>The auction round</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>integer</td>
<td>The auction&#39;s ending timestamp</td>
</tr>
<tr>
<td>updated_at</td>
<td>integer</td>
<td>The timestamp of the last submitted bid</td>
</tr>
</tbody></table>

<p><strong>Bids</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bidder</td>
<td>string</td>
<td>The Injective Chain address</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>The bid amount</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>The timestamp at which the bid was submitted</td>
</tr>
</tbody></table>

<p><strong>Basket</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>denom</td>
<td>string</td>
<td>Token denominator</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>Token quantity</td>
</tr>
</tbody></table>
<h2 id='injectiveauctionrpc-streambids'>StreamBids</h2>
<p>Stream live updates for auction bids.</p>

<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">bids</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_bids</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">bid</span> <span class="ow">in</span> <span class="n">bids</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">bid</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>

  <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamBids</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">{</span>
    <span class="k">select</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
      <span class="k">return</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
      <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span>
      <span class="p">}</span>
      <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div><h3 id='injectiveauctionrpc-streambids-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"bidder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1pn252r3a45urd3n8v84kyey4kcv4544zj70wkp"</span><span class="p">,</span><span class="w">
</span><span class="nl">"bid_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000000000000000000"</span><span class="p">,</span><span class="w">
</span><span class="nl">"round"</span><span class="p">:</span><span class="w"> </span><span class="mi">69</span><span class="p">,</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1638401749218</span><span class="p">,</span><span class="w">

</span><span class="nl">"bidder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span><span class="p">,</span><span class="w">
</span><span class="nl">"bid_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2000000000000000000"</span><span class="p">,</span><span class="w">
</span><span class="nl">"round"</span><span class="p">:</span><span class="w"> </span><span class="mi">69</span><span class="p">,</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1638401841673</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>bidder</td>
<td>string</td>
<td>The Injective Chain address</td>
</tr>
<tr>
<td>bid_amount</td>
<td>string</td>
<td>Bid quantity</td>
</tr>
<tr>
<td>round</td>
<td>integer</td>
<td>The auction round</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>The timestamp at which the bid was submitted</td>
</tr>
</tbody></table>
<h1 id='injectiveexplorerrpc'>- InjectiveExplorerRPC</h1>
<p>InjectiveExplorerRPC defines the gRPC API of the Explorer provider.</p>
<h2 id='injectiveexplorerrpc-gettxbyhash'>GetTxByHash</h2>
<p>Get the details for a specific transaction.</p>
<h3 id='injectiveexplorerrpc-gettxbyhash-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">tx_hash</span> <span class="o">=</span> <span class="s">"CF241CAACFA434DBC38645441FA330743C0F5BEB413FDE6DFCE6082EEB3E3D27"</span>
    <span class="n">account</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_tx_by_hash</span><span class="p">(</span><span class="n">tx_hash</span><span class="o">=</span><span class="n">tx_hash</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">account</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"context"</span>
  <span class="s">"fmt"</span>

  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
  <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
  <span class="n">hash</span> <span class="o">:=</span> <span class="s">"E5DCF04CC670A0567F58683409F7DAFC49754278DAAD507FE6EB40DFBFD71830"</span>
  <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetTxByTxHash</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">hash</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>tx_hash</td>
<td>string</td>
<td>The transaction hash</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='injectiveexplorerrpc-gettxbyhash-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"block_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">11267326</span><span class="p">,</span><span class="w">
</span><span class="nl">"block_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-14 22:46:46.236 +0000 UTC"</span><span class="p">,</span><span class="w">
</span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xcf241caacfa434dbc38645441fa330743c0f5beb413fde6dfce6082eeb3e3d27"</span><span class="p">,</span><span class="w">
</span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"</span><span class="se">\n</span><span class="s2">|</span><span class="se">\n</span><span class="s2">4/injective.exchange.v1beta1.MsgCreateSpotMarketOrder</span><span class="se">\0</span><span class="s2">22D</span><span class="se">\n</span><span class="s2">B0xbe0a8f656c8cb5619b4b76e3884ef6db85fd00802879494ea9bba40f408a3945"</span><span class="p">,</span><span class="w">
</span><span class="nl">"gas_wanted"</span><span class="p">:</span><span class="w"> </span><span class="mi">120072</span><span class="p">,</span><span class="w">
</span><span class="nl">"gas_used"</span><span class="p">:</span><span class="w"> </span><span class="mi">90395</span><span class="p">,</span><span class="w">
</span><span class="nl">"tx_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"injective"</span><span class="p">,</span><span class="w">
</span><span class="nl">"messages"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[{</span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">/injective.exchange.v1beta1.MsgCreateSpotMarketOrder</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">value</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">sender</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">order</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">market_id</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">0x01edfab47f124748dc89998eb33144af734484ba07099014594321729a0ca16b</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">order_info</span><span class="se">\"</span><span class="s2">:{</span><span class="se">\"</span><span class="s2">subaccount_id</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">0xc6fe5d33615a1c52c08018c47e8bc53646a0e101000000000000000000000000</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">fee_recipient</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">price</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">0.000000000317140000</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">quantity</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">40000000000000000000.000000000000000000</span><span class="se">\"</span><span class="s2">},</span><span class="se">\"</span><span class="s2">order_type</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">BUY</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">trigger_price</span><span class="se">\"</span><span class="s2">:null}}}]"</span><span class="p">,</span><span class="w">
</span><span class="nl">"signatures"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"pubkey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"injvalcons1cml96vmptgw99syqrrz8az79xer2pcgpvgp7ex"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inj1cml96vmptgw99syqrrz8az79xer2pcgp0a885r"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sequence"</span><span class="p">:</span><span class="w"> </span><span class="mi">5367952</span><span class="p">,</span><span class="w">
  </span><span class="nl">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wu7hFy9d3af86V4GnhsNArq8PmZA2PhHiAgSS3XedTZI4wU5WVj+PrZYf6E7ugsJ4DsXxHQ5mMH202oShjMAcwA="</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>block_number</td>
<td>int</td>
<td>The block at which the transaction was executed</td>
</tr>
<tr>
<td>block_timestamp</td>
<td>string</td>
<td>The timestamp of the block</td>
</tr>
<tr>
<td>hash</td>
<td>string</td>
<td>The transaction hash</td>
</tr>
<tr>
<td>data</td>
<td>bytes</td>
<td>The raw data in bytes</td>
</tr>
<tr>
<td>gas_wanted</td>
<td>int</td>
<td>The gas wanted for this transaction</td>
</tr>
<tr>
<td>gas_used</td>
<td>int</td>
<td>The actual gas paid for this transaction</td>
</tr>
<tr>
<td>tx_type</td>
<td>string</td>
<td>The transaction type</td>
</tr>
<tr>
<td>messages</td>
<td>string</td>
<td>The messages included in this transaction</td>
</tr>
<tr>
<td>pubkey</td>
<td>string</td>
<td>The public key of the block proposer</td>
</tr>
<tr>
<td>address</td>
<td>string</td>
<td>The transaction sender address</td>
</tr>
<tr>
<td>sequence</td>
<td>int</td>
<td>The sequence number of the sender&#39;s address</td>
</tr>
<tr>
<td>signature</td>
<td>string</td>
<td>The signature</td>
</tr>
</tbody></table>
<h1 id='injectivemetarpc'>- InjectiveMetaRPC</h1>
<p>InjectiveMetaRPC defines the gRPC API of the Exchange Meta provider.</p>
<h2 id='injectivemetarpc-ping'>Ping</h2>
<p>Get the server health.</p>

<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">ping</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Health OK?'</span><span class="p">,</span> <span class="n">resp</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"context"</span>
    <span class="s">"fmt"</span>

    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
    <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
    <span class="n">metaPB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/meta_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>

    <span class="n">req</span> <span class="o">:=</span> <span class="n">metaPB</span><span class="o">.</span><span class="n">PingRequest</span><span class="p">{}</span>

    <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">Ping</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="s2">"Health OK?"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='injectivemetarpc-version'>Version</h2>
<p>Get the server version.</p>

<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">version</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"context"</span>
    <span class="s">"fmt"</span>

    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
    <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
    <span class="n">metaPB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/meta_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>

    <span class="n">req</span> <span class="o">:=</span> <span class="n">metaPB</span><span class="o">.</span><span class="n">VersionRequest</span><span class="p">{}</span>

    <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetVersion</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
</span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BuildDate"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20211106-1852"</span><span class="p">,</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GitCommit"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2705336"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GoArch"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"amd64"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GoVersion"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"go1.17.2"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='injectivemetarpc-info'>Info</h2>
<p>Get the server information.</p>

<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">time</span>

<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">info</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'[!] Info:'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>

    <span class="n">latency</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span> <span class="o">-</span> <span class="n">resp</span><span class="p">.</span><span class="n">timestamp</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">'Server Latency: </span><span class="si">{</span><span class="n">latency</span><span class="si">}</span><span class="s">ms'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"context"</span>
    <span class="s">"fmt"</span>

    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
    <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
    <span class="n">metaPB</span> <span class="s">"github.com/InjectiveLabs/sdk-go/exchange/meta_rpc/pb"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>

    <span class="n">req</span> <span class="o">:=</span> <span class="n">metaPB</span><span class="o">.</span><span class="n">InfoRequest</span><span class="p">{}</span>

    <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">GetInfo</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">req</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"[!] Info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636235761154</span><span class="p">,</span><span class="w">
</span><span class="nl">"server_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636235762168</span><span class="p">,</span><span class="w">
</span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
</span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BuildDate"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20211106-1852"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GitCommit"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2705336"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GoArch"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"amd64"</span><span class="w">
</span><span class="p">},</span><span class="w">
</span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GoVersion"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"go1.17.2"</span><span class="w">
</span><span class="p">},</span><span class="w">

</span><span class="nl">"Server Latency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"822ms"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='injectivemetarpc-streamkeepalive'>StreamKeepAlive</h2>
<p>Subscribe to a stream and gracefully disconnect and connect to another sentry node if the primary becomes unavailable.</p>

<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="kn">import</span> <span class="nn">asyncio</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="n">task1</span> <span class="o">=</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">get_markets</span><span class="p">(</span><span class="n">client</span><span class="p">))</span>
    <span class="n">task2</span> <span class="o">=</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">keepalive</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="p">[</span><span class="n">task1</span><span class="p">]))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">gather</span><span class="p">(</span>
            <span class="n">task1</span><span class="p">,</span>
            <span class="n">task2</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">CancelledError</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"main(): get_markets is cancelled now"</span><span class="p">)</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">get_markets</span><span class="p">(</span><span class="n">client</span><span class="p">):</span>
    <span class="n">stream</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_spot_markets</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">market</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">market</span><span class="p">)</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">keepalive</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">tasks</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="n">stream</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">stream_keepalive</span><span class="p">()</span>
    <span class="k">async</span> <span class="k">for</span> <span class="n">announce</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">announce</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
            <span class="n">task</span><span class="p">.</span><span class="n">cancel</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'Cancelled all tasks'</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"context"</span>
    <span class="s">"fmt"</span>

    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
    <span class="n">exchangeclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/exchange"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">//network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">exchangeClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeclient</span><span class="o">.</span><span class="n">NewExchangeClient</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeGrpcEndpoint</span><span class="p">,</span> <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ExchangeTlsCert</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>

    <span class="n">stream</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">exchangeClient</span><span class="o">.</span><span class="n">StreamKeepalive</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">{</span>
        <span class="k">select</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">&lt;-</span><span class="n">ctx</span><span class="o">.</span><span class="n">Done</span><span class="p">()</span><span class="o">:</span>
            <span class="k">return</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="n">res</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Recv</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
                <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="p">}</span>
            <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shutdown"</span><span class="p">,</span><span class="w">
</span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1636236225847</span><span class="p">,</span><span class="w">

</span><span class="s2">"Cancelled all tasks"</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div><h1 id='chain-api'>Chain API</h1><h1 id='derivatives'>- Derivatives</h1>
<p>Includes all messages related to derivative markets.</p>
<h2 id='derivatives-msgcreatederivativemarketorder'>MsgCreateDerivativeMarketOrder</h2><h3 id='derivatives-msgcreatederivativemarketorder-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">fee_recipient</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgCreateDerivativeMarketOrder</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
        <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
        <span class="n">price</span><span class="o">=</span><span class="mi">50000</span><span class="p">,</span>
        <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">leverage</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">sim_res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">simRes</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">data</span><span class="p">,</span> <span class="n">simulation</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"simulation msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">sim_res_msg</span><span class="p">)</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">simRes</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">cosmtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="s">"github.com/shopspring/decimal"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">defaultSubaccountID</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">senderAddress</span><span class="p">)</span>

    <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">amount</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">0.01</span><span class="p">)</span>
    <span class="n">price</span> <span class="o">:=</span> <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"33000000000"</span><span class="p">)</span> <span class="c">//33,000</span>
    <span class="n">leverage</span> <span class="o">:=</span> <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"2.5"</span><span class="p">)</span>

    <span class="n">order</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">DerivativeOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_SELL</span><span class="p">,</span> <span class="c">//BUY SELL</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">amount</span><span class="p">,</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">price</span><span class="p">,</span>
        <span class="n">Leverage</span><span class="o">:</span>     <span class="n">leverage</span><span class="p">,</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
        <span class="n">IsReduceOnly</span><span class="o">:</span> <span class="no">true</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgCreateDerivativeMarketOrder</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Order</span> <span class="o">=</span> <span class="n">exchangetypes</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">(</span><span class="o">*</span><span class="n">order</span><span class="p">)</span>

    <span class="n">simRes</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SimulateMsg</span><span class="p">(</span><span class="n">clientCtx</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">simResMsgs</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">MsgResponse</span><span class="p">(</span><span class="n">simRes</span><span class="o">.</span><span class="n">Result</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>
    <span class="n">msgCreateDerivativeMarketOrderResponse</span> <span class="o">:=</span> <span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgCreateDerivativeMarketOrderResponse</span><span class="p">{}</span>
    <span class="n">msgCreateDerivativeMarketOrderResponse</span><span class="o">.</span><span class="n">Unmarshal</span><span class="p">(</span><span class="n">simResMsgs</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"simulated order hash"</span><span class="p">,</span> <span class="n">msgCreateDerivativeMarketOrderResponse</span><span class="o">.</span><span class="n">OrderHash</span><span class="p">)</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>leverage</td>
<td>float</td>
<td>The leverage factor for the order</td>
<td>No</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
<tr>
<td>is_reduce_only</td>
<td>boolean</td>
<td>Set to true or false for reduce-only or normal orders respectively</td>
<td>No</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"simulation msg response"</span>
<span class="s">"order_hash"</span><span class="p">:</span> <span class="s">"0x6cc1c3d7653a1b526a332024b12b5e09d0ff306ce842d1ebb3599faff23b06fd"</span><span class="p">,</span>
<span class="s">"tx response"</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"E1C0F4B6C2F0AF2C256373AB648F58E3F63DEA1BCD2EB5AD323002E99DF83B4D"</span><span class="p">,</span>

<span class="s">"tx msg response"</span><span class="p">:</span>
<span class="s">"[]"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3000</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663409</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="n">E1C0F4B6C2F0AF2C256373AB648F58E3F63DEA1BCD2EB5AD323002E99DF83B4D</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3001</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='derivatives-msgcreatederivativelimitorder'>MsgCreateDerivativeLimitOrder</h2><h3 id='derivatives-msgcreatederivativelimitorder-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xd0f46edfba58827fe692aab7c8d46395d1696239fdf6aeddfa668b73ca82ea30"</span>
    <span class="n">fee_recipient</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgCreateDerivativeLimitOrder</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
        <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
        <span class="n">price</span><span class="o">=</span><span class="mf">44054.48</span><span class="p">,</span>
        <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">leverage</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
        <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">is_po</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">is_reduce_only</span><span class="o">=</span><span class="bp">False</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">sim_res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">sim_res</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">data</span><span class="p">,</span> <span class="n">simulation</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"simulation msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">sim_res_msg</span><span class="p">)</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">cosmtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="s">"github.com/shopspring/decimal"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">defaultSubaccountID</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">senderAddress</span><span class="p">)</span>

    <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">amount</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">0.001</span><span class="p">)</span>
    <span class="n">price</span> <span class="o">:=</span> <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"31000000000"</span><span class="p">)</span> <span class="c">//31,000</span>
    <span class="n">leverage</span> <span class="o">:=</span> <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"2.5"</span><span class="p">)</span>

    <span class="n">order</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">DerivativeOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_BUY</span><span class="p">,</span> <span class="c">//BUY SELL BUY_PO SELL_PO</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">amount</span><span class="p">,</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">price</span><span class="p">,</span>
        <span class="n">Leverage</span><span class="o">:</span>     <span class="n">leverage</span><span class="p">,</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
        <span class="n">IsReduceOnly</span><span class="o">:</span> <span class="no">true</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgCreateDerivativeLimitOrder</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Order</span> <span class="o">=</span> <span class="n">exchangetypes</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">(</span><span class="o">*</span><span class="n">order</span><span class="p">)</span>

    <span class="n">simRes</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SimulateMsg</span><span class="p">(</span><span class="n">clientCtx</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">simResMsgs</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">MsgResponse</span><span class="p">(</span><span class="n">simRes</span><span class="o">.</span><span class="n">Result</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>
    <span class="n">msgCreateDerivativeLimitOrderResponse</span> <span class="o">:=</span> <span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgCreateDerivativeLimitOrderResponse</span><span class="p">{}</span>
    <span class="n">msgCreateDerivativeLimitOrderResponse</span><span class="o">.</span><span class="n">Unmarshal</span><span class="p">(</span><span class="n">simResMsgs</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"simulated order hash"</span><span class="p">,</span> <span class="n">msgCreateDerivativeLimitOrderResponse</span><span class="o">.</span><span class="n">OrderHash</span><span class="p">)</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>leverage</td>
<td>float</td>
<td>The leverage factor for the order</td>
<td>No</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
<tr>
<td>is_reduce_only</td>
<td>boolean</td>
<td>Set to true or false for reduce-only or normal orders respectively</td>
<td>No</td>
</tr>
<tr>
<td>is_po</td>
<td>boolean</td>
<td>Set to true or false for post-only or normal orders respectively</td>
<td>No</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"simulation msg response"</span>
<span class="s">"order_hash"</span><span class="p">:</span> <span class="s">"0x0531e3c17cbdc5c535a0a0cfa20d354187ee1256236c3a7d47db227b107aa6dd"</span><span class="p">,</span>
<span class="s">"tx response"</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"95AE4D127F8F6FB4C2ACA0D5063624B124B938B298E4661FB3C5FE1F53A2A90F"</span><span class="p">,</span>

<span class="s">"tx msg response"</span><span class="p">:</span>
<span class="s">"[]"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3000</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663409</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">95</span><span class="n">AE4D127F8F6FB4C2ACA0D5063624B124B938B298E4661FB3C5FE1F53A2A90F</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3001</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='derivatives-msgcancelderivativeorder'>MsgCancelDerivativeOrder</h2><h3 id='derivatives-msgcancelderivativeorder-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xd0f46edfba58827fe692aab7c8d46395d1696239fdf6aeddfa668b73ca82ea30"</span>
    <span class="n">order_hash</span> <span class="o">=</span> <span class="s">"0x7d0b95cfc0fb5901ba4d686060074107eaff6bbcc9eba25823d16fa21508bfeb"</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgCancelDerivativeOrder</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
        <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">order_hash</span><span class="o">=</span><span class="n">order_hash</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgCancelDerivativeOrder</span><span class="p">{</span>
        <span class="n">Sender</span><span class="o">:</span>       <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span>
        <span class="n">SubaccountId</span><span class="o">:</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span>
        <span class="n">OrderHash</span><span class="o">:</span>    <span class="s">"0x8cf97e586c0d84cd7864ccc8916b886557120d84fc97a21ae193b67882835ec5"</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to cancel an order</td>
<td>Yes</td>
</tr>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to cancel an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The hash of a specific order</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code>
<span class="s">"tx response"</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"20A3DC0B931D54DC20991FE2727249DBB2CFB00364C03DAAD4099263871F5D0D"</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3000</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663409</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">20</span><span class="n">A3DC0B931D54DC20991FE2727249DBB2CFB00364C03DAAD4099263871F5D0D</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3001</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='derivatives-msgbatchcreatederivativelimitorders'>MsgBatchCreateDerivativeLimitOrders</h2><h3 id='derivatives-msgbatchcreatederivativelimitorders-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"f9db9bf330e23cb7839039e944adef6e9df447b90b503d5b4464c90bea9022f3"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">fee_recipient</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>

    <span class="n">orders</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">DerivativeOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">41027</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">leverage</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">DerivativeOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">62140</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">is_reduce_only</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">),</span>
    <span class="p">]</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgBatchCreateDerivativeLimitOrders</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">orders</span><span class="o">=</span><span class="n">orders</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">sim_res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">sim_res</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">data</span><span class="p">,</span> <span class="n">simulation</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"simulation msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">sim_res_msg</span><span class="p">)</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span>  <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">cosmtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="s">"github.com/shopspring/decimal"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">defaultSubaccountID</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">senderAddress</span><span class="p">)</span>

    <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">amount</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>
    <span class="n">price</span> <span class="o">:=</span> <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"31000000000"</span><span class="p">)</span> <span class="c">//31,000</span>
    <span class="n">leverage</span> <span class="o">:=</span> <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"2.5"</span><span class="p">)</span>

    <span class="n">order</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">DerivativeOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_BUY</span><span class="p">,</span> <span class="c">//BUY SELL BUY_PO SELL_PO</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">amount</span><span class="p">,</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">price</span><span class="p">,</span>
        <span class="n">Leverage</span><span class="o">:</span>     <span class="n">leverage</span><span class="p">,</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
        <span class="n">IsReduceOnly</span><span class="o">:</span> <span class="no">true</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchCreateDerivativeLimitOrders</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Orders</span> <span class="o">=</span> <span class="p">[]</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">{</span><span class="o">*</span><span class="n">order</span><span class="p">}</span>

    <span class="n">simRes</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SimulateMsg</span><span class="p">(</span><span class="n">clientCtx</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">simResMsgs</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">MsgResponse</span><span class="p">(</span><span class="n">simRes</span><span class="o">.</span><span class="n">Result</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>
    <span class="n">msgBatchCreateDerivativeLimitOrdersResponse</span> <span class="o">:=</span> <span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchCreateDerivativeLimitOrdersResponse</span><span class="p">{}</span>
    <span class="n">msgBatchCreateDerivativeLimitOrdersResponse</span><span class="o">.</span><span class="n">Unmarshal</span><span class="p">(</span><span class="n">simResMsgs</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"simulated order hashes"</span><span class="p">,</span> <span class="n">msgBatchCreateDerivativeLimitOrdersResponse</span><span class="o">.</span><span class="n">OrderHashes</span><span class="p">)</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>orders</td>
<td>DerivativeOrder</td>
<td>Array of DerivativeOrder</td>
<td>Yes</td>
</tr>
</tbody></table>

<p><strong>DerivativeOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>leverage</td>
<td>float</td>
<td>The leverage factor for the order</td>
<td>No</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
<tr>
<td>is_reduce_only</td>
<td>boolean</td>
<td>Set to true or false for reduce-only or normal orders respectively</td>
<td>No</td>
</tr>
<tr>
<td>is_po</td>
<td>boolean</td>
<td>Set to true or false for post-only or normal orders respectively</td>
<td>No</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"The order hashes:  ['0xac3c9bae97a9c3ce57c2f2487be919daa331c29c5017e74df787da0d49a04999', '0x25de3e25526da06014ad81c0bdbba2bff4f0307330c221d9be98e1276aa5b5ff', '0xe24842add4f298ed55def0e07bf448535e3f75efe787b629e7d01e592c53d29a', '0x2c79b71391dceaff5d492577410f20ecf6b7dfccca22aaf25cf978e8551a66cc']"</span>
<span class="s">"simulation msg response"</span><span class="p">:</span>
<span class="p">[</span><span class="s">"order_hashes:"</span> <span class="s">"0xac3c9bae97a9c3ce57c2f2487be919daa331c29c5017e74df787da0d49a04999"</span><span class="p">,</span>
<span class="s">"order_hashes:"</span> <span class="s">"0x25de3e25526da06014ad81c0bdbba2bff4f0307330c221d9be98e1276aa5b5ff"</span><span class="p">,</span>
<span class="s">"order_hashes:"</span> <span class="s">"0xe24842add4f298ed55def0e07bf448535e3f75efe787b629e7d01e592c53d29a"</span><span class="p">,</span>
<span class="s">"order_hashes:"</span> <span class="s">"0x2c79b71391dceaff5d492577410f20ecf6b7dfccca22aaf25cf978e8551a66cc"</span>
<span class="p">]</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3001</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663646</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">544</span><span class="n">C94D1227DE448F6A199642AD7F3AF6712561656499985E37465B58C179F6F</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3002</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='derivatives-msgbatchcancelderivativeorders'>MsgBatchCancelDerivativeOrders</h2><h3 id='derivatives-msgbatchcancelderivativeorders-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xd0f46edfba58827fe692aab7c8d46395d1696239fdf6aeddfa668b73ca82ea30"</span>
    <span class="n">orders</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">OrderData</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">order_hash</span><span class="o">=</span><span class="s">"0xfcbedb1f8135204e7d8b8e6e683042e61834435fb7841b9ef243ef7196ec6938"</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">OrderData</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">order_hash</span><span class="o">=</span><span class="s">"0x0d19f6a10ad017abeac1b14070fec5d044128e40902085654f4da4055a8f6510"</span>
        <span class="p">)</span>
    <span class="p">]</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgBatchCancelDerivativeOrders</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">data</span><span class="o">=</span><span class="n">orders</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">sim_res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">sim_res</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">data</span><span class="p">,</span> <span class="n">simulation</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"simulation msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">sim_res_msg</span><span class="p">)</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">cosmtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">defaultSubaccountID</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">senderAddress</span><span class="p">)</span>

    <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">orderHash</span> <span class="o">:=</span> <span class="s">"0x7b35e8d3c6e5d1210a83615a935a74349c2c8c5e73a591015729adad3c70af2d"</span>

    <span class="n">order</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">OrderCancel</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">OrderCancelData</span><span class="p">{</span>
        <span class="n">MarketId</span><span class="o">:</span>  <span class="n">marketId</span><span class="p">,</span>
        <span class="n">OrderHash</span><span class="o">:</span> <span class="n">orderHash</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchCancelDerivativeOrders</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Data</span> <span class="o">=</span> <span class="p">[]</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderData</span><span class="p">{</span><span class="o">*</span><span class="n">order</span><span class="p">}</span>
    <span class="n">CosMsgs</span> <span class="o">:=</span> <span class="p">[]</span><span class="n">cosmtypes</span><span class="o">.</span><span class="n">Msg</span><span class="p">{</span><span class="n">msg</span><span class="p">}</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">CosMsgs</span><span class="o">...</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>orders</td>
<td>OrderData</td>
<td>Array of OrderData</td>
<td>Yes</td>
</tr>
</tbody></table>

<p><strong>OrderData</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to cancel an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to cancel an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The hash of a specific order</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"simulation msg response"</span>
<span class="s">"success"</span><span class="p">:</span> <span class="s">"true"</span><span class="p">,</span>
<span class="s">"success"</span><span class="p">:</span> <span class="s">"true"</span><span class="p">,</span>
<span class="s">"tx response"</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"03F2EE49F66731C8DA70958093F0EDF24D046EF31AED3A0C79D639D67F7A1ADB"</span><span class="p">,</span>

<span class="s">"tx msg response"</span><span class="p">:</span>
<span class="s">"[]"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3001</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663646</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">03</span><span class="n">F2EE49F66731C8DA70958093F0EDF24D046EF31AED3A0C79D639D67F7A1ADB</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3002</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='derivatives-msgbatchupdateorders'>MsgBatchUpdateOrders</h2>
<p>MsgBatchUpdateOrders allows for the atomic cancellation and creation of spot and derivative limit orders, along with a new order cancellation mode. Upon execution, order cancellations (if any) occur first, followed by order creations (if any).</p>

<p>Users can cancel all limit orders in a given spot or derivative market for a given subaccountID by specifying the associated marketID in the SpotMarketIdsToCancelAll and DerivativeMarketIdsToCancelAll. Users can also cancel individual limit orders in SpotOrdersToCancel or DerivativeOrdersToCancel, but must ensure that marketIDs in these individual order cancellations are not already provided in the SpotMarketIdsToCancelAll or DerivativeMarketIdsToCancelAll.</p>

<p>Further note that if no marketIDs are provided in the SpotMarketIdsToCancelAll or DerivativeMarketIdsToCancelAll, then the SubaccountID in the Msg should be left empty.</p>
<h3 id='derivatives-msgbatchupdateorders-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">fee_recipient</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>

    <span class="n">derivative_market_id_create</span> <span class="o">=</span> <span class="s">"0x7cc8b10d7deb61e744ef83bdec2bbcf4a056867e89b062c6a453020ca82bd4e4"</span>
    <span class="n">spot_market_id_create</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>

    <span class="n">derivative_market_id_cancel</span> <span class="o">=</span> <span class="s">"0x1f73e21972972c69c03fb105a5864592ac2b47996ffea3c500d1ea2d20138717"</span>
    <span class="n">derivative_market_id_cancel_2</span> <span class="o">=</span> <span class="s">"0x8158e603fb80c4e417696b0e98765b4ca89dcf886d3b9b2b90dc15bfb1aebd51"</span>
    <span class="n">spot_market_id_cancel</span> <span class="o">=</span> <span class="s">"0x74b17b0d6855feba39f1f7ab1e8bad0363bd510ee1dcc74e40c2adfe1502f781"</span>
    <span class="n">spot_market_id_cancel_2</span> <span class="o">=</span> <span class="s">"0x01edfab47f124748dc89998eb33144af734484ba07099014594321729a0ca16b"</span>

    <span class="n">spot_market_ids_to_cancel_all</span> <span class="o">=</span><span class="p">[</span><span class="s">'0x28f3c9897e23750bf653889224f93390c467b83c86d736af79431958fff833d1'</span><span class="p">,</span> <span class="s">'0xe8bf0467208c24209c1cf0fd64833fa43eb6e8035869f9d043dbff815ab76d01'</span><span class="p">]</span>
    <span class="n">derivative_market_ids_to_cancel_all</span> <span class="o">=</span> <span class="p">[</span><span class="s">'0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce'</span><span class="p">,</span> <span class="s">'0x979731deaaf17d26b2e256ad18fecd0ac742b3746b9ea5382bac9bd0b5e58f74'</span><span class="p">]</span>

    <span class="n">derivative_orders_to_cancel</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">OrderData</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">derivative_market_id_cancel</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">order_hash</span><span class="o">=</span><span class="s">"0xd6edebb7ea4ce617c2ab30b42c8793260d4d28e1966403b5aca986d7c0349be1"</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">OrderData</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">derivative_market_id_cancel_2</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">order_hash</span><span class="o">=</span><span class="s">"0x7ee76255d7ca763c56b0eab9828fca89fdd3739645501c8a80f58b62b4f76da5"</span>
        <span class="p">)</span>
    <span class="p">]</span>

    <span class="n">spot_orders_to_cancel</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">OrderData</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">spot_market_id_cancel</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">order_hash</span><span class="o">=</span><span class="s">"0x3870fbdd91f07d54425147b1bb96404f4f043ba6335b422a6d494d285b387f2d"</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">OrderData</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">spot_market_id_cancel_2</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">order_hash</span><span class="o">=</span><span class="s">"0x222daa22f60fe9f075ed0ca583459e121c23e64431c3fbffdedda04598ede0d2"</span>
        <span class="p">)</span>
    <span class="p">]</span>

    <span class="n">derivative_orders_to_create</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">DerivativeOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">derivative_market_id_create</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span>
            <span class="n">leverage</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">DerivativeOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">derivative_market_id_create</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span>
            <span class="n">leverage</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">False</span>
        <span class="p">),</span>
    <span class="p">]</span>

    <span class="n">spot_orders_to_create</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">SpotOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">spot_market_id_create</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mi">62</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">SpotOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">spot_market_id_create</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">False</span>
        <span class="p">),</span>
    <span class="p">]</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgBatchUpdateOrders</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">derivative_orders_to_create</span><span class="o">=</span><span class="n">derivative_orders_to_create</span><span class="p">,</span>
        <span class="n">spot_orders_to_create</span><span class="o">=</span><span class="n">spot_orders_to_create</span><span class="p">,</span>
        <span class="n">derivative_orders_to_cancel</span><span class="o">=</span><span class="n">derivative_orders_to_cancel</span><span class="p">,</span>
        <span class="n">spot_orders_to_cancel</span><span class="o">=</span><span class="n">spot_orders_to_cancel</span><span class="p">,</span>
        <span class="n">spot_market_ids_to_cancel_all</span><span class="o">=</span><span class="n">spot_market_ids_to_cancel_all</span><span class="p">,</span>
        <span class="n">derivative_market_ids_to_cancel_all</span><span class="o">=</span><span class="n">derivative_market_ids_to_cancel_all</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">sim_res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">sim_res</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">data</span><span class="p">,</span> <span class="n">simulation</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"simulation msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">sim_res_msg</span><span class="p">)</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">cosmtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="s">"github.com/shopspring/decimal"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">defaultSubaccountID</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">senderAddress</span><span class="p">)</span>

    <span class="n">smarketId</span> <span class="o">:=</span> <span class="s">"0x0511ddc4e6586f3bfe1acb2dd905f8b8a82c97e1edaef654b12ca7e6031ca0fa"</span>
    <span class="n">samount</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>
    <span class="n">sprice</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">22.5</span><span class="p">)</span>
    <span class="n">smarketIds</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">}</span>

    <span class="n">spot_order</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">SpotOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_BUY</span><span class="p">,</span> <span class="c">//BUY SELL BUY_PO SELL_PO</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">samount</span><span class="p">,</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">sprice</span><span class="p">,</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="n">smarketId</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">dmarketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">damount</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">0.01</span><span class="p">)</span>
    <span class="n">dprice</span> <span class="o">:=</span> <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"31000000000"</span><span class="p">)</span> <span class="c">//31,000</span>
    <span class="n">dleverage</span> <span class="o">:=</span> <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"2"</span><span class="p">)</span>
    <span class="n">dmarketIds</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">}</span>

    <span class="n">derivative_order</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">DerivativeOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_BUY</span><span class="p">,</span> <span class="c">//BUY SELL BUY_PO SELL_PO</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">damount</span><span class="p">,</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">dprice</span><span class="p">,</span>
        <span class="n">Leverage</span><span class="o">:</span>     <span class="n">dleverage</span><span class="p">,</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="n">dmarketId</span><span class="p">,</span>
        <span class="n">IsReduceOnly</span><span class="o">:</span> <span class="no">false</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchUpdateOrders</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">SubaccountId</span> <span class="o">=</span> <span class="n">defaultSubaccountID</span><span class="o">.</span><span class="n">Hex</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">SpotOrdersToCreate</span> <span class="o">=</span> <span class="p">[]</span><span class="o">*</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">{</span><span class="n">spot_order</span><span class="p">}</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">DerivativeOrdersToCreate</span> <span class="o">=</span> <span class="p">[]</span><span class="o">*</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">{</span><span class="n">derivative_order</span><span class="p">}</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">SpotMarketIdsToCancelAll</span> <span class="o">=</span> <span class="n">smarketIds</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">DerivativeMarketIdsToCancelAll</span> <span class="o">=</span> <span class="n">dmarketIds</span>

    <span class="n">simRes</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SimulateMsg</span><span class="p">(</span><span class="n">clientCtx</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">simResMsgs</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">MsgResponse</span><span class="p">(</span><span class="n">simRes</span><span class="o">.</span><span class="n">Result</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>
    <span class="n">MsgBatchUpdateOrdersResponse</span> <span class="o">:=</span> <span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchUpdateOrdersResponse</span><span class="p">{}</span>
    <span class="n">MsgBatchUpdateOrdersResponse</span><span class="o">.</span><span class="n">Unmarshal</span><span class="p">(</span><span class="n">simResMsgs</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"simulated spot order hashes"</span><span class="p">,</span> <span class="n">MsgBatchUpdateOrdersResponse</span><span class="o">.</span><span class="n">SpotOrderHashes</span><span class="p">)</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"simulated derivative order hashes"</span><span class="p">,</span> <span class="n">MsgBatchUpdateOrdersResponse</span><span class="o">.</span><span class="n">DerivativeOrderHashes</span><span class="p">)</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID</td>
<td>Conditional</td>
</tr>
<tr>
<td>derivative_orders_to_create</td>
<td>DerivativeOrder</td>
<td>DerivativeOrder object</td>
<td>No</td>
</tr>
<tr>
<td>spot_orders_to_create</td>
<td>SpotOrder</td>
<td>SpotOrder object</td>
<td>No</td>
</tr>
<tr>
<td>derivative_orders_to_cancel</td>
<td>OrderData</td>
<td>OrderData object to cancel</td>
<td>No</td>
</tr>
<tr>
<td>spot_orders_to_cancel</td>
<td>Orderdata</td>
<td>OrderData object to cancel</td>
<td>No</td>
</tr>
<tr>
<td>spot_market_ids_to_cancel_all</td>
<td>array</td>
<td>Spot Market IDs for the markets the trader wants to cancel all active orders</td>
<td>No</td>
</tr>
<tr>
<td>derivative_market_ids_to_cancel_all</td>
<td>array</td>
<td>Derivative Market IDs for the markets the trader wants to cancel all active orders</td>
<td>No</td>
</tr>
</tbody></table>

<p><strong>SpotOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
<tr>
<td>is_po</td>
<td>boolean</td>
<td>Set to true or false for post-only or normal orders respectively</td>
<td>No</td>
</tr>
</tbody></table>

<p><strong>DerivativeOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>leverage</td>
<td>float</td>
<td>The leverage factor for the order</td>
<td>No</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
<tr>
<td>is_reduce_only</td>
<td>boolean</td>
<td>Set to true or false for reduce-only or normal orders respectively</td>
<td>No</td>
</tr>
<tr>
<td>is_po</td>
<td>boolean</td>
<td>Set to true or false for post-only or normal orders respectively</td>
<td>No</td>
</tr>
</tbody></table>

<p><strong>OrderData</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to cancel an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to cancel an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The hash of a specific order</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code>
<span class="s">"simulation msg response"</span>
<span class="s">"spot_cancel_success"</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
<span class="s">"spot_cancel_success"</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
<span class="s">"derivative_cancel_success"</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
<span class="s">"derivative_cancel_success"</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
<span class="s">"spot_order_hashes"</span><span class="p">:</span> <span class="s">"0x7af962ba1880edc4d45fa66b64f169f9f654df0d54fd10a5bd9da0510f4a7727"</span><span class="p">,</span>
<span class="s">"spot_order_hashes"</span><span class="p">:</span> <span class="s">"0x1c400acc9ca1a3f2cb2a98d35bc252753e5931f762b337410750be327189922f"</span><span class="p">,</span>
<span class="s">"derivative_order_hashes"</span><span class="p">:</span> <span class="s">"0x11f3c2aed7ed892a1cbf280534b7b2eaafe0bc7f8078b79e7d2c331b49547d99"</span><span class="p">,</span>
<span class="s">"derivative_order_hashes"</span><span class="p">:</span> <span class="s">""</span><span class="p">,</span>
<span class="s">"tx response"</span>
<span class="s">"height"</span><span class="p">:</span> <span class="mi">64004</span><span class="p">,</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"B8BF33A8E62F4F1C3FA6FA9E84F35CCED44D5D7CF004C058AA2E7FC3F1A9E50A"</span><span class="p">,</span>
<span class="s">"data"</span><span class="p">:</span> <span class="s">"0A8B020A302F696E6A6563746976652E65786368616E67652E763162657461312E4D736742617463685570646174654F726465727312D6010A020100120201001A423078376166393632626131383830656463346434356661363662363466313639663966363534646630643534666431306135626439646130353130663461373732371A4230783163343030616363396361316133663263623261393864333562633235323735336535393331663736326233333734313037353062653332373138393932326622423078313166336332616564376564383932613163626632383035333462376232656161666530626337663830373862373965376432633333316234393534376439392200"</span><span class="p">,</span>
<span class="s">"raw_log"</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">injective.exchange.v1beta1.EventCancelDerivativeOrder</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">market_id</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">0x1f73e21972972c69c03fb105a5864592ac2b47996ffea3c500d1ea2d20138717</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">isLimitCancel</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">true</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">limit_order</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">{</span><span class="se">\\\"</span><span class="s">order_info</span><span class="se">\\\"</span><span class="s">:{</span><span class="se">\\\"</span><span class="s">subaccount_id</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">fee_recipient</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">price</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">20000000.000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">quantity</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">5.000000000000000000</span><span class="se">\\\"</span><span class="s">},</span><span class="se">\\\"</span><span class="s">order_type</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">BUY</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">margin</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">75000000.000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">fillable</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">5.000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">trigger_price</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">0.000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">order_hash</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">cm93WUZipQ+wguDgqjE/3z8WQ4u60rDnMVXHzgtwRoU=</span><span class="se">\\\"</span><span class="s">}</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">market_order_cancel</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">null</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">injective.exchange.v1beta1.EventCancelSpotOrder</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">market_id</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">0x74b17b0d6855feba39f1f7ab1e8bad0363bd510ee1dcc74e40c2adfe1502f781</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">order</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">{</span><span class="se">\\\"</span><span class="s">order_info</span><span class="se">\\\"</span><span class="s">:{</span><span class="se">\\\"</span><span class="s">subaccount_id</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">fee_recipient</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">price</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">0.000000000300000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">quantity</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">5000000000000000000.000000000000000000</span><span class="se">\\\"</span><span class="s">},</span><span class="se">\\\"</span><span class="s">order_type</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">BUY</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">fillable</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">5000000000000000000.000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">trigger_price</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">0.000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">order_hash</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">OxnZVKa7v3wjPKVUVSUHG1CrJFGqJU6HBa9sjf3VdyI=</span><span class="se">\\\"</span><span class="s">}</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/injective.exchange.v1beta1.MsgBatchUpdateOrders</span><span class="se">\"</span><span class="s">}]}]}]"</span><span class="p">,</span>
<span class="s">"logs"</span><span class="p">:</span> <span class="p">{</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"injective.exchange.v1beta1.EventCancelDerivativeOrder"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"market_id"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">0x1f73e21972972c69c03fb105a5864592ac2b47996ffea3c500d1ea2d20138717</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"isLimitCancel"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"true"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"limit_order"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"{</span><span class="se">\"</span><span class="s">order_info</span><span class="se">\"</span><span class="s">:{</span><span class="se">\"</span><span class="s">subaccount_id</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">fee_recipient</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">price</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">20000000.000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">quantity</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">5.000000000000000000</span><span class="se">\"</span><span class="s">},</span><span class="se">\"</span><span class="s">order_type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">BUY</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">margin</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">75000000.000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">fillable</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">5.000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">trigger_price</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">0.000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">order_hash</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">cm93WUZipQ+wguDgqjE/3z8WQ4u60rDnMVXHzgtwRoU=</span><span class="se">\"</span><span class="s">}"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"market_order_cancel"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"null"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"injective.exchange.v1beta1.EventCancelSpotOrder"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"market_id"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">0x74b17b0d6855feba39f1f7ab1e8bad0363bd510ee1dcc74e40c2adfe1502f781</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"order"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"{</span><span class="se">\"</span><span class="s">order_info</span><span class="se">\"</span><span class="s">:{</span><span class="se">\"</span><span class="s">subaccount_id</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">fee_recipient</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">price</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">0.000000000300000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">quantity</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">5000000000000000000.000000000000000000</span><span class="se">\"</span><span class="s">},</span><span class="se">\"</span><span class="s">order_type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">BUY</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">fillable</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">5000000000000000000.000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">trigger_price</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">0.000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">order_hash</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">OxnZVKa7v3wjPKVUVSUHG1CrJFGqJU6HBa9sjf3VdyI=</span><span class="se">\"</span><span class="s">}"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"message"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"action"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"/injective.exchange.v1beta1.MsgBatchUpdateOrders"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="s">"gas_wanted"</span><span class="p">:</span> <span class="mi">202244</span><span class="p">,</span>
<span class="s">"gas_used"</span><span class="p">:</span> <span class="mi">199321</span><span class="p">,</span>

<span class="s">"tx msg response"</span>
<span class="s">"spot_cancel_success"</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
<span class="s">"spot_cancel_success"</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
<span class="s">"derivative_cancel_success"</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
<span class="s">"derivative_cancel_success"</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
<span class="s">"spot_order_hashes"</span><span class="p">:</span> <span class="s">"0x7af962ba1880edc4d45fa66b64f169f9f654df0d54fd10a5bd9da0510f4a7727"</span><span class="p">,</span>
<span class="s">"spot_order_hashes"</span><span class="p">:</span> <span class="s">"0x1c400acc9ca1a3f2cb2a98d35bc252753e5931f762b337410750be327189922f"</span><span class="p">,</span>
<span class="s">"derivative_order_hashes"</span><span class="p">:</span> <span class="s">"0x11f3c2aed7ed892a1cbf280534b7b2eaafe0bc7f8078b79e7d2c331b49547d99"</span><span class="p">,</span>
<span class="s">"derivative_order_hashes"</span><span class="p">:</span> <span class="s">""</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3001</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663646</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="n">B8BF33A8E62F4F1C3FA6FA9E84F35CCED44D5D7CF004C058AA2E7FC3F1A9E50A</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3002</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='derivatives-msgincreasepositionmargin'>MsgIncreasePositionMargin</h2><h3 id='derivatives-msgincreasepositionmargin-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0x0f4209dbe160ce7b09559c69012d2f5fd73070f8552699a9b77aebda16ccdeb1"</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgIncreasePositionMargin</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
        <span class="n">source_subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">destination_subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">amount</span><span class="o">=</span><span class="mi">2</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">cosmtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgIncreasePositionMargin</span><span class="p">{</span>
        <span class="n">Sender</span><span class="o">:</span>                  <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>                <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span>
        <span class="n">SourceSubaccountId</span><span class="o">:</span>      <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span>
        <span class="n">DestinationSubaccountId</span><span class="o">:</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span>
        <span class="n">Amount</span><span class="o">:</span>                  <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"100000000"</span><span class="p">),</span> <span class="c">//100 USDT</span>
    <span class="p">}</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to increase the margin of the position</td>
<td>Yes</td>
</tr>
<tr>
<td>source_subaccount_id</td>
<td>string</td>
<td>The subaccount to send funds from</td>
<td>Yes</td>
</tr>
<tr>
<td>destination_subaccount_id</td>
<td>string</td>
<td>The subaccount to send funds to</td>
<td>Yes</td>
</tr>
<tr>
<td>amount</td>
<td>string</td>
<td>The amount of tokens to be used as additional margin</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"height"</span><span class="p">:</span> <span class="s">"8735988"</span><span class="p">,</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"54AA465B6FEABE1A08BDD0AD156D5FE9E4AE43AF453CE6E5B6449D233BAEA05F"</span><span class="p">,</span>
<span class="s">"data"</span><span class="p">:</span> <span class="s">"0A370A352F696E6A6563746976652E65786368616E67652E763162657461312E4D7367496E637265617365506F736974696F6E4D617267696E"</span><span class="p">,</span>
<span class="s">"raw_log"</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/injective.exchange.v1beta1.MsgIncreasePositionMargin</span><span class="se">\"</span><span class="s">}]}]}]"</span><span class="p">,</span>
<span class="s">"logs"</span><span class="p">:</span> <span class="p">{</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"message"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"action"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"/injective.exchange.v1beta1.MsgIncreasePositionMargin"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="s">"gas_wanted"</span><span class="p">:</span> <span class="s">"200000"</span><span class="p">,</span>
<span class="s">"gas_used"</span><span class="p">:</span> <span class="s">"91580"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3001</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663646</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">54</span><span class="n">AA465B6FEABE1A08BDD0AD156D5FE9E4AE43AF453CE6E5B6449D233BAEA05F</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3002</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>

</code></pre></div><h2 id='derivatives-localorderhashcomputation'>LocalOrderHashComputation</h2>
<p>This function computes order hashes locally for SpotOrder and DerivativeOrder. Note that the subaccount nonce is used as one of the primary parameters to the calculation and is fetched every time from the Chain Node when you call the function. Thus, to use the function properly you must provide all the orders you&#39;ll send in a given block and call it only once per block.</p>

<p>Also note that if any of the orders does not get submitted on-chain either because of low account balance, incorrect order details or any other reason then the subsequent order hashes will be incorrect. That&#39;s because when you post the actual transactions and one of them fails the subaccount nonce won&#39;t be increased so the subsequent order hashes derived from the local calculation will be incorrect.</p>
<h3 id='derivatives-localorderhashcomputation-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>
<span class="kn">from</span> <span class="nn">pyinjective.orderhash</span> <span class="kn">import</span> <span class="n">compute_order_hashes</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">spot_market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">deriv_market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">fee_recipient</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>

    <span class="n">spot_orders</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">SpotOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">spot_market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mf">3.524</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">SpotOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">spot_market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mf">27.92</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">False</span>
        <span class="p">),</span>
    <span class="p">]</span>

    <span class="n">derivative_orders</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">DerivativeOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">deriv_market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">25111</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">leverage</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">False</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">DerivativeOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">deriv_market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">65111</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">leverage</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">is_reduce_only</span><span class="o">=</span><span class="bp">False</span>
        <span class="p">),</span>
    <span class="p">]</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">spot_msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgBatchCreateSpotLimitOrders</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">orders</span><span class="o">=</span><span class="n">spot_orders</span>
    <span class="p">)</span>

    <span class="n">deriv_msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgBatchCreateDerivativeLimitOrders</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">orders</span><span class="o">=</span><span class="n">derivative_orders</span>
    <span class="p">)</span>

    <span class="c1"># compute order hashes
</span>    <span class="n">order_hashes</span> <span class="o">=</span> <span class="n">compute_order_hashes</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">spot_orders</span><span class="o">=</span><span class="n">spot_orders</span><span class="p">,</span> <span class="n">derivative_orders</span><span class="o">=</span><span class="n">derivative_orders</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s">"computed spot order hashes"</span><span class="p">,</span> <span class="n">order_hashes</span><span class="p">.</span><span class="n">spot</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"computed derivative order hashes"</span><span class="p">,</span> <span class="n">order_hashes</span><span class="p">.</span><span class="n">derivative</span><span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">spot_msg</span><span class="p">,</span> <span class="n">deriv_msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span>  <span class="c1"># add 15k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_sync_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"time"</span>
    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
    <span class="n">cosmtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="s">"github.com/shopspring/decimal"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>
    <span class="s">"os"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>
    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c">// build orders</span>
    <span class="n">defaultSubaccountID</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">senderAddress</span><span class="p">)</span>

    <span class="n">spotOrder</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">SpotOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_BUY</span><span class="p">,</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">2</span><span class="p">),</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">22.55</span><span class="p">),</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="s">"0x0511ddc4e6586f3bfe1acb2dd905f8b8a82c97e1edaef654b12ca7e6031ca0fa"</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">derivativeOrder</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">DerivativeOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_BUY</span><span class="p">,</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">2</span><span class="p">),</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"31000000000"</span><span class="p">),</span>
        <span class="n">Leverage</span><span class="o">:</span>     <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"2.5"</span><span class="p">),</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchCreateSpotLimitOrders</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Orders</span> <span class="o">=</span> <span class="p">[]</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">{</span><span class="o">*</span><span class="n">spotOrder</span><span class="p">}</span>

    <span class="n">msg1</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchCreateDerivativeLimitOrders</span><span class="p">)</span>
    <span class="n">msg1</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg1</span><span class="o">.</span><span class="n">Orders</span> <span class="o">=</span> <span class="p">[]</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">{</span><span class="o">*</span><span class="n">derivativeOrder</span><span class="p">,</span> <span class="o">*</span><span class="n">derivativeOrder</span><span class="p">}</span>

    <span class="n">orderHashes</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">ComputeOrderHashes</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">Orders</span><span class="p">,</span> <span class="n">msg1</span><span class="o">.</span><span class="n">Orders</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"computed spot order hashes"</span><span class="p">,</span> <span class="n">orderHashes</span><span class="o">.</span><span class="n">Spot</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"computed derivative order hashes"</span><span class="p">,</span> <span class="n">orderHashes</span><span class="o">.</span><span class="n">Derivative</span><span class="p">)</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">msg1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<p><strong>MsgBatchCreateDerivativeLimitOrders</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>orders</td>
<td>DerivativeOrder</td>
<td>Array of DerivativeOrder</td>
<td>Yes</td>
</tr>
</tbody></table>

<p><strong>DerivativeOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>leverage</td>
<td>float</td>
<td>The leverage factor for the order</td>
<td>No</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
<tr>
<td>is_reduce_only</td>
<td>boolean</td>
<td>Set to true or false for reduce-only or normal orders respectively</td>
<td>No</td>
</tr>
<tr>
<td>is_po</td>
<td>boolean</td>
<td>Set to true or false for post-only or normal orders respectively</td>
<td>No</td>
</tr>
</tbody></table>

<p><strong>MsgBatchCreateSpotLimitOrders</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>orders</td>
<td>SpotOrder</td>
<td>Array of SpotOrder</td>
<td>Yes</td>
</tr>
</tbody></table>

<p><strong>SpotOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
<tr>
<td>is_po</td>
<td>boolean</td>
<td>Set to true or false for post-only or normal orders respectively</td>
<td>No</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="n">computed</span> <span class="n">spot</span> <span class="n">order</span> <span class="n">hashes</span> <span class="p">[</span><span class="s">'0x2d6b636de9dd3c1ed2e94765df558bd87d9b431ae669e248d3e2df607f069fb9'</span><span class="p">,</span> <span class="s">'0xe48258021f295ec61e6d94aeb87615a33221f007555cea29ab64f6be90531878'</span><span class="p">]</span>
<span class="n">computed</span> <span class="n">derivative</span> <span class="n">order</span> <span class="n">hashes</span> <span class="p">[</span><span class="s">'0xb09b98289cec971c7a544c083d5b0aec7ea0c40a09dea330c3dca1ef9edd6a84'</span><span class="p">,</span> <span class="s">'0x76752ee736b60e64ba2bbfb5050ea94988cfd90cf13e1680345c57ac2033967d'</span><span class="p">]</span>
<span class="n">tx</span> <span class="n">response</span>
<span class="n">txhash</span><span class="p">:</span> <span class="s">"577887F6C88F40145F6C443920BA774A8040CF91FCFBC9F7CA836142358289CF"</span>
<span class="n">raw_log</span><span class="p">:</span> <span class="s">"[]"</span>

<span class="n">tx</span> <span class="n">msg</span> <span class="n">response</span>
<span class="p">[]</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">computed</span> <span class="n">spot</span> <span class="n">order</span> <span class="n">hashes</span> <span class="p">[</span><span class="m">0x03b4fc2cfa3f530a435b4ff2c8d27029056aad78ad33d9f7a183fd181bf5071b</span><span class="p">]</span>
<span class="n">computed</span> <span class="n">derivative</span> <span class="n">order</span> <span class="n">hashes</span> <span class="p">[</span><span class="m">0x558167f8457a178b73fda91d4d0a7af9cb68c18f2647674f3c02b0f2dd006806</span> <span class="m">0xce51ad4b43ce098ce2112f194393549c902b1981aeb18262cb521de5ce065798</span><span class="p">]</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3297</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:543"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">4306136</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:564"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">1</span><span class="n">A441B85B7945D9B30805BD6E99B478379B7363960668F9AF6E04238A50E0517</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3298</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:568"</span>
</code></pre></div><h1 id='spot'>- Spot</h1>
<p>Includes all messages related to spot markets.</p>
<h2 id='spot-msgcreatespotmarketorder'>MsgCreateSpotMarketOrder</h2><h3 id='spot-msgcreatespotmarketorder-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">fee_recipient</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgCreateSpotMarketOrder</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
        <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
        <span class="n">price</span><span class="o">=</span><span class="mf">10.522</span><span class="p">,</span>
        <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">sim_res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">sim_res</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">data</span><span class="p">,</span> <span class="n">simulation</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"simulation msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">sim_res_msg</span><span class="p">)</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">cosmtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="s">"github.com/shopspring/decimal"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"sentry0"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">defaultSubaccountID</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">senderAddress</span><span class="p">)</span>

    <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x0511ddc4e6586f3bfe1acb2dd905f8b8a82c97e1edaef654b12ca7e6031ca0fa"</span>
    <span class="n">amount</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">0.1</span><span class="p">)</span>
    <span class="n">price</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">22</span><span class="p">)</span>

    <span class="n">order</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">SpotOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_SELL</span><span class="p">,</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">amount</span><span class="p">,</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">price</span><span class="p">,</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgCreateSpotMarketOrder</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Order</span> <span class="o">=</span> <span class="n">exchangetypes</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">(</span><span class="o">*</span><span class="n">order</span><span class="p">)</span>
    <span class="n">CosMsgs</span> <span class="o">:=</span> <span class="p">[]</span><span class="n">cosmtypes</span><span class="o">.</span><span class="n">Msg</span><span class="p">{</span><span class="n">msg</span><span class="p">}</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">CosMsgs</span><span class="o">...</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"simulation msg response"</span>
<span class="s">"order_hash"</span><span class="p">:</span> <span class="s">"0x61fa86cbc82d6892d066ca340a5e547469a4bd8d00d76cdc05b43e0c37a09505"</span><span class="p">,</span>
<span class="s">"tx response"</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"288403B6A767BC04212234395A6DF935AA6D711E58008391E4A1BF0003F868D1"</span><span class="p">,</span>

<span class="s">"tx msg response"</span><span class="p">:</span>
<span class="s">"[]"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">2998</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663290</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">0</span><span class="n">DF365155E4F57F3413E36D38F467B45B9960EB14DB38CFD5B3EE04E82628438</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">2999</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='spot-msgcreatespotlimitorder'>MsgCreateSpotLimitOrder</h2><h3 id='spot-msgcreatespotlimitorder-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">fee_recipient</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgCreateSpotLimitOrder</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
        <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
        <span class="n">price</span><span class="o">=</span><span class="mf">7.523</span><span class="p">,</span>
        <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">is_po</span><span class="o">=</span><span class="bp">True</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">sim_res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">simRes</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">data</span><span class="p">,</span> <span class="n">simulation</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"simulation msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">sim_res_msg</span><span class="p">)</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">simRes</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="s">"github.com/shopspring/decimal"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">defaultSubaccountID</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">senderAddress</span><span class="p">)</span>

    <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x0511ddc4e6586f3bfe1acb2dd905f8b8a82c97e1edaef654b12ca7e6031ca0fa"</span>

    <span class="n">amount</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>
    <span class="n">price</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">22.55</span><span class="p">)</span>

    <span class="n">order</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">SpotOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_BUY</span><span class="p">,</span> <span class="c">//BUY SELL BUY_PO SELL_PO</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">amount</span><span class="p">,</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">price</span><span class="p">,</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgCreateSpotLimitOrder</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Order</span> <span class="o">=</span> <span class="n">exchangetypes</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">(</span><span class="o">*</span><span class="n">order</span><span class="p">)</span>

    <span class="n">simRes</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SimulateMsg</span><span class="p">(</span><span class="n">clientCtx</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">simResMsgs</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">MsgResponse</span><span class="p">(</span><span class="n">simRes</span><span class="o">.</span><span class="n">Result</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>
    <span class="n">msgCreateSpotLimitOrderResponse</span> <span class="o">:=</span> <span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgCreateSpotLimitOrderResponse</span><span class="p">{}</span>
    <span class="n">msgCreateSpotLimitOrderResponse</span><span class="o">.</span><span class="n">Unmarshal</span><span class="p">(</span><span class="n">simResMsgs</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"simulated order hash"</span><span class="p">,</span> <span class="n">msgCreateSpotLimitOrderResponse</span><span class="o">.</span><span class="n">OrderHash</span><span class="p">)</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
<tr>
<td>is_po</td>
<td>boolean</td>
<td>Set to true or false for post-only or normal orders respectively</td>
<td>No</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"simulation msg response"</span>
<span class="s">"order_hash"</span><span class="p">:</span> <span class="s">"0x6f24ab1a2ae1d772562239146090df0d6a7b6e503296ebbf7fbc9517d607e7b0"</span><span class="p">,</span>
<span class="s">"tx response"</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"E59DD5C4AFF42A55E7864F854EB2163AA178E348C6F258813A5F7CE7FADC9192"</span><span class="p">,</span>

<span class="s">"tx msg response"</span><span class="p">:</span>
<span class="s">"[]"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">2999</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0002</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663350</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">6</span><span class="n">B7C7D1B9E5680351FFAD3C6004141BCD0A99F628490FD01821AD79F65824260</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0002</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3000</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='spot-msgcancelspotorder'>MsgCancelSpotOrder</h2><h3 id='spot-msgcancelspotorder-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">order_hash</span> <span class="o">=</span> <span class="s">"0x9b250eacd9bde566506b811e02847059ba7a5eff54c04ec369f06d2de6b7f8fd"</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgCancelSpotOrder</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
        <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">order_hash</span><span class="o">=</span><span class="n">order_hash</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">simRes</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgCancelSpotOrder</span><span class="p">{</span>
        <span class="n">Sender</span><span class="o">:</span>       <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">,</span>
        <span class="n">SubaccountId</span><span class="o">:</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span>
        <span class="n">OrderHash</span><span class="o">:</span>    <span class="s">"0xc1dd07efb7cf3a90c3d09da958fa22d96a5787eba3dbec56b63902c482accbd4"</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to cancel an order</td>
<td>Yes</td>
</tr>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to cancel an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The hash of a specific order</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"tx response"</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"4E12342489EB934F368855AE2BC8A2860A435D3A5A1F0C0AB5A4AA4DE8F05B0B"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">2999</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0002</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663350</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">4E12342489</span><span class="n">EB934F368855AE2BC8A2860A435D3A5A1F0C0AB5A4AA4DE8F05B0B</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0002</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3000</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='spot-msgbatchcreatespotlimitorders'>MsgBatchCreateSpotLimitOrders</h2><h3 id='spot-msgbatchcreatespotlimitorders-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"f9db9bf330e23cb7839039e944adef6e9df447b90b503d5b4464c90bea9022f3"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">fee_recipient</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>

    <span class="n">orders</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">SpotOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mf">7.523</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">SpotOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mf">27.92</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">False</span>
        <span class="p">),</span>
    <span class="p">]</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgBatchCreateSpotLimitOrders</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">orders</span><span class="o">=</span><span class="n">orders</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">sim_res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">sim_res</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">data</span><span class="p">,</span> <span class="n">simulation</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"simulation msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">sim_res_msg</span><span class="p">)</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span>  <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="s">"github.com/shopspring/decimal"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">defaultSubaccountID</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">senderAddress</span><span class="p">)</span>

    <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x0511ddc4e6586f3bfe1acb2dd905f8b8a82c97e1edaef654b12ca7e6031ca0fa"</span>
    <span class="n">amount</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>
    <span class="n">price</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">22.5</span><span class="p">)</span>

    <span class="n">order</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">SpotOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_BUY</span><span class="p">,</span> <span class="c">//BUY SELL BUY_PO SELL_PO</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">amount</span><span class="p">,</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">price</span><span class="p">,</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="p">})</span>
    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchCreateSpotLimitOrders</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Orders</span> <span class="o">=</span> <span class="p">[]</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">{</span><span class="o">*</span><span class="n">order</span><span class="p">}</span>

    <span class="n">simRes</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SimulateMsg</span><span class="p">(</span><span class="n">clientCtx</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">simResMsgs</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">MsgResponse</span><span class="p">(</span><span class="n">simRes</span><span class="o">.</span><span class="n">Result</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>
    <span class="n">msgBatchCreateSpotLimitOrdersResponse</span> <span class="o">:=</span> <span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchCreateSpotLimitOrdersResponse</span><span class="p">{}</span>
    <span class="n">msgBatchCreateSpotLimitOrdersResponse</span><span class="o">.</span><span class="n">Unmarshal</span><span class="p">(</span><span class="n">simResMsgs</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"simulated order hashes"</span><span class="p">,</span> <span class="n">msgBatchCreateSpotLimitOrdersResponse</span><span class="o">.</span><span class="n">OrderHashes</span><span class="p">)</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>orders</td>
<td>SpotOrder</td>
<td>Array of SpotOrder</td>
<td>Yes</td>
</tr>
</tbody></table>

<p><strong>SpotOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
<tr>
<td>is_po</td>
<td>boolean</td>
<td>Set to true or false for post-only or normal orders respectively</td>
<td>No</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"starting subaccount nonce 2193"</span>
<span class="s">"The order hashes:  ['0x109bd433d44a2a4a771a30b4aa1eccc1d97e02fae064fe2273297893ce39b0cb', '0xc1dd07efb7cf3a90c3d09da958fa22d96a5787eba3dbec56b63902c482accbd4', '0xc1f0e5065d573544705bc13c0809fd2568d231e19c2801fe5878852eb9c8b6e9', '0x18880a54de8d741562e13ad5cf48ce288a20bdd93d8d0a23b0cb5e9d83662efd']"</span>

<span class="s">"simulation msg response"</span><span class="p">:</span>

<span class="p">[</span><span class="s">"order_hashes:"</span> <span class="s">"0x109bd433d44a2a4a771a30b4aa1eccc1d97e02fae064fe2273297893ce39b0cb"</span><span class="p">,</span>
<span class="s">"order_hashes:"</span> <span class="s">"0xc1dd07efb7cf3a90c3d09da958fa22d96a5787eba3dbec56b63902c482accbd4"</span><span class="p">,</span>
<span class="s">"order_hashes:"</span> <span class="s">"0xc1f0e5065d573544705bc13c0809fd2568d231e19c2801fe5878852eb9c8b6e9"</span><span class="p">,</span>
<span class="s">"order_hashes:"</span> <span class="s">"0x18880a54de8d741562e13ad5cf48ce288a20bdd93d8d0a23b0cb5e9d83662efd"</span>
<span class="p">]</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">2999</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0002</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663350</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">597E2</span><span class="n">F021119634B97A82EC3297114B10678D4E3AFB31447C9A8806837222921</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0002</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3000</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='spot-msgbatchcancelspotorders'>MsgBatchCancelSpotOrders</h2><h3 id='spot-msgbatchcancelspotorders-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">orders</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">OrderData</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">order_hash</span><span class="o">=</span><span class="s">"0x3d2750114faabe76c2433fd0eeb1e4e9be771ee3acac63c3689b880fb27227a2"</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">OrderData</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">order_hash</span><span class="o">=</span><span class="s">"0x101ee98abc9a5922689ae070f64fedae78728bf73a822a91498b68793ac7b7e7"</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">OrderData</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">order_hash</span><span class="o">=</span><span class="s">"0x8d4e111127f91011bf77dea8b625948a14c1ae55d8c5d3f5af3dadbd6bec591d"</span>
        <span class="p">)</span>
    <span class="p">]</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgBatchCancelSpotOrders</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">data</span><span class="o">=</span><span class="n">orders</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">sim_res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">sim_res</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">data</span><span class="p">,</span> <span class="n">simulation</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"simulation msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">sim_res_msg</span><span class="p">)</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">cosmtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">defaultSubaccountID</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">senderAddress</span><span class="p">)</span>

    <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">orderHash</span> <span class="o">:=</span> <span class="s">"0x17196096ffc32ad088ef959ad95b4cc247a87c7c9d45a2500b81ab8f5a71da5a"</span>

    <span class="n">order</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">OrderCancel</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">OrderCancelData</span><span class="p">{</span>
        <span class="n">MarketId</span><span class="o">:</span>  <span class="n">marketId</span><span class="p">,</span>
        <span class="n">OrderHash</span><span class="o">:</span> <span class="n">orderHash</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchCancelSpotOrders</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Data</span> <span class="o">=</span> <span class="p">[]</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderData</span><span class="p">{</span><span class="o">*</span><span class="n">order</span><span class="p">}</span>
    <span class="n">CosMsgs</span> <span class="o">:=</span> <span class="p">[]</span><span class="n">cosmtypes</span><span class="o">.</span><span class="n">Msg</span><span class="p">{</span><span class="n">msg</span><span class="p">}</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">CosMsgs</span><span class="o">...</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>orders</td>
<td>OrderData</td>
<td>Array of OrderData</td>
<td>Yes</td>
</tr>
</tbody></table>

<p><strong>OrderData</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to cancel an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to cancel an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The hash of a specific order</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"simulation msg response"</span>
<span class="s">"success"</span><span class="p">:</span> <span class="s">"true"</span><span class="p">,</span>
<span class="s">"success"</span><span class="p">:</span> <span class="s">"true"</span><span class="p">,</span>
<span class="s">"success"</span><span class="p">:</span> <span class="s">"false"</span><span class="p">,</span>
<span class="s">"tx response"</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"24723C0EEF0157EA9C294B2CF66EF1BF97440F3CE965AFE1EC00A226E2EE4A7F"</span><span class="p">,</span>

<span class="s">"tx msg response"</span><span class="p">:</span>
<span class="s">"[]"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3000</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663409</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">24723</span><span class="n">C0EEF0157EA9C294B2CF66EF1BF97440F3CE965AFE1EC00A226E2EE4A7F</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3001</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='spot-msgbatchupdateorders'>MsgBatchUpdateOrders</h2>
<p>MsgBatchUpdateOrders allows for the atomic cancellation and creation of spot and derivative limit orders, along with a new order cancellation mode. Upon execution, order cancellations (if any) occur first, followed by order creations (if any).</p>

<p>Users can cancel all limit orders in a given spot or derivative market for a given subaccountID by specifying the associated marketID in the SpotMarketIdsToCancelAll and DerivativeMarketIdsToCancelAll. Users can also cancel individual limit orders in SpotOrdersToCancel or DerivativeOrdersToCancel, but must ensure that marketIDs in these individual order cancellations are not already provided in the SpotMarketIdsToCancelAll or DerivativeMarketIdsToCancelAll.</p>

<p>Further note that if no marketIDs are provided in the SpotMarketIdsToCancelAll or DerivativeMarketIdsToCancelAll, then the SubaccountID in the Msg should be left empty.</p>
<h3 id='spot-msgbatchupdateorders-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">fee_recipient</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>

    <span class="n">derivative_market_id_create</span> <span class="o">=</span> <span class="s">"0x7cc8b10d7deb61e744ef83bdec2bbcf4a056867e89b062c6a453020ca82bd4e4"</span>
    <span class="n">spot_market_id_create</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>

    <span class="n">derivative_market_id_cancel</span> <span class="o">=</span> <span class="s">"0x1f73e21972972c69c03fb105a5864592ac2b47996ffea3c500d1ea2d20138717"</span>
    <span class="n">derivative_market_id_cancel_2</span> <span class="o">=</span> <span class="s">"0x8158e603fb80c4e417696b0e98765b4ca89dcf886d3b9b2b90dc15bfb1aebd51"</span>
    <span class="n">spot_market_id_cancel</span> <span class="o">=</span> <span class="s">"0x74b17b0d6855feba39f1f7ab1e8bad0363bd510ee1dcc74e40c2adfe1502f781"</span>
    <span class="n">spot_market_id_cancel_2</span> <span class="o">=</span> <span class="s">"0x01edfab47f124748dc89998eb33144af734484ba07099014594321729a0ca16b"</span>

    <span class="n">spot_market_ids_to_cancel_all</span> <span class="o">=</span><span class="p">[</span><span class="s">'0x28f3c9897e23750bf653889224f93390c467b83c86d736af79431958fff833d1'</span><span class="p">,</span> <span class="s">'0xe8bf0467208c24209c1cf0fd64833fa43eb6e8035869f9d043dbff815ab76d01'</span><span class="p">]</span>
    <span class="n">derivative_market_ids_to_cancel_all</span> <span class="o">=</span> <span class="p">[</span><span class="s">'0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce'</span><span class="p">,</span> <span class="s">'0x979731deaaf17d26b2e256ad18fecd0ac742b3746b9ea5382bac9bd0b5e58f74'</span><span class="p">]</span>

    <span class="n">derivative_orders_to_cancel</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">OrderData</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">derivative_market_id_cancel</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">order_hash</span><span class="o">=</span><span class="s">"0xd6edebb7ea4ce617c2ab30b42c8793260d4d28e1966403b5aca986d7c0349be1"</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">OrderData</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">derivative_market_id_cancel_2</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">order_hash</span><span class="o">=</span><span class="s">"0x7ee76255d7ca763c56b0eab9828fca89fdd3739645501c8a80f58b62b4f76da5"</span>
        <span class="p">)</span>
    <span class="p">]</span>

    <span class="n">spot_orders_to_cancel</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">OrderData</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">spot_market_id_cancel</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">order_hash</span><span class="o">=</span><span class="s">"0x3870fbdd91f07d54425147b1bb96404f4f043ba6335b422a6d494d285b387f2d"</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">OrderData</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">spot_market_id_cancel_2</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">order_hash</span><span class="o">=</span><span class="s">"0x222daa22f60fe9f075ed0ca583459e121c23e64431c3fbffdedda04598ede0d2"</span>
        <span class="p">)</span>
    <span class="p">]</span>

    <span class="n">derivative_orders_to_create</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">DerivativeOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">derivative_market_id_create</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span>
            <span class="n">leverage</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">DerivativeOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">derivative_market_id_create</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span>
            <span class="n">leverage</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">False</span>
        <span class="p">),</span>
    <span class="p">]</span>

    <span class="n">spot_orders_to_create</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">SpotOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">spot_market_id_create</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mi">62</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">SpotOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">spot_market_id_create</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">False</span>
        <span class="p">),</span>
    <span class="p">]</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgBatchUpdateOrders</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">derivative_orders_to_create</span><span class="o">=</span><span class="n">derivative_orders_to_create</span><span class="p">,</span>
        <span class="n">spot_orders_to_create</span><span class="o">=</span><span class="n">spot_orders_to_create</span><span class="p">,</span>
        <span class="n">derivative_orders_to_cancel</span><span class="o">=</span><span class="n">derivative_orders_to_cancel</span><span class="p">,</span>
        <span class="n">spot_orders_to_cancel</span><span class="o">=</span><span class="n">spot_orders_to_cancel</span><span class="p">,</span>
        <span class="n">spot_market_ids_to_cancel_all</span><span class="o">=</span><span class="n">spot_market_ids_to_cancel_all</span><span class="p">,</span>
        <span class="n">derivative_market_ids_to_cancel_all</span><span class="o">=</span><span class="n">derivative_market_ids_to_cancel_all</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">sim_res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">sim_res</span><span class="p">.</span><span class="n">result</span><span class="p">.</span><span class="n">data</span><span class="p">,</span> <span class="n">simulation</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"simulation msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">sim_res_msg</span><span class="p">)</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">cosmtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="s">"github.com/shopspring/decimal"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">defaultSubaccountID</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">senderAddress</span><span class="p">)</span>

    <span class="n">smarketId</span> <span class="o">:=</span> <span class="s">"0x0511ddc4e6586f3bfe1acb2dd905f8b8a82c97e1edaef654b12ca7e6031ca0fa"</span>
    <span class="n">samount</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>
    <span class="n">sprice</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">22.5</span><span class="p">)</span>
    <span class="n">smarketIds</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span><span class="p">}</span>

    <span class="n">spot_order</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">SpotOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_BUY</span><span class="p">,</span> <span class="c">//BUY SELL BUY_PO SELL_PO</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">samount</span><span class="p">,</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">sprice</span><span class="p">,</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="n">smarketId</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">dmarketId</span> <span class="o">:=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">damount</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">0.01</span><span class="p">)</span>
    <span class="n">dprice</span> <span class="o">:=</span> <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"31000000000"</span><span class="p">)</span> <span class="c">//31,000</span>
    <span class="n">dleverage</span> <span class="o">:=</span> <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"2"</span><span class="p">)</span>
    <span class="n">dmarketIds</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">}</span>

    <span class="n">derivative_order</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">DerivativeOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_BUY</span><span class="p">,</span> <span class="c">//BUY SELL BUY_PO SELL_PO</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">damount</span><span class="p">,</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">dprice</span><span class="p">,</span>
        <span class="n">Leverage</span><span class="o">:</span>     <span class="n">dleverage</span><span class="p">,</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="n">dmarketId</span><span class="p">,</span>
        <span class="n">IsReduceOnly</span><span class="o">:</span> <span class="no">false</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchUpdateOrders</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">SubaccountId</span> <span class="o">=</span> <span class="n">defaultSubaccountID</span><span class="o">.</span><span class="n">Hex</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">SpotOrdersToCreate</span> <span class="o">=</span> <span class="p">[]</span><span class="o">*</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">{</span><span class="n">spot_order</span><span class="p">}</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">DerivativeOrdersToCreate</span> <span class="o">=</span> <span class="p">[]</span><span class="o">*</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">{</span><span class="n">derivative_order</span><span class="p">}</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">SpotMarketIdsToCancelAll</span> <span class="o">=</span> <span class="n">smarketIds</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">DerivativeMarketIdsToCancelAll</span> <span class="o">=</span> <span class="n">dmarketIds</span>

    <span class="n">simRes</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SimulateMsg</span><span class="p">(</span><span class="n">clientCtx</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">simResMsgs</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">MsgResponse</span><span class="p">(</span><span class="n">simRes</span><span class="o">.</span><span class="n">Result</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>
    <span class="n">MsgBatchUpdateOrdersResponse</span> <span class="o">:=</span> <span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchUpdateOrdersResponse</span><span class="p">{}</span>
    <span class="n">MsgBatchUpdateOrdersResponse</span><span class="o">.</span><span class="n">Unmarshal</span><span class="p">(</span><span class="n">simResMsgs</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"simulated spot order hashes"</span><span class="p">,</span> <span class="n">MsgBatchUpdateOrdersResponse</span><span class="o">.</span><span class="n">SpotOrderHashes</span><span class="p">)</span>

    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"simulated derivative order hashes"</span><span class="p">,</span> <span class="n">MsgBatchUpdateOrdersResponse</span><span class="o">.</span><span class="n">DerivativeOrderHashes</span><span class="p">)</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID</td>
<td>Conditional</td>
</tr>
<tr>
<td>derivative_orders_to_create</td>
<td>DerivativeOrder</td>
<td>DerivativeOrder object</td>
<td>No</td>
</tr>
<tr>
<td>spot_orders_to_create</td>
<td>SpotOrder</td>
<td>SpotOrder object</td>
<td>No</td>
</tr>
<tr>
<td>derivative_orders_to_cancel</td>
<td>OrderData</td>
<td>OrderData object to cancel</td>
<td>No</td>
</tr>
<tr>
<td>spot_orders_to_cancel</td>
<td>Orderdata</td>
<td>OrderData object to cancel</td>
<td>No</td>
</tr>
<tr>
<td>spot_market_ids_to_cancel_all</td>
<td>array</td>
<td>Spot Market IDs for the markets the trader wants to cancel all active orders</td>
<td>No</td>
</tr>
<tr>
<td>derivative_market_ids_to_cancel_all</td>
<td>array</td>
<td>Derivative Market IDs for the markets the trader wants to cancel all active orders</td>
<td>No</td>
</tr>
</tbody></table>

<p><strong>SpotOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
<tr>
<td>is_po</td>
<td>boolean</td>
<td>Set to true or false for post-only or normal orders respectively</td>
<td>No</td>
</tr>
</tbody></table>

<p><strong>DerivativeOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>leverage</td>
<td>float</td>
<td>The leverage factor for the order</td>
<td>No</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
<tr>
<td>is_reduce_only</td>
<td>boolean</td>
<td>Set to true or false for reduce-only or normal orders respectively</td>
<td>No</td>
</tr>
<tr>
<td>is_po</td>
<td>boolean</td>
<td>Set to true or false for post-only or normal orders respectively</td>
<td>No</td>
</tr>
</tbody></table>

<p><strong>OrderData</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to cancel an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to cancel an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>order_hash</td>
<td>string</td>
<td>The hash of a specific order</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"simulation msg response"</span>
<span class="s">"spot_cancel_success"</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
<span class="s">"spot_cancel_success"</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
<span class="s">"derivative_cancel_success"</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
<span class="s">"derivative_cancel_success"</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
<span class="s">"spot_order_hashes"</span><span class="p">:</span> <span class="s">"0x7af962ba1880edc4d45fa66b64f169f9f654df0d54fd10a5bd9da0510f4a7727"</span><span class="p">,</span>
<span class="s">"spot_order_hashes"</span><span class="p">:</span> <span class="s">"0x1c400acc9ca1a3f2cb2a98d35bc252753e5931f762b337410750be327189922f"</span><span class="p">,</span>
<span class="s">"derivative_order_hashes"</span><span class="p">:</span> <span class="s">"0x11f3c2aed7ed892a1cbf280534b7b2eaafe0bc7f8078b79e7d2c331b49547d99"</span><span class="p">,</span>
<span class="s">"derivative_order_hashes"</span><span class="p">:</span> <span class="s">""</span><span class="p">,</span>
<span class="s">"tx response"</span>
<span class="s">"height"</span><span class="p">:</span> <span class="mi">64004</span><span class="p">,</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"B8BF33A8E62F4F1C3FA6FA9E84F35CCED44D5D7CF004C058AA2E7FC3F1A9E50A"</span><span class="p">,</span>
<span class="s">"data"</span><span class="p">:</span> <span class="s">"0A8B020A302F696E6A6563746976652E65786368616E67652E763162657461312E4D736742617463685570646174654F726465727312D6010A020100120201001A423078376166393632626131383830656463346434356661363662363466313639663966363534646630643534666431306135626439646130353130663461373732371A4230783163343030616363396361316133663263623261393864333562633235323735336535393331663736326233333734313037353062653332373138393932326622423078313166336332616564376564383932613163626632383035333462376232656161666530626337663830373862373965376432633333316234393534376439392200"</span><span class="p">,</span>
<span class="s">"raw_log"</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">injective.exchange.v1beta1.EventCancelDerivativeOrder</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">market_id</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">0x1f73e21972972c69c03fb105a5864592ac2b47996ffea3c500d1ea2d20138717</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">isLimitCancel</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">true</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">limit_order</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">{</span><span class="se">\\\"</span><span class="s">order_info</span><span class="se">\\\"</span><span class="s">:{</span><span class="se">\\\"</span><span class="s">subaccount_id</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">fee_recipient</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">price</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">20000000.000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">quantity</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">5.000000000000000000</span><span class="se">\\\"</span><span class="s">},</span><span class="se">\\\"</span><span class="s">order_type</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">BUY</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">margin</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">75000000.000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">fillable</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">5.000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">trigger_price</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">0.000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">order_hash</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">cm93WUZipQ+wguDgqjE/3z8WQ4u60rDnMVXHzgtwRoU=</span><span class="se">\\\"</span><span class="s">}</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">market_order_cancel</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">null</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">injective.exchange.v1beta1.EventCancelSpotOrder</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">market_id</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">0x74b17b0d6855feba39f1f7ab1e8bad0363bd510ee1dcc74e40c2adfe1502f781</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">order</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">{</span><span class="se">\\\"</span><span class="s">order_info</span><span class="se">\\\"</span><span class="s">:{</span><span class="se">\\\"</span><span class="s">subaccount_id</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">fee_recipient</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">price</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">0.000000000300000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">quantity</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">5000000000000000000.000000000000000000</span><span class="se">\\\"</span><span class="s">},</span><span class="se">\\\"</span><span class="s">order_type</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">BUY</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">fillable</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">5000000000000000000.000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">trigger_price</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">0.000000000000000000</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">order_hash</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">OxnZVKa7v3wjPKVUVSUHG1CrJFGqJU6HBa9sjf3VdyI=</span><span class="se">\\\"</span><span class="s">}</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/injective.exchange.v1beta1.MsgBatchUpdateOrders</span><span class="se">\"</span><span class="s">}]}]}]"</span><span class="p">,</span>
<span class="s">"logs"</span><span class="p">:</span> <span class="p">{</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"injective.exchange.v1beta1.EventCancelDerivativeOrder"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"market_id"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">0x1f73e21972972c69c03fb105a5864592ac2b47996ffea3c500d1ea2d20138717</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"isLimitCancel"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"true"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"limit_order"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"{</span><span class="se">\"</span><span class="s">order_info</span><span class="se">\"</span><span class="s">:{</span><span class="se">\"</span><span class="s">subaccount_id</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">fee_recipient</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">price</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">20000000.000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">quantity</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">5.000000000000000000</span><span class="se">\"</span><span class="s">},</span><span class="se">\"</span><span class="s">order_type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">BUY</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">margin</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">75000000.000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">fillable</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">5.000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">trigger_price</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">0.000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">order_hash</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">cm93WUZipQ+wguDgqjE/3z8WQ4u60rDnMVXHzgtwRoU=</span><span class="se">\"</span><span class="s">}"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"market_order_cancel"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"null"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"injective.exchange.v1beta1.EventCancelSpotOrder"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"market_id"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">0x74b17b0d6855feba39f1f7ab1e8bad0363bd510ee1dcc74e40c2adfe1502f781</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"order"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"{</span><span class="se">\"</span><span class="s">order_info</span><span class="se">\"</span><span class="s">:{</span><span class="se">\"</span><span class="s">subaccount_id</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">fee_recipient</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">price</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">0.000000000300000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">quantity</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">5000000000000000000.000000000000000000</span><span class="se">\"</span><span class="s">},</span><span class="se">\"</span><span class="s">order_type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">BUY</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">fillable</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">5000000000000000000.000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">trigger_price</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">0.000000000000000000</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">order_hash</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">OxnZVKa7v3wjPKVUVSUHG1CrJFGqJU6HBa9sjf3VdyI=</span><span class="se">\"</span><span class="s">}"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"message"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"action"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"/injective.exchange.v1beta1.MsgBatchUpdateOrders"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="s">"gas_wanted"</span><span class="p">:</span> <span class="mi">202244</span><span class="p">,</span>
<span class="s">"gas_used"</span><span class="p">:</span> <span class="mi">199321</span><span class="p">,</span>

<span class="s">"tx msg response"</span>
<span class="s">"spot_cancel_success"</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
<span class="s">"spot_cancel_success"</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
<span class="s">"derivative_cancel_success"</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
<span class="s">"derivative_cancel_success"</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
<span class="s">"spot_order_hashes"</span><span class="p">:</span> <span class="s">"0x7af962ba1880edc4d45fa66b64f169f9f654df0d54fd10a5bd9da0510f4a7727"</span><span class="p">,</span>
<span class="s">"spot_order_hashes"</span><span class="p">:</span> <span class="s">"0x1c400acc9ca1a3f2cb2a98d35bc252753e5931f762b337410750be327189922f"</span><span class="p">,</span>
<span class="s">"derivative_order_hashes"</span><span class="p">:</span> <span class="s">"0x11f3c2aed7ed892a1cbf280534b7b2eaafe0bc7f8078b79e7d2c331b49547d99"</span><span class="p">,</span>
<span class="s">"derivative_order_hashes"</span><span class="p">:</span> <span class="s">""</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3000</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663409</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="n">B8BF33A8E62F4F1C3FA6FA9E84F35CCED44D5D7CF004C058AA2E7FC3F1A9E50A</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3001</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='spot-localorderhashcomputation'>LocalOrderHashComputation</h2>
<p>This function computes order hashes locally for SpotOrder and DerivativeOrder. Note that the subaccount nonce is used as one of the primary parameters to the calculation and is fetched every time from the Chain Node when you call the function. Thus, to use the function properly you must provide all the orders you&#39;ll send in a given block and call it only once per block.</p>

<p>Also note that if any of the orders does not get submitted on-chain either because of low account balance, incorrect order details or any other reason then the subsequent order hashes will be incorrect. That&#39;s because when you post the actual transactions and one of them fails the subaccount nonce won&#39;t be increased so the subsequent order hashes derived from the local calculation will be incorrect.</p>
<h3 id='spot-localorderhashcomputation-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>
<span class="kn">from</span> <span class="nn">pyinjective.orderhash</span> <span class="kn">import</span> <span class="n">compute_order_hashes</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare trade info
</span>    <span class="n">spot_market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>
    <span class="n">deriv_market_id</span> <span class="o">=</span> <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span>
    <span class="n">fee_recipient</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>

    <span class="n">spot_orders</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">SpotOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">spot_market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mf">3.524</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">SpotOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">spot_market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mf">27.92</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">False</span>
        <span class="p">),</span>
    <span class="p">]</span>

    <span class="n">derivative_orders</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">DerivativeOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">deriv_market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">25111</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">leverage</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="n">is_po</span><span class="o">=</span><span class="bp">False</span>
        <span class="p">),</span>
        <span class="n">composer</span><span class="p">.</span><span class="n">DerivativeOrder</span><span class="p">(</span>
            <span class="n">market_id</span><span class="o">=</span><span class="n">deriv_market_id</span><span class="p">,</span>
            <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
            <span class="n">fee_recipient</span><span class="o">=</span><span class="n">fee_recipient</span><span class="p">,</span>
            <span class="n">price</span><span class="o">=</span><span class="mi">65111</span><span class="p">,</span>
            <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
            <span class="n">leverage</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="n">is_buy</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">is_reduce_only</span><span class="o">=</span><span class="bp">False</span>
        <span class="p">),</span>
    <span class="p">]</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">spot_msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgBatchCreateSpotLimitOrders</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">orders</span><span class="o">=</span><span class="n">spot_orders</span>
    <span class="p">)</span>

    <span class="n">deriv_msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgBatchCreateDerivativeLimitOrders</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">orders</span><span class="o">=</span><span class="n">derivative_orders</span>
    <span class="p">)</span>

    <span class="c1"># compute order hashes
</span>    <span class="n">order_hashes</span> <span class="o">=</span> <span class="n">compute_order_hashes</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">spot_orders</span><span class="o">=</span><span class="n">spot_orders</span><span class="p">,</span> <span class="n">derivative_orders</span><span class="o">=</span><span class="n">derivative_orders</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s">"computed spot order hashes"</span><span class="p">,</span> <span class="n">order_hashes</span><span class="p">.</span><span class="n">spot</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"computed derivative order hashes"</span><span class="p">,</span> <span class="n">order_hashes</span><span class="p">.</span><span class="n">derivative</span><span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">spot_msg</span><span class="p">,</span> <span class="n">deriv_msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span>  <span class="c1"># add 15k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_sync_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"time"</span>
    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
    <span class="n">cosmtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="s">"github.com/shopspring/decimal"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>
    <span class="s">"os"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>
    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c">// build orders</span>
    <span class="n">defaultSubaccountID</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">senderAddress</span><span class="p">)</span>

    <span class="n">spotOrder</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">SpotOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_BUY</span><span class="p">,</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">2</span><span class="p">),</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">22.55</span><span class="p">),</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="s">"0x0511ddc4e6586f3bfe1acb2dd905f8b8a82c97e1edaef654b12ca7e6031ca0fa"</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">derivativeOrder</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="n">network</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">DerivativeOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_BUY</span><span class="p">,</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">2</span><span class="p">),</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"31000000000"</span><span class="p">),</span>
        <span class="n">Leverage</span><span class="o">:</span>     <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"2.5"</span><span class="p">),</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="s">"0x4ca0f92fc28be0c9761326016b5a1a2177dd6375558365116b5bdda9abc229ce"</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchCreateSpotLimitOrders</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Orders</span> <span class="o">=</span> <span class="p">[]</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">{</span><span class="o">*</span><span class="n">spotOrder</span><span class="p">}</span>

    <span class="n">msg1</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgBatchCreateDerivativeLimitOrders</span><span class="p">)</span>
    <span class="n">msg1</span><span class="o">.</span><span class="n">Sender</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg1</span><span class="o">.</span><span class="n">Orders</span> <span class="o">=</span> <span class="p">[]</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">DerivativeOrder</span><span class="p">{</span><span class="o">*</span><span class="n">derivativeOrder</span><span class="p">,</span> <span class="o">*</span><span class="n">derivativeOrder</span><span class="p">}</span>

    <span class="n">orderHashes</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">ComputeOrderHashes</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">Orders</span><span class="p">,</span> <span class="n">msg1</span><span class="o">.</span><span class="n">Orders</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"computed spot order hashes"</span><span class="p">,</span> <span class="n">orderHashes</span><span class="o">.</span><span class="n">Spot</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"computed derivative order hashes"</span><span class="p">,</span> <span class="n">orderHashes</span><span class="o">.</span><span class="n">Derivative</span><span class="p">)</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">msg1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<p><strong>MsgBatchCreateDerivativeLimitOrders</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>orders</td>
<td>DerivativeOrder</td>
<td>Array of DerivativeOrder</td>
<td>Yes</td>
</tr>
</tbody></table>

<p><strong>DerivativeOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>leverage</td>
<td>float</td>
<td>The leverage factor for the order</td>
<td>No</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
<tr>
<td>is_reduce_only</td>
<td>boolean</td>
<td>Set to true or false for reduce-only or normal orders respectively</td>
<td>No</td>
</tr>
<tr>
<td>is_po</td>
<td>boolean</td>
<td>Set to true or false for post-only or normal orders respectively</td>
<td>No</td>
</tr>
</tbody></table>

<p><strong>MsgBatchCreateSpotLimitOrders</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>orders</td>
<td>SpotOrder</td>
<td>Array of SpotOrder</td>
<td>Yes</td>
</tr>
</tbody></table>

<p><strong>SpotOrder</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>market_id</td>
<td>string</td>
<td>Market ID of the market we want to send an order</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount we want to send an order from</td>
<td>Yes</td>
</tr>
<tr>
<td>fee_recipient</td>
<td>string</td>
<td>The address that will receive 40% of the fees, this could be set to your own address</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>The quantity of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>is_buy</td>
<td>boolean</td>
<td>Set to true or false for buy and sell orders respectively</td>
<td>Yes</td>
</tr>
<tr>
<td>is_po</td>
<td>boolean</td>
<td>Set to true or false for post-only or normal orders respectively</td>
<td>No</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="n">computed</span> <span class="n">spot</span> <span class="n">order</span> <span class="n">hashes</span> <span class="p">[</span><span class="s">'0x2d6b636de9dd3c1ed2e94765df558bd87d9b431ae669e248d3e2df607f069fb9'</span><span class="p">,</span> <span class="s">'0xe48258021f295ec61e6d94aeb87615a33221f007555cea29ab64f6be90531878'</span><span class="p">]</span>
<span class="n">computed</span> <span class="n">derivative</span> <span class="n">order</span> <span class="n">hashes</span> <span class="p">[</span><span class="s">'0xb09b98289cec971c7a544c083d5b0aec7ea0c40a09dea330c3dca1ef9edd6a84'</span><span class="p">,</span> <span class="s">'0x76752ee736b60e64ba2bbfb5050ea94988cfd90cf13e1680345c57ac2033967d'</span><span class="p">]</span>
<span class="n">tx</span> <span class="n">response</span>
<span class="n">txhash</span><span class="p">:</span> <span class="s">"577887F6C88F40145F6C443920BA774A8040CF91FCFBC9F7CA836142358289CF"</span>
<span class="n">raw_log</span><span class="p">:</span> <span class="s">"[]"</span>

<span class="n">tx</span> <span class="n">msg</span> <span class="n">response</span>
<span class="p">[]</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">computed</span> <span class="n">spot</span> <span class="n">order</span> <span class="n">hashes</span> <span class="p">[</span><span class="m">0x03b4fc2cfa3f530a435b4ff2c8d27029056aad78ad33d9f7a183fd181bf5071b</span><span class="p">]</span>
<span class="n">computed</span> <span class="n">derivative</span> <span class="n">order</span> <span class="n">hashes</span> <span class="p">[</span><span class="m">0x558167f8457a178b73fda91d4d0a7af9cb68c18f2647674f3c02b0f2dd006806</span> <span class="m">0xce51ad4b43ce098ce2112f194393549c902b1981aeb18262cb521de5ce065798</span><span class="p">]</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3297</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:543"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">4306136</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:564"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">1</span><span class="n">A441B85B7945D9B30805BD6E99B478379B7363960668F9AF6E04238A50E0517</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3298</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:568"</span>
</code></pre></div><h1 id='account'>- Account</h1>
<p>Includes all messages related to accounts and transfers.</p>
<h2 id='account-msgsend'>MsgSend</h2><h3 id='account-msgsend-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgSend</span><span class="p">(</span>
        <span class="n">from_address</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">to_address</span><span class="o">=</span><span class="s">'inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r'</span><span class="p">,</span>
        <span class="n">amount</span><span class="o">=</span><span class="mf">0.000000000000000001</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="s">'INJ'</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span>  <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>

    <span class="c1"># print tx response
</span>    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"fmt"</span>
  <span class="s">"os"</span>
  <span class="s">"time"</span>

  <span class="n">sdktypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
  <span class="n">banktypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/x/bank/types"</span>
  <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

  <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
    <span class="s">"injectived"</span><span class="p">,</span>
    <span class="s">"file"</span><span class="p">,</span>
    <span class="s">"inj-user"</span><span class="p">,</span>
    <span class="s">"12345678"</span><span class="p">,</span>
    <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
    <span class="no">false</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
    <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">cosmosKeyring</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

  <span class="n">msg</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">banktypes</span><span class="o">.</span><span class="n">MsgSend</span><span class="p">{</span>
    <span class="n">FromAddress</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">ToAddress</span><span class="o">:</span>   <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span><span class="p">,</span>
    <span class="n">Amount</span><span class="o">:</span> <span class="p">[]</span><span class="n">sdktypes</span><span class="o">.</span><span class="n">Coin</span><span class="p">{{</span>
      <span class="n">Denom</span><span class="o">:</span> <span class="s">"inj"</span><span class="p">,</span> <span class="n">Amount</span><span class="o">:</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">NewInt</span><span class="p">(</span><span class="m">1000000000000000000</span><span class="p">)},</span> <span class="c">// 1 INJ</span>
    <span class="p">},</span>
  <span class="p">}</span>

  <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
    <span class="n">clientCtx</span><span class="p">,</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>from_address</td>
<td>string</td>
<td>The Injective Chain address of the sender</td>
<td>Yes</td>
</tr>
<tr>
<td>to_address</td>
<td>string</td>
<td>The Injective Chain address of the receiver</td>
<td>Yes</td>
</tr>
<tr>
<td>amount</td>
<td>int</td>
<td>The amount of tokens to send</td>
<td>Yes</td>
</tr>
<tr>
<td>denom</td>
<td>string</td>
<td>The token denom</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"height"</span><span class="p">:</span> <span class="s">"8581276"</span><span class="p">,</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"ED1A31933449525712EEFB2B27929117E291CC81E0827233E5C892F5D03EB9AB"</span><span class="p">,</span>
<span class="s">"data"</span><span class="p">:</span> <span class="s">"0A1E0A1C2F636F736D6F732E62616E6B2E763162657461312E4D736753656E64"</span><span class="p">,</span>
<span class="s">"raw_log"</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_received</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">receiver</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_spent</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">spender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/cosmos.bank.v1beta1.MsgSend</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">module</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">bank</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">transfer</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">recipient</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]}]}]"</span><span class="p">,</span>
<span class="s">"logs"</span><span class="p">:</span> <span class="p">{</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"coin_received"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"receiver"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"coin_spent"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"spender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"message"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"action"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"/cosmos.bank.v1beta1.MsgSend"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"sender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"module"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"bank"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"transfer"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"recipient"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"sender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="s">"gas_wanted"</span><span class="p">:</span> <span class="s">"200000"</span><span class="p">,</span>
<span class="s">"gas_used"</span><span class="p">:</span> <span class="s">"86357"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">2993</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0002</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663068</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">165951</span><span class="n">FD724A4BB9907A72224EC17221619121AE5FF4E454370FF9DCC450F0F2</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0002</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">2994</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='account-msgdeposit'>MsgDeposit</h2><h3 id='account-msgdeposit-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgDeposit</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">amount</span><span class="o">=</span><span class="mf">0.000001</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="s">'USDT'</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>

    <span class="c1"># print tx response
</span>    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"fmt"</span>
  <span class="s">"os"</span>
  <span class="s">"time"</span>

  <span class="n">sdktypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
  <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

  <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
  <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
    <span class="s">"injectived"</span><span class="p">,</span>
    <span class="s">"file"</span><span class="p">,</span>
    <span class="s">"inj-user"</span><span class="p">,</span>
    <span class="s">"12345678"</span><span class="p">,</span>
    <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
    <span class="no">false</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
    <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">cosmosKeyring</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

  <span class="n">msg</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgDeposit</span><span class="p">{</span>
    <span class="n">Sender</span><span class="o">:</span>       <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span>
    <span class="n">Amount</span><span class="o">:</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">Coin</span><span class="p">{</span>
      <span class="n">Denom</span><span class="o">:</span> <span class="s">"inj"</span><span class="p">,</span> <span class="n">Amount</span><span class="o">:</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">NewInt</span><span class="p">(</span><span class="m">1000000000000000000</span><span class="p">),</span> <span class="c">// 1 INJ</span>
    <span class="p">},</span>
  <span class="p">}</span>

  <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
    <span class="n">clientCtx</span><span class="p">,</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID to receive the funds</td>
<td>Yes</td>
</tr>
<tr>
<td>amount</td>
<td>int</td>
<td>The amount of tokens to send</td>
<td>Yes</td>
</tr>
<tr>
<td>denom</td>
<td>string</td>
<td>The token denom</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"height"</span><span class="p">:</span> <span class="s">"8581522"</span><span class="p">,</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"E2E0A4F8DF9E6C93DACF591A542B5677B70D17E3E46418668CE39828E3694DC6"</span><span class="p">,</span>
<span class="s">"data"</span><span class="p">:</span> <span class="s">"0A280A262F696E6A6563746976652E65786368616E67652E763162657461312E4D73674465706F736974"</span><span class="p">,</span>
<span class="s">"raw_log"</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_received</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">receiver</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14vnmw2wee3xtrsqfvpcqg35jg9v7j2vdpzx0kk</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_spent</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">spender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">injective.exchange.v1beta1.EventSubaccountDeposit</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">{</span><span class="se">\\\"</span><span class="s">denom</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">inj</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">amount</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">1000000000000000000</span><span class="se">\\\"</span><span class="s">}</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">src_address</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">subaccount_id</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">va7eyV1WP7BSQNbgGCEAhFTCTDYAAAAAAAAAAAAAAAA=</span><span class="se">\\\"\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/injective.exchange.v1beta1.MsgDeposit</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">transfer</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">recipient</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14vnmw2wee3xtrsqfvpcqg35jg9v7j2vdpzx0kk</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]}]}]"</span><span class="p">,</span>
<span class="s">"logs"</span><span class="p">:</span> <span class="p">{</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"coin_received"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"receiver"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj14vnmw2wee3xtrsqfvpcqg35jg9v7j2vdpzx0kk"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"coin_spent"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"spender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"injective.exchange.v1beta1.EventSubaccountDeposit"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"{</span><span class="se">\"</span><span class="s">denom</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000</span><span class="se">\"</span><span class="s">}"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"src_address"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"subaccount_id"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">va7eyV1WP7BSQNbgGCEAhFTCTDYAAAAAAAAAAAAAAAA=</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"message"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"action"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"/injective.exchange.v1beta1.MsgDeposit"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"sender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"transfer"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"recipient"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj14vnmw2wee3xtrsqfvpcqg35jg9v7j2vdpzx0kk"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"sender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="s">"gas_wanted"</span><span class="p">:</span> <span class="s">"200000"</span><span class="p">,</span>
<span class="s">"gas_used"</span><span class="p">:</span> <span class="s">"93162"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">2995</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663161</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">428</span><span class="n">EEF90B5453F6F287B1171C420B589823D2AB49552A0BB7221503230FD9FB2</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">2996</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='account-msgwithdraw'>MsgWithdraw</h2><h3 id='account-msgwithdraw-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgWithdraw</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">amount</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="s">"USDT"</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"fmt"</span>
  <span class="s">"os"</span>
  <span class="s">"time"</span>

  <span class="n">sdktypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
  <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

  <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
  <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
    <span class="s">"injectived"</span><span class="p">,</span>
    <span class="s">"file"</span><span class="p">,</span>
    <span class="s">"inj-user"</span><span class="p">,</span>
    <span class="s">"12345678"</span><span class="p">,</span>
    <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
    <span class="no">false</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
    <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">cosmosKeyring</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

  <span class="n">msg</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgWithdraw</span><span class="p">{</span>
    <span class="n">Sender</span><span class="o">:</span>       <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">SubaccountId</span><span class="o">:</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span>
    <span class="n">Amount</span><span class="o">:</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">Coin</span><span class="p">{</span>
      <span class="n">Denom</span><span class="o">:</span> <span class="s">"inj"</span><span class="p">,</span> <span class="n">Amount</span><span class="o">:</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">NewInt</span><span class="p">(</span><span class="m">1000000000000000000</span><span class="p">),</span> <span class="c">// 1 INJ</span>
    <span class="p">},</span>
  <span class="p">}</span>

  <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
    <span class="n">clientCtx</span><span class="p">,</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>string</td>
<td>The subaccount ID to withdraw the funds from</td>
<td>Yes</td>
</tr>
<tr>
<td>amount</td>
<td>int</td>
<td>The amount of tokens to send</td>
<td>Yes</td>
</tr>
<tr>
<td>denom</td>
<td>string</td>
<td>The token denom</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"height"</span><span class="p">:</span> <span class="s">"8739822"</span><span class="p">,</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"1E015C6B0D3CEFA5C9729415E4462B3BF2EF56F9D01E68C0653658F00B1D8A5E"</span><span class="p">,</span>
<span class="s">"data"</span><span class="p">:</span> <span class="s">"0A290A272F696E6A6563746976652E65786368616E67652E763162657461312E4D73675769746864726177"</span><span class="p">,</span>
<span class="s">"raw_log"</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_received</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">receiver</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_spent</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">spender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14vnmw2wee3xtrsqfvpcqg35jg9v7j2vdpzx0kk</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">injective.exchange.v1beta1.EventSubaccountWithdraw</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">dst_address</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">{</span><span class="se">\\\"</span><span class="s">denom</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">inj</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">amount</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">1000000000000000000</span><span class="se">\\\"</span><span class="s">}</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">subaccount_id</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">va7eyV1WP7BSQNbgGCEAhFTCTDYAAAAAAAAAAAAAAAA=</span><span class="se">\\\"\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/injective.exchange.v1beta1.MsgWithdraw</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14vnmw2wee3xtrsqfvpcqg35jg9v7j2vdpzx0kk</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">transfer</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">recipient</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14vnmw2wee3xtrsqfvpcqg35jg9v7j2vdpzx0kk</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]}]}]"</span><span class="p">,</span>
<span class="s">"logs"</span><span class="p">:</span> <span class="p">{</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"coin_received"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"receiver"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"coin_spent"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"spender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj14vnmw2wee3xtrsqfvpcqg35jg9v7j2vdpzx0kk"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"injective.exchange.v1beta1.EventSubaccountWithdraw"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"dst_address"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"{</span><span class="se">\"</span><span class="s">denom</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000</span><span class="se">\"</span><span class="s">}"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"subaccount_id"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">va7eyV1WP7BSQNbgGCEAhFTCTDYAAAAAAAAAAAAAAAA=</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"message"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"action"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"/injective.exchange.v1beta1.MsgWithdraw"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"sender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj14vnmw2wee3xtrsqfvpcqg35jg9v7j2vdpzx0kk"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"transfer"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"recipient"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"sender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj14vnmw2wee3xtrsqfvpcqg35jg9v7j2vdpzx0kk"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="s">"gas_wanted"</span><span class="p">:</span> <span class="s">"200000"</span><span class="p">,</span>
<span class="s">"gas_used"</span><span class="p">:</span> <span class="s">"91833"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">2996</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663188</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">0039</span><span class="n">F8FD6BD1F87F8161DEE6FF28088AC8FC45DAAEE898F337FCD1FB68C692C0</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">2997</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='account-msgsubaccounttransfer'>MsgSubaccountTransfer</h2><h3 id='account-msgsubaccounttransfer-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">dest_subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgSubaccountTransfer</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">source_subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">destination_subaccount_id</span><span class="o">=</span><span class="n">dest_subaccount_id</span><span class="p">,</span>
        <span class="n">amount</span><span class="o">=</span><span class="mi">1000000000000000000</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="s">"inj"</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx msg response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res_msg</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"fmt"</span>
  <span class="s">"os"</span>
  <span class="s">"time"</span>

  <span class="n">sdktypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
  <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

  <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
  <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
    <span class="s">"injectived"</span><span class="p">,</span>
    <span class="s">"file"</span><span class="p">,</span>
    <span class="s">"inj-user"</span><span class="p">,</span>
    <span class="s">"12345678"</span><span class="p">,</span>
    <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
    <span class="no">false</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
    <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">cosmosKeyring</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

  <span class="n">msg</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgSubaccountTransfer</span><span class="p">{</span>
    <span class="n">Sender</span><span class="o">:</span>                  <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">SourceSubaccountId</span><span class="o">:</span>      <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000000"</span><span class="p">,</span>
    <span class="n">DestinationSubaccountId</span><span class="o">:</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902000000000000000000000001"</span><span class="p">,</span>
    <span class="n">Amount</span><span class="o">:</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">Coin</span><span class="p">{</span>
      <span class="n">Denom</span><span class="o">:</span> <span class="s">"inj"</span><span class="p">,</span> <span class="n">Amount</span><span class="o">:</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">NewInt</span><span class="p">(</span><span class="m">1000000000000000000</span><span class="p">),</span> <span class="c">// 1 INJ</span>
    <span class="p">},</span>
  <span class="p">}</span>

  <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
    <span class="n">clientCtx</span><span class="p">,</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>amount</td>
<td>int</td>
<td>The amount of tokens to send</td>
<td>Yes</td>
</tr>
<tr>
<td>denom</td>
<td>string</td>
<td>The token denom</td>
<td>Yes</td>
</tr>
<tr>
<td>source_subaccount_id</td>
<td>string</td>
<td>The subaccount ID to send the funds</td>
<td>Yes</td>
</tr>
<tr>
<td>destination_subaccount_id</td>
<td>string</td>
<td>The subaccount ID to receive the funds</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"height"</span><span class="p">:</span> <span class="s">"8739976"</span><span class="p">,</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"4D1EA75A18B967F3A5E35277DFF03D724D85A1DB77168F562CC26AD4C1BE0EA3"</span><span class="p">,</span>
<span class="s">"data"</span><span class="p">:</span> <span class="s">"0A330A312F696E6A6563746976652E65786368616E67652E763162657461312E4D73675375626163636F756E745472616E73666572"</span><span class="p">,</span>
<span class="s">"raw_log"</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">injective.exchange.v1beta1.EventSubaccountBalanceTransfer</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">src_subaccount_id</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">0xbdaedec95d563fb05240d6e01821008454c24c36000000000000000000000000</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">dst_subaccount_id</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">0xbdaedec95d563fb05240d6e01821008454c24c36000000000000000000000001</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">{</span><span class="se">\\\"</span><span class="s">denom</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">inj</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">amount</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">1000000000000000000</span><span class="se">\\\"</span><span class="s">}</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/injective.exchange.v1beta1.MsgSubaccountTransfer</span><span class="se">\"</span><span class="s">}]}]}]"</span><span class="p">,</span>
<span class="s">"logs"</span><span class="p">:</span> <span class="p">{</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"injective.exchange.v1beta1.EventSubaccountBalanceTransfer"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"src_subaccount_id"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">0xbdaedec95d563fb05240d6e01821008454c24c36000000000000000000000000</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"dst_subaccount_id"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">0xbdaedec95d563fb05240d6e01821008454c24c36000000000000000000000001</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"{</span><span class="se">\"</span><span class="s">denom</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000</span><span class="se">\"</span><span class="s">}"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"message"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"action"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"/injective.exchange.v1beta1.MsgSubaccountTransfer"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="s">"gas_wanted"</span><span class="p">:</span> <span class="s">"200000"</span><span class="p">,</span>
<span class="s">"gas_used"</span><span class="p">:</span> <span class="s">"86552"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">2997</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663214</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">02</span><span class="n">EB1FC4F3A61A5353D81B54B5BECC6251FB41975E1B2C8D533FCE5BB0F33A77</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">2998</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='account-msgsendtoeth'>MsgSendToEth</h2><h3 id='account-msgsendtoeth-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>

    <span class="c1"># prepare msg
</span>    <span class="n">asset</span> <span class="o">=</span> <span class="s">"injective-protocol"</span>
    <span class="n">coingecko_endpoint</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"https://api.coingecko.com/api/v3/simple/price?ids=</span><span class="si">{</span><span class="n">asset</span><span class="si">}</span><span class="s">&amp;vs_currencies=usd"</span>
    <span class="n">token_price</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">coingecko_endpoint</span><span class="p">).</span><span class="n">json</span><span class="p">()[</span><span class="n">asset</span><span class="p">][</span><span class="s">"usd"</span><span class="p">]</span>
    <span class="n">minimum_bridge_fee_usd</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">bridge_fee</span> <span class="o">=</span> <span class="n">minimum_bridge_fee_usd</span> <span class="o">/</span> <span class="n">token_price</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgSendToEth</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">denom</span><span class="o">=</span><span class="s">"INJ"</span><span class="p">,</span>
        <span class="n">eth_dest</span><span class="o">=</span><span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902"</span><span class="p">,</span>
        <span class="n">amount</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span>
        <span class="n">bridge_fee</span><span class="o">=</span><span class="n">bridge_fee</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span>  <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>

    <span class="c1"># print tx response
</span>    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"fmt"</span>
  <span class="s">"os"</span>
  <span class="s">"time"</span>

  <span class="n">sdktypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
  <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

  <span class="n">peggytypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/peggy/types"</span>
  <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
    <span class="s">"injectived"</span><span class="p">,</span>
    <span class="s">"file"</span><span class="p">,</span>
    <span class="s">"inj-user"</span><span class="p">,</span>
    <span class="s">"12345678"</span><span class="p">,</span>
    <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
    <span class="no">false</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
    <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">cosmosKeyring</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

  <span class="n">ethDest</span> <span class="o">:=</span> <span class="s">"0xaf79152ac5df276d9a8e1e2e22822f9713474902"</span>

  <span class="n">amount</span> <span class="o">:=</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">Coin</span><span class="p">{</span>
    <span class="n">Denom</span><span class="o">:</span> <span class="s">"inj"</span><span class="p">,</span> <span class="n">Amount</span><span class="o">:</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">NewInt</span><span class="p">(</span><span class="m">5000000000000000000</span><span class="p">),</span> <span class="c">// 5 INJ</span>
  <span class="p">}</span>
  <span class="n">bridgeFee</span> <span class="o">:=</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">Coin</span><span class="p">{</span>
    <span class="n">Denom</span><span class="o">:</span> <span class="s">"inj"</span><span class="p">,</span> <span class="n">Amount</span><span class="o">:</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">NewInt</span><span class="p">(</span><span class="m">2000000000000000000</span><span class="p">),</span> <span class="c">// 2 INJ</span>
  <span class="p">}</span>

  <span class="n">msg</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">peggytypes</span><span class="o">.</span><span class="n">MsgSendToEth</span><span class="p">{</span>
    <span class="n">Sender</span><span class="o">:</span>    <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">Amount</span><span class="o">:</span>    <span class="n">amount</span><span class="p">,</span>
    <span class="n">EthDest</span><span class="o">:</span>   <span class="n">ethDest</span><span class="p">,</span>
    <span class="n">BridgeFee</span><span class="o">:</span> <span class="n">bridgeFee</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
    <span class="n">clientCtx</span><span class="p">,</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>amount</td>
<td>int</td>
<td>The amount of tokens to send</td>
<td>Yes</td>
</tr>
<tr>
<td>denom</td>
<td>string</td>
<td>The token denom</td>
<td>Yes</td>
</tr>
<tr>
<td>eth_dest</td>
<td>string</td>
<td>The ethereum destination address</td>
<td>Yes</td>
</tr>
<tr>
<td>bridge_fee</td>
<td>string</td>
<td>The bridge fee for the transfer</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"height"</span><span class="p">:</span> <span class="mi">918024</span><span class="p">,</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"0ECDD061DB698A4162E45DCA9A21795937E55B92CE41EC49B71098833D2E316F"</span><span class="p">,</span>
<span class="s">"data"</span><span class="p">:</span> <span class="s">"0A220A202F696E6A6563746976652E70656767792E76312E4D736753656E64546F457468"</span><span class="p">,</span>
<span class="s">"raw_log"</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">burn</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">burner</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1979qcq0kdz72w0k9rsxcmfmagx2cydrs40q2xg</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">25040816326530612224inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_received</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">receiver</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1979qcq0kdz72w0k9rsxcmfmagx2cydrs40q2xg</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">25040816326530612224inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_spent</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">spender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">25040816326530612224inj</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">spender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1979qcq0kdz72w0k9rsxcmfmagx2cydrs40q2xg</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">25040816326530612224inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">injective.peggy.v1.EventSendToEth</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">{</span><span class="se">\\\"</span><span class="s">denom</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">inj</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">amount</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">23000000000000000000</span><span class="se">\\\"</span><span class="s">}</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">bridge_fee</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">{</span><span class="se">\\\"</span><span class="s">denom</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">inj</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">amount</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">2040816326530612224</span><span class="se">\\\"</span><span class="s">}</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">outgoing_tx_id</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">87</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">receiver</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">0xaf79152ac5df276d9a8e1e2e22822f9713474902</span><span class="se">\\\"\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/injective.peggy.v1.MsgSendToEth</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">transfer</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">recipient</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1979qcq0kdz72w0k9rsxcmfmagx2cydrs40q2xg</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">25040816326530612224inj</span><span class="se">\"</span><span class="s">}]}]}]"</span><span class="p">,</span>
<span class="s">"logs"</span><span class="p">:</span> <span class="p">{</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"burn"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"burner"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1979qcq0kdz72w0k9rsxcmfmagx2cydrs40q2xg"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"25040816326530612224inj"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"coin_received"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"receiver"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1979qcq0kdz72w0k9rsxcmfmagx2cydrs40q2xg"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"25040816326530612224inj"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"coin_spent"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"spender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"25040816326530612224inj"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"spender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1979qcq0kdz72w0k9rsxcmfmagx2cydrs40q2xg"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"25040816326530612224inj"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"injective.peggy.v1.EventSendToEth"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"{</span><span class="se">\"</span><span class="s">denom</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">23000000000000000000</span><span class="se">\"</span><span class="s">}"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"bridge_fee"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"{</span><span class="se">\"</span><span class="s">denom</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">2040816326530612224</span><span class="se">\"</span><span class="s">}"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"outgoing_tx_id"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">87</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"sender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"receiver"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">0xaf79152ac5df276d9a8e1e2e22822f9713474902</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"message"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"action"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"/injective.peggy.v1.MsgSendToEth"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"sender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"transfer"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"recipient"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1979qcq0kdz72w0k9rsxcmfmagx2cydrs40q2xg"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"sender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"25040816326530612224inj"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="s">"gas_wanted"</span><span class="p">:</span> <span class="mi">119267</span><span class="p">,</span>
<span class="s">"gas_used"</span><span class="p">:</span> <span class="mi">114729</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">2997</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663214</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">0</span><span class="n">ECDD061DB698A4162E45DCA9A21795937E55B92CE41EC49B71098833D2E316F</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">2998</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='account-sendtocosmos'>SendToCosmos</h2><h3 id='account-sendtocosmos-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">import</span> <span class="nn">importlib.resources</span> <span class="k">as</span> <span class="n">pkg_resources</span>
<span class="kn">import</span> <span class="nn">pyinjective</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="n">private_key</span> <span class="o">=</span> <span class="s">"f9db9bf330e23cb7839039e944adef6e9df447b90b503d5b4464c90bea9022f3"</span>
    <span class="n">ethereum_endpoint</span> <span class="o">=</span> <span class="s">"https://kovan.infura.io/v3/c518f454950e48aeab12161c49f26e30"</span>

    <span class="n">maxFeePerGas_Gwei</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">maxPriorityFeePerGas_Gwei</span> <span class="o">=</span> <span class="mi">4</span>

    <span class="n">token_contract</span> <span class="o">=</span> <span class="s">"0x36b3d7ace7201e28040eff30e815290d7b37ffad"</span>
    <span class="n">receiver</span> <span class="o">=</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">import_peggo</span> <span class="o">=</span> <span class="n">pkg_resources</span><span class="p">.</span><span class="n">read_text</span><span class="p">(</span><span class="n">pyinjective</span><span class="p">,</span> <span class="s">'Peggo_ABI.json'</span><span class="p">)</span>
    <span class="n">peggo_abi</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">import_peggo</span><span class="p">)</span>

    <span class="n">composer</span><span class="p">.</span><span class="n">SendToCosmos</span><span class="p">(</span>
      <span class="n">ethereum_endpoint</span><span class="o">=</span><span class="n">ethereum_endpoint</span><span class="p">,</span> <span class="n">private_key</span><span class="o">=</span><span class="n">private_key</span><span class="p">,</span>
      <span class="n">token_contract</span><span class="o">=</span><span class="n">token_contract</span><span class="p">,</span> <span class="n">receiver</span><span class="o">=</span><span class="n">receiver</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="n">amount</span><span class="p">,</span>
      <span class="n">maxFeePerGas</span><span class="o">=</span><span class="n">maxFeePerGas_Gwei</span><span class="p">,</span> <span class="n">maxPriorityFeePerGas</span><span class="o">=</span><span class="n">maxPriorityFeePerGas_Gwei</span><span class="p">,</span>
      <span class="n">peggo_abi</span><span class="o">=</span><span class="n">peggo_abi</span><span class="p">)</span>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>ethereum_endpoint</td>
<td>string</td>
<td>The ethereum endpoint, you can get one from providers like Infura and Alchemy</td>
<td>Yes</td>
</tr>
<tr>
<td>token_contract</td>
<td>string</td>
<td>The token contract, you can find the contract for the token you want to transfer on etherscan</td>
<td>Yes</td>
</tr>
<tr>
<td>receiver</td>
<td>string</td>
<td>The Injective Chain address to receive the funds</td>
<td>Yes</td>
</tr>
<tr>
<td>maxFeePerGas_Gwei</td>
<td>int</td>
<td>The maxFeePerGas in Gwei</td>
<td>Yes</td>
</tr>
<tr>
<td>maxPriorityFeePerGas_Gwei</td>
<td>int</td>
<td>The maxPriorityFeePerGas in Gwei</td>
<td>Yes</td>
</tr>
<tr>
<td>amount</td>
<td>int</td>
<td>The amount you want to transfer</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"Transferred 1 0x36b3d7ace7201e28040eff30e815290d7b37ffad from 0xbdAEdEc95d563Fb05240d6e01821008454c24C36 to inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>

<span class="s">"Transaction hash: 0xb538abc7c2f893a2fe24c7a8ea606ff48d980a754499f1bec89b862c2bcb9ea7"</span>
</code></pre></div><h1 id='auction'>- Auction</h1>
<p>Includes the message for placing bids in auctions.</p>
<h2 id='auction-msgbid'>MsgBid</h2><h3 id='auction-msgbid-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgBid</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="nb">round</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">bid_amount</span><span class="o">=</span><span class="mi">1</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span>  <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

      <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>

    <span class="c1"># print tx response
</span>    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"fmt"</span>
  <span class="s">"os"</span>
  <span class="s">"time"</span>

  <span class="n">sdktypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
  <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

  <span class="n">auctiontypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/auction/types"</span>
  <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
    <span class="s">"injectived"</span><span class="p">,</span>
    <span class="s">"file"</span><span class="p">,</span>
    <span class="s">"inj-user"</span><span class="p">,</span>
    <span class="s">"12345678"</span><span class="p">,</span>
    <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
    <span class="no">false</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
    <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">cosmosKeyring</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

  <span class="n">round</span> <span class="o">:=</span> <span class="kt">uint64</span><span class="p">(</span><span class="m">9355</span><span class="p">)</span>
  <span class="n">bidAmount</span> <span class="o">:=</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">Coin</span><span class="p">{</span>
    <span class="n">Denom</span><span class="o">:</span> <span class="s">"inj"</span><span class="p">,</span> <span class="n">Amount</span><span class="o">:</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">NewInt</span><span class="p">(</span><span class="m">1000000000000000000</span><span class="p">),</span> <span class="c">// 1 INJ</span>
  <span class="p">}</span>

  <span class="n">msg</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">auctiontypes</span><span class="o">.</span><span class="n">MsgBid</span><span class="p">{</span>
    <span class="n">Sender</span><span class="o">:</span>    <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">Round</span><span class="o">:</span>     <span class="n">round</span><span class="p">,</span>
    <span class="n">BidAmount</span><span class="o">:</span> <span class="n">bidAmount</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
    <span class="n">clientCtx</span><span class="p">,</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="highlight typescript"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">getNetworkInfo</span><span class="p">,</span> <span class="nx">Network</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@injectivelabs/networks</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">AuctionCore</span><span class="p">,</span>
  <span class="nx">ChainClient</span><span class="p">,</span>
  <span class="nx">PrivateKey</span><span class="p">,</span>
  <span class="nx">BaseAccount</span><span class="p">,</span>
  <span class="nx">TxInjective</span><span class="p">,</span>
  <span class="nx">TxService</span><span class="p">,</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@injectivelabs/sdk-ts</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">BigNumberInBase</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@injectivelabs/utils</span><span class="dl">"</span><span class="p">;</span>

<span class="cm">/** MsgBid Example */</span>
<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">network</span> <span class="o">=</span> <span class="nx">getNetworkInfo</span><span class="p">(</span><span class="nx">Network</span><span class="p">.</span><span class="nx">Testnet</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">privateKey</span> <span class="o">=</span> <span class="nx">PrivateKey</span><span class="p">.</span><span class="nx">fromPrivateKey</span><span class="p">(</span>
    <span class="dl">"</span><span class="s2">241824dffdda13c05f5a0de30d3ac7511849005585d89f7a045368cded0e6271</span><span class="dl">"</span>
  <span class="p">);</span>
  <span class="kd">const</span> <span class="nx">injectiveAddress</span> <span class="o">=</span> <span class="nx">privateKey</span><span class="p">.</span><span class="nx">toBech32</span><span class="p">();</span>

  <span class="cm">/** Account Details **/</span>
  <span class="kd">const</span> <span class="nx">accountDetails</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nx">ChainClient</span><span class="p">.</span><span class="nx">AuthRestApi</span><span class="p">(</span>
    <span class="nx">network</span><span class="p">.</span><span class="nx">sentryHttpApi</span>
  <span class="p">).</span><span class="nx">account</span><span class="p">(</span><span class="nx">injectiveAddress</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">baseAccount</span> <span class="o">=</span> <span class="nx">BaseAccount</span><span class="p">.</span><span class="nx">fromRestApi</span><span class="p">(</span><span class="nx">accountDetails</span><span class="p">);</span>

  <span class="cm">/** Prepare the Message */</span>
  <span class="kd">const</span> <span class="nx">auctionModuleState</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nx">ChainClient</span><span class="p">.</span><span class="nx">AuctionApi</span><span class="p">(</span>
    <span class="nx">network</span><span class="p">.</span><span class="nx">sentryGrpcApi</span>
  <span class="p">).</span><span class="nx">moduleState</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">latestRound</span> <span class="o">=</span> <span class="nx">auctionModuleState</span><span class="p">.</span><span class="nx">getState</span><span class="p">()?.</span><span class="nx">getAuctionRound</span><span class="p">();</span>
  <span class="kd">const</span> <span class="nx">round</span> <span class="o">=</span> <span class="nx">latestRound</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">bid</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="cm">/** 1 INJ */</span>
  <span class="kd">const</span> <span class="nx">amount</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">amount</span><span class="p">:</span> <span class="k">new</span> <span class="nx">BigNumberInBase</span><span class="p">(</span><span class="nx">bid</span><span class="p">).</span><span class="nx">toWei</span><span class="p">().</span><span class="nx">toFixed</span><span class="p">(),</span>
    <span class="na">denom</span><span class="p">:</span> <span class="dl">"</span><span class="s2">inj</span><span class="dl">"</span><span class="p">,</span>
  <span class="p">};</span>
  <span class="kd">const</span> <span class="nx">msg</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AuctionCore</span><span class="p">.</span><span class="nx">MsgBid</span><span class="p">({</span>
    <span class="nx">round</span><span class="p">,</span>
    <span class="nx">amount</span><span class="p">,</span>
    <span class="nx">injectiveAddress</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="cm">/** Prepare the Transaction **/</span>
  <span class="kd">const</span> <span class="nx">txInjective</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TxInjective</span><span class="p">({</span>
    <span class="nx">baseAccount</span><span class="p">,</span>
    <span class="na">msgs</span><span class="p">:</span> <span class="p">[</span><span class="nx">msg</span><span class="p">],</span>
    <span class="na">chainId</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">chainId</span><span class="p">,</span>
    <span class="na">address</span><span class="p">:</span> <span class="nx">injectiveAddress</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="cm">/** Sign transaction */</span>
  <span class="kd">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">privateKey</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">txInjective</span><span class="p">.</span><span class="nx">signBytes</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">signedTxInjective</span> <span class="o">=</span> <span class="nx">txInjective</span><span class="p">.</span><span class="nx">withSignature</span><span class="p">(</span><span class="nx">signature</span><span class="p">);</span>

  <span class="cm">/** Calculate hash of the transaction */</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Transaction Hash: </span><span class="p">${</span><span class="nx">signedTxInjective</span><span class="p">.</span><span class="nx">getTxHash</span><span class="p">()}</span><span class="s2">`</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">txService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TxService</span><span class="p">({</span>
    <span class="na">txInjective</span><span class="p">:</span> <span class="nx">signedTxInjective</span><span class="p">,</span>
    <span class="na">endpoint</span><span class="p">:</span> <span class="nx">network</span><span class="p">.</span><span class="nx">sentryGrpcApi</span><span class="p">,</span>
  <span class="p">});</span>

  <span class="cm">/** Simulate transaction */</span>
  <span class="kd">const</span> <span class="nx">simulationResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">txService</span><span class="p">.</span><span class="nx">simulate</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
    <span class="s2">`Transaction simulation response: </span><span class="p">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span>
      <span class="nx">simulationResponse</span><span class="p">.</span><span class="nx">gasInfo</span>
    <span class="p">)}</span><span class="s2">`</span>
  <span class="p">);</span>

  <span class="cm">/** Broadcast transaction */</span>
  <span class="kd">const</span> <span class="nx">txResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">txService</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">();</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
    <span class="s2">`Broadcasted transaction hash: </span><span class="p">${</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">txResponse</span><span class="p">.</span><span class="nx">txhash</span><span class="p">)}</span><span class="s2">`</span>
  <span class="p">);</span>
<span class="p">})();</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address</td>
<td>Yes</td>
</tr>
<tr>
<td>round</td>
<td>string</td>
<td>The auction round</td>
<td>Yes</td>
</tr>
<tr>
<td>bid_amount</td>
<td>string</td>
<td>The bid amount in INJ</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"height"</span><span class="p">:</span> <span class="mi">28997</span><span class="p">,</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"EFC7609AB31B89F90729312E41817676AC8B4657F794E4F4440CB5959FA5B1FC"</span><span class="p">,</span>
<span class="s">"data"</span><span class="p">:</span> <span class="s">"0A230A212F696E6A6563746976652E61756374696F6E2E763162657461312E4D7367426964"</span><span class="p">,</span>
<span class="s">"raw_log"</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_received</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">receiver</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1j4yzhgjm00ch3h0p9kel7g8sp6g045qf32pzlj</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_spent</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">spender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">injective.auction.v1beta1.EventBid</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">bidder</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">{</span><span class="se">\\\"</span><span class="s">denom</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">inj</span><span class="se">\\\"</span><span class="s">,</span><span class="se">\\\"</span><span class="s">amount</span><span class="se">\\\"</span><span class="s">:</span><span class="se">\\\"</span><span class="s">1000000000000000000</span><span class="se">\\\"</span><span class="s">}</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">round</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">66</span><span class="se">\\\"\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/injective.auction.v1beta1.MsgBid</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">transfer</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">recipient</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1j4yzhgjm00ch3h0p9kel7g8sp6g045qf32pzlj</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]}]}]"</span><span class="p">,</span>
<span class="s">"logs"</span><span class="p">:</span> <span class="p">{</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"coin_received"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"receiver"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1j4yzhgjm00ch3h0p9kel7g8sp6g045qf32pzlj"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"coin_spent"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"spender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"injective.auction.v1beta1.EventBid"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"bidder"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"{</span><span class="se">\"</span><span class="s">denom</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000</span><span class="se">\"</span><span class="s">}"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"round"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">66</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"message"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"action"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"/injective.auction.v1beta1.MsgBid"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"sender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"transfer"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"recipient"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj1j4yzhgjm00ch3h0p9kel7g8sp6g045qf32pzlj"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"sender"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"amount"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="s">"gas_wanted"</span><span class="p">:</span> <span class="mi">96957</span><span class="p">,</span>
<span class="s">"gas_used"</span><span class="p">:</span> <span class="mi">94281</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3001</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663646</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="n">EFC7609AB31B89F90729312E41817676AC8B4657F794E4F4440CB5959FA5B1FC</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3002</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><div class="highlight"><pre class="highlight typescript"><code><span class="nx">Transaction</span> <span class="nx">Hash</span><span class="p">:</span> <span class="nx">d0c50c3e6e630a70de1525ef43af3a33939a0e93f6b7b6a8c0108406a86bb9a3</span>
<span class="nx">Transaction</span> <span class="nx">simulation</span> <span class="nx">response</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">gasWanted</span><span class="dl">"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="dl">"</span><span class="s2">gasUsed</span><span class="dl">"</span><span class="p">:</span><span class="mi">99477</span><span class="p">}</span>
<span class="nx">Broadcasted</span> <span class="nx">transaction</span> <span class="nx">hash</span><span class="p">:</span> <span class="dl">"</span><span class="s2">D0C50C3E6E630A70DE1525EF43AF3A33939A0E93F6B7B6A8C0108406A86BB9A3</span><span class="dl">"</span>
</code></pre></div><h1 id='authz'>- Authz</h1>
<p>Includes all messages and queries related to the Authz module. Authz is an implementation of the Cosmos SDK module, that allows granting arbitrary privileges from one account (the granter) to another account (the grantee). Authorizations must be granted for a particular Msg service method one by one using an implementation of the Authorization interface.</p>
<h2 id='authz-msggrant'>MsgGrant</h2>
<p>There are two types of authorization, Generic and Typed. Generic authorization will grant permissions to the grantee to execute exchange-related messages in all markets, typed authorization restricts the privileges to specified markets. Typed authorization is generally more safe since even if the grantee&#39;s key is compromised the attacker will only be able to send orders in specified markets - thus prevents them from launching bogus markets on-chain and executing orders on behalf of the granter.</p>
<h3 id='authz-msggrant-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">market_ids</span> <span class="o">=</span> <span class="p">[</span><span class="s">"0x0511ddc4e6586f3bfe1acb2dd905f8b8a82c97e1edaef654b12ca7e6031ca0fa"</span><span class="p">]</span>

    <span class="c1"># prepare tx msg
</span>
    <span class="c1">#GENERIC AUTHZ
</span>    <span class="c1"># msg = composer.MsgGrantGeneric(
</span>    <span class="c1">#     granter = "inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku",
</span>    <span class="c1">#     grantee = "inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r",
</span>    <span class="c1">#     msg_type = "/injective.exchange.v1beta1.MsgCreateSpotLimitOrder",
</span>    <span class="c1">#     expire_in=31536000 # 1 year
</span>    <span class="c1"># )
</span>
    <span class="c1">#TYPED AUTHZ
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgGrantTyped</span><span class="p">(</span>
        <span class="n">granter</span> <span class="o">=</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span><span class="p">,</span>
        <span class="n">grantee</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span><span class="p">,</span>
        <span class="n">msg_type</span> <span class="o">=</span> <span class="s">"CreateSpotLimitOrderAuthz"</span><span class="p">,</span>
        <span class="n">expire_in</span><span class="o">=</span><span class="mi">31536000</span><span class="p">,</span> <span class="c1"># 1 year
</span>        <span class="n">subaccount_id</span><span class="o">=</span><span class="n">subaccount_id</span><span class="p">,</span>
        <span class="n">market_ids</span><span class="o">=</span><span class="n">market_ids</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">granter</span> <span class="o">:=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">grantee</span> <span class="o">:=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>
    <span class="n">expireIn</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">AddDate</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span> <span class="c">// years months days</span>

    <span class="c">//GENERIC AUTHZ</span>
    <span class="c">//msgtype := "/injective.exchange.v1beta1.MsgCreateSpotLimitOrder"</span>
    <span class="c">//msg := chainClient.BuildGenericAuthz(granter, grantee, msgtype, expireIn)</span>

    <span class="c">//TYPED AUTHZ</span>
    <span class="n">msg</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">BuildExchangeAuthz</span><span class="p">(</span>
        <span class="n">granter</span><span class="p">,</span>
        <span class="n">grantee</span><span class="p">,</span>
        <span class="n">chainclient</span><span class="o">.</span><span class="n">CreateSpotLimitOrderAuthz</span><span class="p">,</span>
        <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">senderAddress</span><span class="p">)</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"0xe0dc13205fb8b23111d8555a6402681965223135d368eeeb964681f9ff12eb2a"</span><span class="p">},</span>
        <span class="n">expireIn</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>granter</td>
<td>string</td>
<td>The INJ address authorizing a grantee</td>
<td>Yes</td>
</tr>
<tr>
<td>grantee</td>
<td>string</td>
<td>The INJ address being authorized by the granter</td>
<td>Yes</td>
</tr>
<tr>
<td>msg_type</td>
<td>string</td>
<td>The message type being authorized by the granter</td>
<td>Yes</td>
</tr>
<tr>
<td>expire_in</td>
<td>integer</td>
<td>The expiration time for the authorization</td>
<td>Yes</td>
</tr>
</tbody></table>

<p><strong>Typed Authorization Messages</strong></p>

<ol>
<li><p>CreateSpotLimitOrderAuthz</p></li>
<li><p>CreateSpotMarketOrderAuthz</p></li>
<li><p>BatchCreateSpotLimitOrdersAuthz</p></li>
<li><p>CancelSpotOrderAuthz</p></li>
<li><p>BatchCancelSpotOrdersAuthz</p></li>
<li><p>CreateDerivativeLimitOrderAuthz</p></li>
<li><p>CreateDerivativeMarketOrderAuthz</p></li>
<li><p>BatchCreateDerivativeLimitOrdersAuthz</p></li>
<li><p>CancelDerivativeOrderAuthz</p></li>
<li><p>BatchCancelDerivativeOrdersAuthz</p></li>
<li><p>BatchUpdateOrdersAuthz</p></li>
</ol>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="n">tx</span> <span class="n">response</span>
<span class="n">height</span><span class="p">:</span> <span class="mi">4456266</span>
<span class="n">txhash</span><span class="p">:</span> <span class="s">"E77C40894B88B88415468ECFF4636734DB364F85FFE19E3876870366780DBECF"</span>
<span class="n">data</span><span class="p">:</span> <span class="s">"0A200A1E2F636F736D6F732E617574687A2E763162657461312E4D73674772616E74"</span>
<span class="n">raw_log</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">cosmos.authz.v1beta1.EventGrant</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">msg_type_url</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">/injective.exchange.v1beta1.MsgCreateSpotLimitOrder</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">granter</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">grantee</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\\\"\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/cosmos.authz.v1beta1.MsgGrant</span><span class="se">\"</span><span class="s">}]}]}]"</span>
<span class="n">logs</span> <span class="p">{</span>
  <span class="n">events</span> <span class="p">{</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s">"cosmos.authz.v1beta1.EventGrant"</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"msg_type_url"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">/injective.exchange.v1beta1.MsgCreateSpotLimitOrder</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"granter"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"grantee"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">events</span> <span class="p">{</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s">"message"</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"action"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"/cosmos.authz.v1beta1.MsgGrant"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">gas_wanted</span><span class="p">:</span> <span class="mi">96103</span>
<span class="n">gas_used</span><span class="p">:</span> <span class="mi">89785</span>

<span class="n">tx</span> <span class="n">msg</span> <span class="n">response</span>
<span class="p">[]</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3001</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663646</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="n">F4340E4A11EFE2685C604147FBDB6703D8C704525046D651934B7C667F55A241</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3002</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='authz-msgexec'>MsgExec</h2><h3 id='authz-msgexec-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>
    <span class="n">subaccount_id</span> <span class="o">=</span> <span class="n">address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">market_id</span> <span class="o">=</span> <span class="s">"0xa508cb32923323679f29a032c70342c147c17d0145625922b0ef22e955c844c0"</span>

    <span class="n">grantee</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>
    <span class="n">granter_inj_address</span> <span class="o">=</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="n">granter_address</span> <span class="o">=</span> <span class="n">Address</span><span class="p">.</span><span class="n">from_acc_bech32</span><span class="p">(</span><span class="n">granter_inj_address</span><span class="p">)</span>
    <span class="n">granter_subaccount_id</span> <span class="o">=</span> <span class="n">granter_address</span><span class="p">.</span><span class="n">get_subaccount_id</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">msg0</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgCreateSpotLimitOrder</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">granter_inj_address</span><span class="p">,</span>
        <span class="n">market_id</span><span class="o">=</span><span class="n">market_id</span><span class="p">,</span>
        <span class="n">subaccount_id</span><span class="o">=</span><span class="n">granter_subaccount_id</span><span class="p">,</span>
        <span class="n">fee_recipient</span><span class="o">=</span><span class="n">grantee</span><span class="p">,</span>
        <span class="n">price</span><span class="o">=</span><span class="mf">7.523</span><span class="p">,</span>
        <span class="n">quantity</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">is_buy</span><span class="o">=</span><span class="bp">True</span>
    <span class="p">)</span>

    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgExec</span><span class="p">(</span>
        <span class="n">grantee</span><span class="o">=</span><span class="n">grantee</span><span class="p">,</span>
        <span class="n">msgs</span><span class="o">=</span><span class="p">[</span><span class="n">msg0</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span>  <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>

    <span class="c1"># print tx response
</span>    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">codectypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/codec/types"</span>
    <span class="n">cosmtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="n">sdk</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="n">authztypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/x/authz"</span>
    <span class="s">"github.com/shopspring/decimal"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">exchangetypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/exchange/types"</span>
    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"f9db9bf330e23cb7839039e944adef6e9df447b90b503d5b4464c90bea9022f3"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c">// note that we use grantee keyring to send the msg on behalf of granter here</span>
    <span class="c">// sender, subaccount are from granter</span>
    <span class="n">granter</span> <span class="o">:=</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="n">grantee</span> <span class="o">:=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>
    <span class="n">granterAcc</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">sdk</span><span class="o">.</span><span class="n">AccAddressFromBech32</span><span class="p">(</span><span class="n">granter</span><span class="p">)</span>
    <span class="n">defaultSubaccountID</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">DefaultSubaccount</span><span class="p">(</span><span class="n">granterAcc</span><span class="p">)</span>

    <span class="n">marketId</span> <span class="o">:=</span> <span class="s">"0x0511ddc4e6586f3bfe1acb2dd905f8b8a82c97e1edaef654b12ca7e6031ca0fa"</span>
    <span class="n">amount</span> <span class="o">:=</span> <span class="n">decimal</span><span class="o">.</span><span class="n">NewFromFloat</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>
    <span class="n">price</span> <span class="o">:=</span> <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"22"</span><span class="p">)</span>
    <span class="n">orderSize</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">GetSpotQuantity</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span> <span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"10000"</span><span class="p">),</span> <span class="m">6</span><span class="p">)</span>
    <span class="n">order</span> <span class="o">:=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">SpotOrder</span><span class="p">(</span><span class="n">defaultSubaccountID</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">chainclient</span><span class="o">.</span><span class="n">SpotOrderData</span><span class="p">{</span>
        <span class="n">OrderType</span><span class="o">:</span>    <span class="n">exchangetypes</span><span class="o">.</span><span class="n">OrderType_BUY</span><span class="p">,</span> <span class="c">//BUY SELL BUY_PO SELL_PO</span>
        <span class="n">Quantity</span><span class="o">:</span>     <span class="n">orderSize</span><span class="p">,</span>
        <span class="n">Price</span><span class="o">:</span>        <span class="n">price</span><span class="p">,</span>
        <span class="n">FeeRecipient</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">MarketId</span><span class="o">:</span>     <span class="n">marketId</span><span class="p">,</span>
    <span class="p">})</span>

    <span class="c">// manually pack msg into Any type</span>
    <span class="n">msg0</span> <span class="o">:=</span> <span class="n">exchangetypes</span><span class="o">.</span><span class="n">MsgCreateSpotLimitOrder</span><span class="p">{</span>
        <span class="n">Sender</span><span class="o">:</span> <span class="n">granter</span><span class="p">,</span>
        <span class="n">Order</span><span class="o">:</span>  <span class="o">*</span><span class="n">order</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">msg0Bytes</span><span class="p">,</span> <span class="n">_</span> <span class="o">:=</span> <span class="n">msg0</span><span class="o">.</span><span class="n">Marshal</span><span class="p">()</span>
    <span class="n">msg0Any</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">codectypes</span><span class="o">.</span><span class="n">Any</span><span class="p">{}</span>
    <span class="n">msg0Any</span><span class="o">.</span><span class="n">TypeUrl</span> <span class="o">=</span> <span class="n">sdk</span><span class="o">.</span><span class="n">MsgTypeURL</span><span class="p">(</span><span class="o">&amp;</span><span class="n">msg0</span><span class="p">)</span>
    <span class="n">msg0Any</span><span class="o">.</span><span class="n">Value</span> <span class="o">=</span> <span class="n">msg0Bytes</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">authztypes</span><span class="o">.</span><span class="n">MsgExec</span><span class="p">{</span>
        <span class="n">Grantee</span><span class="o">:</span> <span class="n">grantee</span><span class="p">,</span>
        <span class="n">Msgs</span><span class="o">:</span>    <span class="p">[]</span><span class="o">*</span><span class="n">codectypes</span><span class="o">.</span><span class="n">Any</span><span class="p">{</span><span class="n">msg0Any</span><span class="p">},</span>
    <span class="p">}</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>grantee</td>
<td>string</td>
<td>The INJ address of the grantee</td>
<td>Yes</td>
</tr>
<tr>
<td>msgs</td>
<td>array</td>
<td>The messages to be executed on behalf of the granter</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"height"</span><span class="p">:</span> <span class="mi">13994957</span><span class="p">,</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"5C2376EF69E1CBC0E85588BDFFBEDDBC38DE4D4CB1DE87950C6D1A83E7BDA59C"</span><span class="p">,</span>
<span class="s">"data"</span><span class="p">:</span> <span class="s">"0A670A1D2F636F736D6F732E617574687A2E763162657461312E4D73674578656312460A440A42307839366361613465656337333564383631616266333031333265656439353864363539626237333962623934643832616230663536333162633535393138313563"</span><span class="p">,</span>
<span class="s">"raw_log"</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/cosmos.authz.v1beta1.MsgExec</span><span class="se">\"</span><span class="s">}]}]}]"</span><span class="p">,</span>
<span class="s">"logs"</span><span class="p">:</span> <span class="p">{</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"message"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"action"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"/cosmos.authz.v1beta1.MsgExec"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="s">"gas_wanted"</span><span class="p">:</span> <span class="mi">93631</span><span class="p">,</span>
<span class="s">"gas_used"</span><span class="p">:</span> <span class="mi">90796</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3001</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663646</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">5</span><span class="n">C2376EF69E1CBC0E85588BDFFBEDDBC38DE4D4CB1DE87950C6D1A83E7BDA59C</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3002</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='authz-msgrevoke'>MsgRevoke</h2><h3 id='authz-msgrevoke-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgRevoke</span><span class="p">(</span>
        <span class="n">granter</span> <span class="o">=</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span><span class="p">,</span>
        <span class="n">grantee</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span><span class="p">,</span>
        <span class="n">msg_type</span> <span class="o">=</span> <span class="s">"/injective.exchange.v1beta1.MsgCreateSpotLimitOrder"</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span>  <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>

    <span class="c1"># print tx response
</span>    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">authztypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/x/authz"</span>
    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">grantee</span> <span class="o">:=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>
    <span class="n">msgType</span> <span class="o">:=</span> <span class="s">"/injective.exchange.v1beta1.MsgCreateSpotLimitOrder"</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">authztypes</span><span class="o">.</span><span class="n">MsgRevoke</span><span class="p">{</span>
        <span class="n">Granter</span><span class="o">:</span>    <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">Grantee</span><span class="o">:</span>    <span class="n">grantee</span><span class="p">,</span>
        <span class="n">MsgTypeUrl</span><span class="o">:</span> <span class="n">msgType</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>granter</td>
<td>string</td>
<td>The INJ address unauthorizing a grantee</td>
<td>Yes</td>
</tr>
<tr>
<td>grantee</td>
<td>string</td>
<td>The INJ address being unauthorized by the granter</td>
<td>Yes</td>
</tr>
<tr>
<td>msg_type</td>
<td>string</td>
<td>The message type being unauthorized by the granter</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"height"</span><span class="p">:</span> <span class="mi">13994965</span><span class="p">,</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"43C9F83AB520B3CE18D210D8D45E49AF68D6A71E7A0E3F5E273A9EA929DFE540"</span><span class="p">,</span>
<span class="s">"data"</span><span class="p">:</span> <span class="s">"0A210A1F2F636F736D6F732E617574687A2E763162657461312E4D73675265766F6B65"</span><span class="p">,</span>
<span class="s">"raw_log"</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">cosmos.authz.v1beta1.EventRevoke</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">grantee</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">msg_type_url</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">/injective.exchange.v1beta1.MsgCreateSpotLimitOrder</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">granter</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\\\"\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/cosmos.authz.v1beta1.MsgRevoke</span><span class="se">\"</span><span class="s">}]}]}]"</span><span class="p">,</span>
<span class="s">"logs"</span><span class="p">:</span> <span class="p">{</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"cosmos.authz.v1beta1.EventRevoke"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"grantee"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"msg_type_url"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">/injective.exchange.v1beta1.MsgCreateSpotLimitOrder</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"granter"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"message"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"action"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"/cosmos.authz.v1beta1.MsgRevoke"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="s">"gas_wanted"</span><span class="p">:</span> <span class="mi">78688</span><span class="p">,</span>
<span class="s">"gas_used"</span><span class="p">:</span> <span class="mi">75886</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3001</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663646</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">43</span><span class="n">C9F83AB520B3CE18D210D8D45E49AF68D6A71E7A0E3F5E273A9EA929DFE540</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3002</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h2 id='authz-grants'>Grants</h2>
<p>Get the details of an authorization between a granter and a grantee.</p>
<h3 id='authz-grants-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">granter</span> <span class="o">=</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="n">grantee</span> <span class="o">=</span> <span class="s">"inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r"</span>
    <span class="n">msg_type_url</span> <span class="o">=</span> <span class="s">"/injective.exchange.v1beta1.MsgCreateSpotLimitOrder"</span>
    <span class="n">authorizations</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">get_grants</span><span class="p">(</span><span class="n">granter</span><span class="o">=</span><span class="n">granter</span><span class="p">,</span> <span class="n">grantee</span><span class="o">=</span><span class="n">grantee</span><span class="p">,</span> <span class="n">msg_type_url</span><span class="o">=</span><span class="n">msg_type_url</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">authorizations</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code>
</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>granter</td>
<td>string</td>
<td>The account owner</td>
<td>Yes</td>
</tr>
<tr>
<td>grantee</td>
<td>string</td>
<td>The authorized account</td>
<td>Yes</td>
</tr>
<tr>
<td>msg_type_url</td>
<td>int</td>
<td>The authorized message type</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='authz-grants-response-parameters'>Response Parameters</h3>
<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">

</span><span class="nl">"grants"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"authorization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/cosmos.authz.v1beta1.GenericAuthorization"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"</span><span class="se">\n</span><span class="s2">3/injective.exchange.v1beta1.MsgCreateSpotLimitOrder"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"expiration"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"seconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">1673468820</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>grants</td>
<td>Grants</td>
<td>Array of Grants</td>
</tr>
</tbody></table>

<p><strong>Grants</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>authorization</td>
<td>Authorization</td>
<td>Array of Authorization</td>
</tr>
<tr>
<td>expiration</td>
<td>Expiration</td>
<td>Array of Expiration</td>
</tr>
</tbody></table>

<p><strong>Authorization</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type_url</td>
<td>string</td>
<td>The authorization type</td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>The authorized message</td>
</tr>
</tbody></table>

<p><strong>Expiration</strong></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>seconds</td>
<td>string</td>
<td>The expiration time for an authorization</td>
</tr>
</tbody></table>
<h1 id='oracle'>- Oracle</h1>
<p>Includes the message to relay a price feed.</p>
<h2 id='oracle-msgrelaypricefeedprice'>MsgRelayPriceFeedPrice</h2><h3 id='oracle-msgrelaypricefeedprice-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span>  <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>

    <span class="n">price</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">quote_decimals</span> <span class="o">=</span> <span class="mi">18</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgRelayPriceFeedPrice</span><span class="p">(</span>
        <span class="n">sender</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">price</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">price</span> <span class="o">*</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">quote_decimals</span><span class="p">)))],</span>
        <span class="n">base</span><span class="o">=</span><span class="p">[</span><span class="s">"BAYC"</span><span class="p">],</span>
        <span class="n">quote</span><span class="o">=</span><span class="p">[</span><span class="s">"WETH"</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>

    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="n">res_msg</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">.</span><span class="n">MsgResponses</span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
  <span class="s">"fmt"</span>
  <span class="s">"os"</span>
  <span class="s">"time"</span>

  <span class="n">cosmtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
  <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

  <span class="n">oracletypes</span> <span class="s">"github.com/InjectiveLabs/sdk-go/chain/oracle/types"</span>
  <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
  <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
  <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
  <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
    <span class="s">"injectived"</span><span class="p">,</span>
    <span class="s">"file"</span><span class="p">,</span>
    <span class="s">"inj-user"</span><span class="p">,</span>
    <span class="s">"12345678"</span><span class="p">,</span>
    <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
    <span class="no">false</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
    <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">cosmosKeyring</span><span class="p">,</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

  <span class="n">price</span> <span class="o">:=</span> <span class="p">[]</span><span class="n">cosmtypes</span><span class="o">.</span><span class="n">Dec</span><span class="p">{</span><span class="n">cosmtypes</span><span class="o">.</span><span class="n">MustNewDecFromStr</span><span class="p">(</span><span class="s">"100"</span><span class="p">)}</span>
  <span class="n">base</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"BAYC"</span><span class="p">}</span>
  <span class="n">quote</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"WETH"</span><span class="p">}</span>

  <span class="n">msg</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="n">oracletypes</span><span class="o">.</span><span class="n">MsgRelayPriceFeedPrice</span><span class="p">{</span>
    <span class="n">Sender</span><span class="o">:</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
    <span class="n">Price</span><span class="o">:</span>  <span class="n">price</span><span class="p">,</span>
    <span class="n">Base</span><span class="o">:</span>   <span class="n">base</span><span class="p">,</span>
    <span class="n">Quote</span><span class="o">:</span>  <span class="n">quote</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
    <span class="n">clientCtx</span><span class="p">,</span>
    <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
    <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
  <span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

  <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>sender</td>
<td>string</td>
<td>The Injective Chain address of the sender</td>
<td>Yes</td>
</tr>
<tr>
<td>price</td>
<td>list</td>
<td>The price of the base asset</td>
<td>Yes</td>
</tr>
<tr>
<td>base</td>
<td>list</td>
<td>The base denom</td>
<td>Yes</td>
</tr>
<tr>
<td>quote</td>
<td>list</td>
<td>The quote denom</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"height"</span><span class="p">:</span> <span class="mi">1433865</span><span class="p">,</span>
<span class="s">"txhash"</span><span class="p">:</span> <span class="s">"1248012FD21D87752212389CA5F715566578A0ACB58D77ADB25806018B24216F"</span><span class="p">,</span>
<span class="s">"data"</span><span class="p">:</span> <span class="s">"0A320A302F696E6A6563746976652E6F7261636C652E763162657461312E4D736752656C61795072696365466565645072696365"</span><span class="p">,</span>
<span class="s">"raw_log"</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">injective.oracle.v1beta1.SetPriceFeedPriceEvent</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">relayer</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">base</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">BAYC</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">quote</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">WETH</span><span class="se">\\\"\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">price</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"\\\"</span><span class="s">100.000000000000000000</span><span class="se">\\\"\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/injective.oracle.v1beta1.MsgRelayPriceFeedPrice</span><span class="se">\"</span><span class="s">}]}]}]"</span><span class="p">,</span>
<span class="s">"logs"</span><span class="p">:</span> <span class="p">{</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"injective.oracle.v1beta1.SetPriceFeedPriceEvent"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"relayer"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">inj1hkhdaj2a2clmq5jq6mspsggqs32vynpk228q3r</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"base"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">BAYC</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"quote"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">WETH</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">},</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"price"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"</span><span class="se">\"</span><span class="s">100.000000000000000000</span><span class="se">\"</span><span class="s">"</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s">"events"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"message"</span><span class="p">,</span>
    <span class="s">"attributes"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"key"</span><span class="p">:</span> <span class="s">"action"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"/injective.oracle.v1beta1.MsgRelayPriceFeedPrice"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>
<span class="s">"gas_wanted"</span><span class="p">:</span> <span class="mi">89097</span><span class="p">,</span>
<span class="s">"gas_used"</span><span class="p">:</span> <span class="mi">84566</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3001</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:482"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">3663646</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:503"</span> <span class="n">txHash</span><span class="o">=</span><span class="m">1248012</span><span class="n">FD21D87752212389CA5F715566578A0ACB58D77ADB25806018B24216F</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3002</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:507"</span>
</code></pre></div><h1 id='staking'>- Staking</h1>
<p>Includes the messages to claim and withdraw delegator rewards</p>
<h2 id='staking-msgwithdrawdelegatorreward'>MsgWithdrawDelegatorReward</h2><h3 id='staking-msgwithdrawdelegatorreward-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">validator_address</span> <span class="o">=</span> <span class="s">"injvaloper1ultw9r29l8nxy5u6thcgusjn95vsy2caw722q5"</span>

    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgWithdrawDelegatorReward</span><span class="p">(</span>
        <span class="n">delegator_address</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">validator_address</span><span class="o">=</span><span class="n">validator_address</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
    <span class="n">distributiontypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/x/distribution/types"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">distributiontypes</span><span class="o">.</span><span class="n">MsgWithdrawDelegatorReward</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">DelegatorAddress</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">ValidatorAddress</span> <span class="o">=</span> <span class="s">"injvaloper14gy4acwjm96wd20awm9ar6j54lev5p7espy9ug"</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>delegator_address</td>
<td>string</td>
<td>The delegator&#39;s address</td>
<td>Yes</td>
</tr>
<tr>
<td>validator_address</td>
<td>string</td>
<td>The validator&#39;s address</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="n">tx</span> <span class="n">response</span>
<span class="n">height</span><span class="p">:</span> <span class="mi">4149181</span>
<span class="n">txhash</span><span class="p">:</span> <span class="s">"F35A8EC74D8083428EA697FC5C36E9F1A07AEE8DE3EB87F1FE278FED2B6DE4A7"</span>
<span class="n">data</span><span class="p">:</span> <span class="s">"0A390A372F636F736D6F732E646973747269627574696F6E2E763162657461312E4D7367576974686472617744656C656761746F72526577617264"</span>
<span class="n">raw_log</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_received</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">receiver</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">312609221171966805inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_spent</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">spender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">312609221171966805inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">module</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">distribution</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">transfer</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">recipient</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">312609221171966805inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">withdraw_rewards</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">312609221171966805inj</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">validator</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">injvaloper1ultw9r29l8nxy5u6thcgusjn95vsy2caw722q5</span><span class="se">\"</span><span class="s">}]}]}]"</span>
<span class="n">logs</span> <span class="p">{</span>
  <span class="n">events</span> <span class="p">{</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s">"coin_received"</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"receiver"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"amount"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"312609221171966805inj"</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">events</span> <span class="p">{</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s">"coin_spent"</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"spender"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"amount"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"312609221171966805inj"</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">events</span> <span class="p">{</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s">"message"</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"action"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"sender"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"module"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"distribution"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"sender"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">events</span> <span class="p">{</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s">"transfer"</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"recipient"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"sender"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"inj1jv65s3grqf6v6jl3dp4t6c9t9rk99cd8dkncm8"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"amount"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"312609221171966805inj"</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">events</span> <span class="p">{</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s">"withdraw_rewards"</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"amount"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"312609221171966805inj"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"validator"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"injvaloper1ultw9r29l8nxy5u6thcgusjn95vsy2caw722q5"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">gas_wanted</span><span class="p">:</span> <span class="mi">147782</span>
<span class="n">gas_used</span><span class="p">:</span> <span class="mi">141371</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3230</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:538"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0004</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">4149284</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:559"</span> <span class="n">txHash</span><span class="o">=</span><span class="n">F712F8D8094BAFBD3A3F038B288472429B5A917AB6C15821950A9AF74D8FFBDF</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0004</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3231</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:563"</span>
</code></pre></div><h2 id='staking-msgdelegate'>MsgDelegate</h2><h3 id='staking-msgdelegate-request-parameters'>Request Parameters</h3>
<blockquote>
<p>Request Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">pyinjective.composer</span> <span class="kn">import</span> <span class="n">Composer</span> <span class="k">as</span> <span class="n">ProtoMsgComposer</span>
<span class="kn">from</span> <span class="nn">pyinjective.async_client</span> <span class="kn">import</span> <span class="n">AsyncClient</span>
<span class="kn">from</span> <span class="nn">pyinjective.transaction</span> <span class="kn">import</span> <span class="n">Transaction</span>
<span class="kn">from</span> <span class="nn">pyinjective.constant</span> <span class="kn">import</span> <span class="n">Network</span>
<span class="kn">from</span> <span class="nn">pyinjective.wallet</span> <span class="kn">import</span> <span class="n">PrivateKey</span><span class="p">,</span> <span class="n">PublicKey</span><span class="p">,</span> <span class="n">Address</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="c1"># select network: local, testnet, mainnet
</span>    <span class="n">network</span> <span class="o">=</span> <span class="n">Network</span><span class="p">.</span><span class="n">testnet</span><span class="p">()</span>
    <span class="n">composer</span> <span class="o">=</span> <span class="n">ProtoMsgComposer</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">string</span><span class="p">())</span>

    <span class="c1"># initialize grpc client
</span>    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncClient</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">insecure</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sync_timeout_height</span><span class="p">()</span>

    <span class="c1"># load account
</span>    <span class="n">priv_key</span> <span class="o">=</span> <span class="n">PrivateKey</span><span class="p">.</span><span class="n">from_hex</span><span class="p">(</span><span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">)</span>
    <span class="n">pub_key</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">to_public_key</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="k">await</span> <span class="n">pub_key</span><span class="p">.</span><span class="n">to_address</span><span class="p">().</span><span class="n">async_init_num_seq</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">lcd_endpoint</span><span class="p">)</span>

    <span class="c1"># prepare tx msg
</span>    <span class="n">validator_address</span> <span class="o">=</span> <span class="s">"injvaloper1ultw9r29l8nxy5u6thcgusjn95vsy2caw722q5"</span>
    <span class="n">amount</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">msg</span> <span class="o">=</span> <span class="n">composer</span><span class="p">.</span><span class="n">MsgDelegate</span><span class="p">(</span>
        <span class="n">delegator_address</span><span class="o">=</span><span class="n">address</span><span class="p">.</span><span class="n">to_acc_bech32</span><span class="p">(),</span>
        <span class="n">validator_address</span><span class="o">=</span><span class="n">validator_address</span><span class="p">,</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">amount</span>
    <span class="p">)</span>

    <span class="c1"># build sim tx
</span>    <span class="n">tx</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Transaction</span><span class="p">()</span>
        <span class="p">.</span><span class="n">with_messages</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="p">.</span><span class="n">with_sequence</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_sequence</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_account_num</span><span class="p">(</span><span class="n">address</span><span class="p">.</span><span class="n">get_number</span><span class="p">())</span>
        <span class="p">.</span><span class="n">with_chain_id</span><span class="p">(</span><span class="n">network</span><span class="p">.</span><span class="n">chain_id</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">sim_sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sim_sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sim_sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">sim_tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sim_sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># simulate tx
</span>    <span class="p">(</span><span class="n">sim_res</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">simulate_tx</span><span class="p">(</span><span class="n">sim_tx_raw_bytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">sim_res</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="c1"># build tx
</span>    <span class="n">gas_price</span> <span class="o">=</span> <span class="mi">500000000</span>
    <span class="n">gas_limit</span> <span class="o">=</span> <span class="n">sim_res</span><span class="p">.</span><span class="n">gas_info</span><span class="p">.</span><span class="n">gas_used</span> <span class="o">+</span> <span class="mi">20000</span> <span class="c1"># add 20k for gas, fee computation
</span>    <span class="n">fee</span> <span class="o">=</span> <span class="p">[</span><span class="n">composer</span><span class="p">.</span><span class="n">Coin</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">gas_price</span> <span class="o">*</span> <span class="n">gas_limit</span><span class="p">,</span>
        <span class="n">denom</span><span class="o">=</span><span class="n">network</span><span class="p">.</span><span class="n">fee_denom</span><span class="p">,</span>
    <span class="p">)]</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">with_gas</span><span class="p">(</span><span class="n">gas_limit</span><span class="p">).</span><span class="n">with_fee</span><span class="p">(</span><span class="n">fee</span><span class="p">).</span><span class="n">with_memo</span><span class="p">(</span><span class="s">''</span><span class="p">).</span><span class="n">with_timeout_height</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">timeout_height</span><span class="p">)</span>
    <span class="n">sign_doc</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_sign_doc</span><span class="p">(</span><span class="n">pub_key</span><span class="p">)</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="n">priv_key</span><span class="p">.</span><span class="n">sign</span><span class="p">(</span><span class="n">sign_doc</span><span class="p">.</span><span class="n">SerializeToString</span><span class="p">())</span>
    <span class="n">tx_raw_bytes</span> <span class="o">=</span> <span class="n">tx</span><span class="p">.</span><span class="n">get_tx_data</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">pub_key</span><span class="p">)</span>

    <span class="c1"># broadcast tx: send_tx_async_mode, send_tx_sync_mode, send_tx_block_mode
</span>    <span class="n">res</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_tx_block_mode</span><span class="p">(</span><span class="n">tx_raw_bytes</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"tx response"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="s">"os"</span>
    <span class="s">"time"</span>

    <span class="n">rpchttp</span> <span class="s">"github.com/tendermint/tendermint/rpc/client/http"</span>

    <span class="n">chainclient</span> <span class="s">"github.com/InjectiveLabs/sdk-go/client/chain"</span>
    <span class="s">"github.com/InjectiveLabs/sdk-go/client/common"</span>
    <span class="n">sdktypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/types"</span>
    <span class="n">stakingtypes</span> <span class="s">"github.com/cosmos/cosmos-sdk/x/staking/types"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// network := common.LoadNetwork("mainnet", "k8s")</span>
    <span class="n">network</span> <span class="o">:=</span> <span class="n">common</span><span class="o">.</span><span class="n">LoadNetwork</span><span class="p">(</span><span class="s">"testnet"</span><span class="p">,</span> <span class="s">"k8s"</span><span class="p">)</span>
    <span class="n">tmRPC</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rpchttp</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">,</span> <span class="s">"/websocket"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">senderAddress</span><span class="p">,</span> <span class="n">cosmosKeyring</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">InitCosmosKeyring</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">Getenv</span><span class="p">(</span><span class="s">"HOME"</span><span class="p">)</span><span class="o">+</span><span class="s">"/.injectived"</span><span class="p">,</span>
        <span class="s">"injectived"</span><span class="p">,</span>
        <span class="s">"file"</span><span class="p">,</span>
        <span class="s">"inj-user"</span><span class="p">,</span>
        <span class="s">"12345678"</span><span class="p">,</span>
        <span class="s">"5d386fbdbf11f1141010f81a46b40f94887367562bd33b452bbaa6ce1cd1381e"</span><span class="p">,</span> <span class="c">// keyring will be used if pk not provided</span>
        <span class="no">false</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewClientContext</span><span class="p">(</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainId</span><span class="p">,</span>
        <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">(),</span>
        <span class="n">cosmosKeyring</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clientCtx</span> <span class="o">=</span> <span class="n">clientCtx</span><span class="o">.</span><span class="n">WithNodeURI</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">TmEndpoint</span><span class="p">)</span><span class="o">.</span><span class="n">WithClient</span><span class="p">(</span><span class="n">tmRPC</span><span class="p">)</span>

    <span class="n">chainClient</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">chainclient</span><span class="o">.</span><span class="n">NewChainClient</span><span class="p">(</span>
        <span class="n">clientCtx</span><span class="p">,</span>
        <span class="n">network</span><span class="o">.</span><span class="n">ChainGrpcEndpoint</span><span class="p">,</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionTLSCert</span><span class="p">(</span><span class="n">network</span><span class="o">.</span><span class="n">ChainTlsCert</span><span class="p">),</span>
        <span class="n">common</span><span class="o">.</span><span class="n">OptionGasPrices</span><span class="p">(</span><span class="s">"500000000inj"</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">msg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="n">stakingtypes</span><span class="o">.</span><span class="n">MsgDelegate</span><span class="p">)</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">DelegatorAddress</span> <span class="o">=</span> <span class="n">senderAddress</span><span class="o">.</span><span class="n">String</span><span class="p">()</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">ValidatorAddress</span> <span class="o">=</span> <span class="s">"injvaloper14gy4acwjm96wd20awm9ar6j54lev5p7espy9ug"</span>
    <span class="n">msg</span><span class="o">.</span><span class="n">Amount</span> <span class="o">=</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">Coin</span><span class="p">{</span>
        <span class="n">Denom</span><span class="o">:</span> <span class="s">"inj"</span><span class="p">,</span> <span class="n">Amount</span><span class="o">:</span> <span class="n">sdktypes</span><span class="o">.</span><span class="n">NewInt</span><span class="p">(</span><span class="m">1000000000000000000</span><span class="p">),</span> <span class="c">// 1 INJ</span>
    <span class="p">}</span>

    <span class="n">err</span> <span class="o">=</span> <span class="n">chainClient</span><span class="o">.</span><span class="n">QueueBroadcastMsg</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">time</span><span class="o">.</span><span class="n">Sleep</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Second</span> <span class="o">*</span> <span class="m">5</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>delegator_address</td>
<td>string</td>
<td>The delegator&#39;s address</td>
<td>Yes</td>
</tr>
<tr>
<td>validator_address</td>
<td>string</td>
<td>The validator&#39;s address</td>
<td>Yes</td>
</tr>
<tr>
<td>amount</td>
<td>int</td>
<td>The INJ amount to delegate</td>
<td>Yes</td>
</tr>
</tbody></table>

<blockquote>
<p>Response Example:</p>
</blockquote>
<div class="highlight"><pre class="highlight python tab-python"><code><span class="n">tx</span> <span class="n">response</span>
<span class="n">height</span><span class="p">:</span> <span class="mi">4149131</span>
<span class="n">txhash</span><span class="p">:</span> <span class="s">"28AF4AFDAA75E82742CB86882EFACD0955EA7590E05DC0B000C293C59D760610"</span>
<span class="n">data</span><span class="p">:</span> <span class="s">"0A250A232F636F736D6F732E7374616B696E672E763162657461312E4D736744656C6567617465"</span>
<span class="n">raw_log</span><span class="p">:</span> <span class="s">"[{</span><span class="se">\"</span><span class="s">events</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_received</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">receiver</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj1fl48vsnmsdzcv85q5d2q4z5ajdha8yu3lj7tt0</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">coin_spent</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">spender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">delegate</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">validator</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">injvaloper1ultw9r29l8nxy5u6thcgusjn95vsy2caw722q5</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1000000000000000000inj</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">new_shares</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">1001001001001001001.001001001001001001</span><span class="se">\"</span><span class="s">}]},{</span><span class="se">\"</span><span class="s">type</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">attributes</span><span class="se">\"</span><span class="s">:[{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">action</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">/cosmos.staking.v1beta1.MsgDelegate</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">module</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">staking</span><span class="se">\"</span><span class="s">},{</span><span class="se">\"</span><span class="s">key</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">sender</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">value</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku</span><span class="se">\"</span><span class="s">}]}]}]"</span>
<span class="n">logs</span> <span class="p">{</span>
  <span class="n">events</span> <span class="p">{</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s">"coin_received"</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"receiver"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"inj1fl48vsnmsdzcv85q5d2q4z5ajdha8yu3lj7tt0"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"amount"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">events</span> <span class="p">{</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s">"coin_spent"</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"spender"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"amount"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">events</span> <span class="p">{</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s">"delegate"</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"validator"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"injvaloper1ultw9r29l8nxy5u6thcgusjn95vsy2caw722q5"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"amount"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"1000000000000000000inj"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"new_shares"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"1001001001001001001.001001001001001001"</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">events</span> <span class="p">{</span>
    <span class="nb">type</span><span class="p">:</span> <span class="s">"message"</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"action"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"/cosmos.staking.v1beta1.MsgDelegate"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"module"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"staking"</span>
    <span class="p">}</span>
    <span class="n">attributes</span> <span class="p">{</span>
      <span class="n">key</span><span class="p">:</span> <span class="s">"sender"</span>
      <span class="n">value</span><span class="p">:</span> <span class="s">"inj14au322k9munkmx5wrchz9q30juf5wjgz2cfqku"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="n">gas_wanted</span><span class="p">:</span> <span class="mi">156807</span>
<span class="n">gas_used</span><span class="p">:</span> <span class="mi">150396</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">DEBU</span><span class="p">[</span><span class="m">0001</span><span class="p">]</span> <span class="n">broadcastTx</span> <span class="n">with</span> <span class="n">nonce</span> <span class="m">3228</span>                   <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:538"</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">msg</span> <span class="n">batch</span> <span class="n">committed</span> <span class="n">successfully</span> <span class="n">at</span> <span class="n">height</span> <span class="m">4149155</span>  <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:559"</span> <span class="n">txHash</span><span class="o">=</span><span class="n">FF728699A0E3A4C423891847E476CDCDC0D036F4508661B9C2E61FE706A08F4B</span>
<span class="n">DEBU</span><span class="p">[</span><span class="m">0003</span><span class="p">]</span> <span class="n">nonce</span> <span class="n">incremented</span> <span class="n">to</span> <span class="m">3229</span>                     <span class="n">fn</span><span class="o">=</span><span class="n">func1</span> <span class="n">src</span><span class="o">=</span><span class="s">"client/chain/chain.go:563"</span>
</code></pre></div><h1 id='glossary'>Glossary</h1><h2 id='glossary-injective-chain'>Injective Chain</h2>
<p>The Injective Chain refers to the blockchain running the Injective Protocol. It is is the fundamental piece of infrastructure and ultimate source of truth for any trades happening on the network.</p>
<h2 id='glossary-validator-injective-node'>Validator / Injective Node</h2>
<p>A validator is a node for the Injective Chain. The term node itself refers to a host computer in a network. In the context of blockchains, nodes are the computers participating in producing new blocks and validating new transactions in a peer-to-peer fashion. All on-chain code for Injective is executed on the hardware of every validator, in contrast to a CEX where code is executed on a central server.</p>
<h2 id='glossary-on-chain-matching'>On-chain Matching</h2>
<p>The matching algorithm is executed as part of validating the chain. It is executed on the hardware of every validator. Therefore it must be deterministic, so every validator comes to the same matching result. For fairness reasons the matching algorithm consists of frequent batch auctions (FBA).</p>
<h2 id='glossary-frequent-batch-auction-fba'>Frequent Batch Auction (FBA)</h2>
<p>Frequent Batch Auctions (FBA) are ensuring fair order matching prices by calculating one uniform clearing price over all orders in the same block. Rather than calculating the clearing price for every order, the FBA algorithm calculates the clearing price for a batch of orders. For more details, <a href="#overview-frequent-batch-auction-fba">here</a>.</p>
<h2 id='glossary-relayer'>Relayer</h2>
<p>The Injective Chain itself provides no historical data, no detailed statistics and no front-end. This is the role of the relayer. A relayer will index data emitted from the Injective Chain to provide an additional API and front-end.</p>
<h2 id='glossary-mempool'>Mempool</h2>
<p>A mempool refers to pending transactions in a blockchain. It is the place where transactions are stored before they are included in a block.</p>
<h2 id='glossary-grpc'>gRPC</h2>
<p>gRPC is a high-performance, open-source, general-purpose RPC framework that is used by the Injective Chain. It is used to communicate with the Injective Chain and the relayer.</p>
<h2 id='glossary-mark-price'>Mark Price</h2>
<p>Mark price refers to the oracle price for the underlying asset in a futures market. It is used to determine when a position is liquidable. Only when the mark price falls below your position&#39;s liquidation price, the position can be liquidated. The mark price is further used for market settlements, either in the case of an emergency stop due to the insurance fund draining or in the case of planned settlements for time-expiry future markets.</p>
<h2 id='glossary-perpetual-swap'>Perpetual Swap</h2>
<p>A perpetual swap is a futures contract without expiry date. Since those contracts never expire with a settlement price, a new mechanism is used to align future contract prices with the mark price: the funding rate.</p>
<h2 id='glossary-funding-rate'>Funding Rate</h2>
<p>In perpetual swaps a funding rate is used to align future contract prices with the mark price. The funding rate is calculated by keeping track of the volume weighted average of the deltas from mark price vs. trade execution price. It is applied to a position proportionally to the position&#39;s size.</p>
<h1 id='faq'>FAQ</h1><h2 id='faq-1-what-are-the-trading-fees-on-injective'>1. What are the trading fees on Injective?</h2>
<p>Trading fees differ per market and are defined through <a href="https://hub.injective.network/governance">governance</a> for both maker and taker orders. The fees can also be reduced based on your <a href="https://injective.exchange/fee-discounts">tier</a> which is determined based on your staked INJ and 30-day trailing fees.</p>

<p>Note that if you place trades through the API, you will only pay 60% of the trading fees regardless if your order is filled as a maker or taker. In every exchange-related message you can set recipient_fee to your own address in order to collect 40% of the trading fees. On the DEX UI, recipient_fee is set to the relayer&#39;s address which acts as a source of revenue but on the API you can set this field to any address of your choosing, including your own.</p>

<p>The DEX UI will also show you the full fees but if you have placed a trade through the API you would have paid only 60% of those fees.</p>
<h2 id='faq-2-what-are-the-gas-fees-on-injective'>2. What are the gas fees on Injective?</h2>
<p>If you place trades through the UI on one of the available <a href="https://hub.injective.network/trade">relayers</a> you can experience gas-less trading, if you place trades from the API you will pay gas fees in INJ but they will be very low at an average of 0.00005 INJ per message. Note that the INJ to pay for gas must be in the bank balance (wallet) and not the subaccount (trading account).</p>
<h2 id='faq-3-how-can-i-calculate-the-gas-fees-in-inj'>3. How can I calculate the gas fees in INJ?</h2>
<p>The minimum gas price set to the node is 500000000, in order to find the exact INJ amount paid you multiply the gas wanted with the minimum gas price and divide by 1e18. For instance, if gas wanted is 104519 then you would calculate it as follows:</p>

<p>500000000 * 104519 / 1e18 = 0.0000522595 INJ</p>
<h2 id='faq-4-which-api-nodes-can-i-connect-to'>4. Which API nodes can I connect to?</h2>
<p>There are currently three sentry nodes you can connect to on Mainnet that are based in the U.S. and Tokyo. It&#39;s recommended to connect to the sentry node closer to your location in order to reduce latency. You can also run your own Injective Node and Exchange API backend to have lower latency and full control over the infrastructure. You can find the guide on that <a href="https://injective.notion.site/Colocation-Service-Setup-Guide-ac00450b82bd4f638827c6261751049e">here</a></p>

<p>U.S. Sentry Node: sentry0.injective.network</p>

<p>U.S. Sentry Node: sentry1.injective.network</p>

<p>Tokyo Sentry Node: sentry3.injective.network</p>
<h2 id='faq-5-does-injective-have-an-api-support-channel'>5. Does Injective have an API support channel?</h2>
<p>Yes, you can join the <a href="https://discord.gg/dkEgUW4dzY">Discord</a> and <a href="https://t.me/InjectiveAPI">Telegram</a> API channels to ask any questions you might have or if you need any support.</p>
<h2 id='faq-6-can-i-get-the-order_hash-order_id-right-after-i-send-a-new-order'>6. Can I get the order_hash (order_id) right after I send a new order?</h2>
<p>Yes, you can actually fetch the order_hash before you even send the transaction through our simulation, you can see the Chain API examples on how to use the simulation.</p>
<h2 id='faq-7-are-there-limits-in-the-api-requests'>7. Are there limits in the API requests?</h2>
<p>No, there are currently no limits in the API requests.</p>
<h2 id='faq-8-what-is-the-normal-order-latency-i-can-expect'>8. What is the normal order latency I can expect?</h2>
<p>There&#39;s no guarantee on when the chain will process your transaction. It depends on the peer to peer gossip of the network and whether your transaction reaches a given block producer to get included in a block. You can read more details about this here <a href="https://docs.tendermint.com/v0.35/assets/img/tm-transaction-flow.258ca020.png">https://docs.tendermint.com/v0.35/assets/img/tm-transaction-flow.258ca020.png</a> as well as the docs here <a href="https://docs.tendermint.com/v0.35/introduction/what-is-tendermint.html">https://docs.tendermint.com/v0.35/introduction/what-is-tendermint.html</a></p>

<p>We strongly recommend following the guide to setup your own infrastructure which will ultimately reduce latency to a great extent.</p>
<h2 id='faq-9-can-i-have-my-own-client-id-to-send-messages-through-the-api'>9. Can I have my own client id to send messages through the API?</h2>
<p>No, we don&#39;t store private information on the Injective Chain.</p>
<h2 id='faq-10-would-i-save-gas-fees-if-i-batch-messages-in-transactions'>10. Would I save gas fees if I batch messages in transactions?</h2>
<p>Yes, a transaction includes fields such as messages, fee, signatures, memo and timeout height. When you send a batch of messages in a single transaction, the transaction size is less than the cumulative transaction size of individual transactions which ultimately results in less gas fees.</p>
<h2 id='faq-11-what-is-the-timeout_height'>11. What is the timeout_height?</h2>
<p>The timeout_height specifies a height at which your transaction will timeout and eventually prevents it from being committed past a certain height. Essentially, the transaction will be discarded from the mempool (timeout) after the block with number timeout_height has been mined and your sequence number is cleared if a bad transaction with a lower account sequence does not get processed correctly.</p>
<h2 id='faq-12-do-fee-discounts-apply-to-all-markets'>12. Do fee discounts apply to all markets?</h2>
<p>Discounts apply to all markets apart from markets that have negative maker fees or markets that have been explicitly excluded.</p>
<h2 id='faq-13-what-is-the-block-time-on-the-network'>13. What is the block time on the network?</h2>
<p>The average block time is currently around 2.5 seconds.</p>
<h2 id='faq-14-does-gas-fee-affect-block-inclusion-and-transaction-ordering'>14. Does gas fee affect block inclusion and transaction ordering?</h2>
<p>Gas fee affects block inclusion but not ordering, currently there&#39;s no ordering of transactions other than the order they&#39;ve arrived (based on the sequence number). For more information refer to the Tendermint <a href="https://docs.tendermint.com/v0.33/tendermint-core/mempool.html">docs</a></p>
<h2 id='faq-15-when-may-i-see-account-sequence-mismatch-errors'>15. When may I see account sequence mismatch errors?</h2>
<p>On a high-level, when a sentry node receives a transaction it runs a <code>CheckTx</code> to verify the validity of the transaction which includes <strong>stateless</strong> and <strong>stateful</strong> checks. One of those checks is to verify that the sender’s sequence number is valid - the sequence number is primarily used for replay protection and it also affects the ordering logic of transactions.</p>

<p>When you broadcast multiple transactions sequentially to the node the sequence is incremented by one for each transaction and your transactions will be included in a block in the order they arrive (based on the sequence). Should the transaction pass all the checks from <code>CheckTx</code> then it is included in the nodes’ mempool (an in-memory pool of transactions unique to each node) which will be gossiped to other peers in the network prior to consensus. When the transaction reaches the proposer validator node then it will be included in a block. Note that in <a href="https://docs.tendermint.com/master/introduction/what-is-tendermint.html">Tendermint BFT</a> (cosmos-sdk consensus algorithm) finality is <strong>absolute</strong>, meaning that transactions are finalized when they are included in a block.</p>

<p>There are a couple of reasons you might see account sequence mismatch errors:</p>

<p>1) If you run a trading bot and at the same time you try to broadcast a transaction on the DEX you&#39;ll end up with a sequence mismatch since the bot will fetch the sequence from the node and the same will happen with the Frontend so you end up broadcasting a transaction with the same sequence number. Similarly, if you run a trading bot with the same private key you&#39;ll also see sequence mismatch errors, thus you should use the private key only at one platform at a time.</p>

<p>2) In the examples we&#39;re using a function to handle the sequence locally because if you send multiple transactions in a single block the only way to do that is to use local sequence as until the tx is confirmed the peers in the network are not aware that the sequence has been increased. Essentially, we fetch the sequence the first time through the node directly and then handle it locally for consecutive transactions. If you use sync/async and fetch the sequence from the node every time opposed to handling it locally then you&#39;ll occasionally end up with a sequence mismatch.</p>

<p>You can refer to these functions below for sdk-python.</p>

<p>https://github.com/InjectiveLabs/sdk-python/blob/master/pyinjective/wallet.py#L269</p>

<p>https://github.com/InjectiveLabs/sdk-python/blob/master/pyinjective/wallet.py#L296</p>

<p>On the other hand, if you use broadcast mode you essentially expect the tx to be included in a block and then you&#39;ll get a response back from the sentry - that&#39;s not really recommended since it&#39;s wasting a lot of resources from the sentry and it&#39;s slower on the client-side too but in this case it guarantees that the sequence will always be unique and you can fetch it from the node every time you send a tx.</p>

<p>3) If you broadcasted a transaction with gas fee lower than the minimum threshold on the node then this transaction will remain in the mempool until the node is restarted and the transaction is discarded or until the transaction expires (if you&#39;ve set a timeout_height before you broadcasted it). If a transaction is stuck in the mempool then you won&#39;t be able to broadcast transactions to that node (and potentially to other nodes in the network if it has been gossiped) since the account sequence will be incorrect. To ensure that transactions don&#39;t get stuck in the mempool please use the gas fee set in the examples.</p>
<h2 id='faq-16-what-are-the-broadcast-modes-i-can-use-to-send-a-transaction'>16. What are the broadcast modes I can use to send a transaction?</h2>
<p><strong>Sync:</strong> Wait for the tx to pass/fail CheckTx</p>

<p><strong>Async:</strong> Don’t wait for the tx to pass/fail CheckTx; send and return tx immediately</p>

<p><strong>Block:</strong> Wait for the tx to pass/fail CheckTx, DeliverTx, and be committed in a block</p>
<h2 id='faq-17-when-may-i-see-a-max-subscriptions-per-client-error'>17. When may I see a max subscriptions per client error?</h2>
<p>You can open up to 5 chain channels per IP, if you run more than 5 trading bots from the same IP then this error would naturally show up and you should use a different IP. Every trading bot should open one chain channel only, thus if you&#39;re seeing this error and don&#39;t have 5 distinct trading bots then it indicates an issue in your logic. If you want to broadcast multiple transactions in a single block you can use sync mode and open one channel only. You can refer <a href="https://github.com/InjectiveLabs/sdk-python/blob/master/examples/async/chain_client/1_MsgSend.py#L32">here</a> for the chain channel initialization in sdk-python.</p>
<h2 id='faq-18-how-long-does-it-take-until-the-exchange-api-returns-my-orders-trades-after-the-transaction-has-been-sent'>18. How long does it take until the Exchange API returns my orders/trades after the transaction has been sent?</h2>
<p>This depends on a lot of factors such as the P2P network topology and geolocation of the client-server. When you broadcast a transaction, the following cycle takes place:</p>

<p>1) The transaction is gossiped to other peers in the network</p>

<p>2) The transaction eventually reaches the proposer node</p>

<p>3) Validators participating in the consensus round sign the block and it&#39;s produced on-chain</p>

<p>4) The block information is gossiped to the read-only peers (sentry nodes)</p>

<p>5) The events emitted by the chain are picked up by the indexer (Exchange API) and included in a MongoDB</p>

<p>6) Exchange API will query MongoDB to fetch you the data</p>

<p>7) Geolocation between client-sentry will determine the latency until the data is served on the client</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="go">Golang</a>
          </div>
      </div>
    </div>
  </body>
</html>
